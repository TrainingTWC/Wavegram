(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function H0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bc={exports:{}},Zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm;function pS(){if(xm)return Zo;xm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:o,key:c,ref:a!==void 0?a:null,props:l}}return Zo.Fragment=e,Zo.jsx=i,Zo.jsxs=i,Zo}var Cm;function mS(){return Cm||(Cm=1,bc.exports=pS()),bc.exports}var w=mS(),xc={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function gS(){if(Am)return he;Am=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function T(I){return I===null||typeof I!="object"?null:(I=S&&I[S]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function D(I,J,X){this.props=I,this.context=J,this.refs=R,this.updater=X||x}D.prototype.isReactComponent={},D.prototype.setState=function(I,J){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,J,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function q(){}q.prototype=D.prototype;function M(I,J,X){this.props=I,this.context=J,this.refs=R,this.updater=X||x}var H=M.prototype=new q;H.constructor=M,A(H,D.prototype),H.isPureReactComponent=!0;var Y=Array.isArray;function z(){}var G={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function K(I,J,X){var Z=X.ref;return{$$typeof:t,type:I,key:J,ref:Z!==void 0?Z:null,props:X}}function ce(I,J){return K(I.type,J,I.props)}function xe(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function qe(I){var J={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(X){return J[X]})}var Ce=/\/+/g;function Ye(I,J){return typeof I=="object"&&I!==null&&I.key!=null?qe(""+I.key):J.toString(36)}function xt(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(z,z):(I.status="pending",I.then(function(J){I.status==="pending"&&(I.status="fulfilled",I.value=J)},function(J){I.status==="pending"&&(I.status="rejected",I.reason=J)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function B(I,J,X,Z,fe){var pe=typeof I;(pe==="undefined"||pe==="boolean")&&(I=null);var ke=!1;if(I===null)ke=!0;else switch(pe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(I.$$typeof){case t:case e:ke=!0;break;case v:return ke=I._init,B(ke(I._payload),J,X,Z,fe)}}if(ke)return fe=fe(I),ke=Z===""?"."+Ye(I,0):Z,Y(fe)?(X="",ke!=null&&(X=ke.replace(Ce,"$&/")+"/"),B(fe,J,X,"",function(ye){return ye})):fe!=null&&(xe(fe)&&(fe=ce(fe,X+(fe.key==null||I&&I.key===fe.key?"":(""+fe.key).replace(Ce,"$&/")+"/")+ke)),J.push(fe)),1;ke=0;var yt=Z===""?".":Z+":";if(Y(I))for(var Q=0;Q<I.length;Q++)Z=I[Q],pe=yt+Ye(Z,Q),ke+=B(Z,J,X,pe,fe);else if(Q=T(I),typeof Q=="function")for(I=Q.call(I),Q=0;!(Z=I.next()).done;)Z=Z.value,pe=yt+Ye(Z,Q++),ke+=B(Z,J,X,pe,fe);else if(pe==="object"){if(typeof I.then=="function")return B(xt(I),J,X,Z,fe);throw J=String(I),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ke}function j(I,J,X){if(I==null)return I;var Z=[],fe=0;return B(I,Z,"","",function(pe){return J.call(X,pe,fe++)}),Z}function ae(I){if(I._status===-1){var J=I._result;J=J(),J.then(function(X){(I._status===0||I._status===-1)&&(I._status=1,I._result=X)},function(X){(I._status===0||I._status===-1)&&(I._status=2,I._result=X)}),I._status===-1&&(I._status=0,I._result=J)}if(I._status===1)return I._result.default;throw I._result}var Pe=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Ie={map:j,forEach:function(I,J,X){j(I,function(){J.apply(this,arguments)},X)},count:function(I){var J=0;return j(I,function(){J++}),J},toArray:function(I){return j(I,function(J){return J})||[]},only:function(I){if(!xe(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return he.Activity=_,he.Children=Ie,he.Component=D,he.Fragment=i,he.Profiler=a,he.PureComponent=M,he.StrictMode=o,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,he.__COMPILER_RUNTIME={__proto__:null,c:function(I){return G.H.useMemoCache(I)}},he.cache=function(I){return function(){return I.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(I,J,X){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Z=A({},I.props),fe=I.key;if(J!=null)for(pe in J.key!==void 0&&(fe=""+J.key),J)!ie.call(J,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&J.ref===void 0||(Z[pe]=J[pe]);var pe=arguments.length-2;if(pe===1)Z.children=X;else if(1<pe){for(var ke=Array(pe),yt=0;yt<pe;yt++)ke[yt]=arguments[yt+2];Z.children=ke}return K(I.type,fe,Z)},he.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},he.createElement=function(I,J,X){var Z,fe={},pe=null;if(J!=null)for(Z in J.key!==void 0&&(pe=""+J.key),J)ie.call(J,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(fe[Z]=J[Z]);var ke=arguments.length-2;if(ke===1)fe.children=X;else if(1<ke){for(var yt=Array(ke),Q=0;Q<ke;Q++)yt[Q]=arguments[Q+2];fe.children=yt}if(I&&I.defaultProps)for(Z in ke=I.defaultProps,ke)fe[Z]===void 0&&(fe[Z]=ke[Z]);return K(I,pe,fe)},he.createRef=function(){return{current:null}},he.forwardRef=function(I){return{$$typeof:h,render:I}},he.isValidElement=xe,he.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:ae}},he.memo=function(I,J){return{$$typeof:m,type:I,compare:J===void 0?null:J}},he.startTransition=function(I){var J=G.T,X={};G.T=X;try{var Z=I(),fe=G.S;fe!==null&&fe(X,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(z,Pe)}catch(pe){Pe(pe)}finally{J!==null&&X.types!==null&&(J.types=X.types),G.T=J}},he.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},he.use=function(I){return G.H.use(I)},he.useActionState=function(I,J,X){return G.H.useActionState(I,J,X)},he.useCallback=function(I,J){return G.H.useCallback(I,J)},he.useContext=function(I){return G.H.useContext(I)},he.useDebugValue=function(){},he.useDeferredValue=function(I,J){return G.H.useDeferredValue(I,J)},he.useEffect=function(I,J){return G.H.useEffect(I,J)},he.useEffectEvent=function(I){return G.H.useEffectEvent(I)},he.useId=function(){return G.H.useId()},he.useImperativeHandle=function(I,J,X){return G.H.useImperativeHandle(I,J,X)},he.useInsertionEffect=function(I,J){return G.H.useInsertionEffect(I,J)},he.useLayoutEffect=function(I,J){return G.H.useLayoutEffect(I,J)},he.useMemo=function(I,J){return G.H.useMemo(I,J)},he.useOptimistic=function(I,J){return G.H.useOptimistic(I,J)},he.useReducer=function(I,J,X){return G.H.useReducer(I,J,X)},he.useRef=function(I){return G.H.useRef(I)},he.useState=function(I){return G.H.useState(I)},he.useSyncExternalStore=function(I,J,X){return G.H.useSyncExternalStore(I,J,X)},he.useTransition=function(){return G.H.useTransition()},he.version="19.2.3",he}var Rm;function fd(){return Rm||(Rm=1,xc.exports=gS()),xc.exports}var te=fd();const We=H0(te);var Cc={exports:{}},er={},Ac={exports:{}},Rc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function yS(){return Nm||(Nm=1,(function(t){function e(B,j){var ae=B.length;B.push(j);e:for(;0<ae;){var Pe=ae-1>>>1,Ie=B[Pe];if(0<a(Ie,j))B[Pe]=j,B[ae]=Ie,ae=Pe;else break e}}function i(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var j=B[0],ae=B.pop();if(ae!==j){B[0]=ae;e:for(var Pe=0,Ie=B.length,I=Ie>>>1;Pe<I;){var J=2*(Pe+1)-1,X=B[J],Z=J+1,fe=B[Z];if(0>a(X,ae))Z<Ie&&0>a(fe,X)?(B[Pe]=fe,B[Z]=ae,Pe=Z):(B[Pe]=X,B[J]=ae,Pe=J);else if(Z<Ie&&0>a(fe,ae))B[Pe]=fe,B[Z]=ae,Pe=Z;else break e}}return j}function a(B,j){var ae=B.sortIndex-j.sortIndex;return ae!==0?ae:B.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],m=[],v=1,_=null,S=3,T=!1,x=!1,A=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function H(B){for(var j=i(m);j!==null;){if(j.callback===null)o(m);else if(j.startTime<=B)o(m),j.sortIndex=j.expirationTime,e(g,j);else break;j=i(m)}}function Y(B){if(A=!1,H(B),!x)if(i(g)!==null)x=!0,z||(z=!0,qe());else{var j=i(m);j!==null&&xt(Y,j.startTime-B)}}var z=!1,G=-1,ie=5,K=-1;function ce(){return R?!0:!(t.unstable_now()-K<ie)}function xe(){if(R=!1,z){var B=t.unstable_now();K=B;var j=!0;try{e:{x=!1,A&&(A=!1,q(G),G=-1),T=!0;var ae=S;try{t:{for(H(B),_=i(g);_!==null&&!(_.expirationTime>B&&ce());){var Pe=_.callback;if(typeof Pe=="function"){_.callback=null,S=_.priorityLevel;var Ie=Pe(_.expirationTime<=B);if(B=t.unstable_now(),typeof Ie=="function"){_.callback=Ie,H(B),j=!0;break t}_===i(g)&&o(g),H(B)}else o(g);_=i(g)}if(_!==null)j=!0;else{var I=i(m);I!==null&&xt(Y,I.startTime-B),j=!1}}break e}finally{_=null,S=ae,T=!1}j=void 0}}finally{j?qe():z=!1}}}var qe;if(typeof M=="function")qe=function(){M(xe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ye=Ce.port2;Ce.port1.onmessage=xe,qe=function(){Ye.postMessage(null)}}else qe=function(){D(xe,0)};function xt(B,j){G=D(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var j=3;break;default:j=S}var ae=S;S=j;try{return B()}finally{S=ae}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=S;S=B;try{return j()}finally{S=ae}},t.unstable_scheduleCallback=function(B,j,ae){var Pe=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Pe+ae:Pe):ae=Pe,B){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=ae+Ie,B={id:v++,callback:j,priorityLevel:B,startTime:ae,expirationTime:Ie,sortIndex:-1},ae>Pe?(B.sortIndex=ae,e(m,B),i(g)===null&&B===i(m)&&(A?(q(G),G=-1):A=!0,xt(Y,ae-Pe))):(B.sortIndex=Ie,e(g,B),x||T||(x=!0,z||(z=!0,qe()))),B},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(B){var j=S;return function(){var ae=S;S=j;try{return B.apply(this,arguments)}finally{S=ae}}}})(Rc)),Rc}var Im;function vS(){return Im||(Im=1,Ac.exports=yS()),Ac.exports}var Nc={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function _S(){if(Mm)return At;Mm=1;var t=fd();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,At.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},At.flushSync=function(g){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=m,o.p=v,o.d.f()}},At.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},At.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},At.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:T}):v==="script"&&o.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},At.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},At.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},At.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},At.requestFormReset=function(g){o.d.r(g)},At.unstable_batchedUpdates=function(g,m){return g(m)},At.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},At.useFormStatus=function(){return c.H.useHostTransitionStatus()},At.version="19.2.3",At}var km;function SS(){if(km)return Nc.exports;km=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Nc.exports=_S(),Nc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function ES(){if(Dm)return er;Dm=1;var t=vS(),e=fd(),i=SS();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(o(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var r=n,u=s;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return g(p),n;if(y===u)return g(p),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=p,u=y;else{for(var E=!1,b=p.child;b;){if(b===r){E=!0,r=p,u=y;break}if(b===u){E=!0,u=p,r=y;break}b=b.sibling}if(!E){for(b=y.child;b;){if(b===r){E=!0,r=y,u=p;break}if(b===u){E=!0,u=y,r=p;break}b=b.sibling}if(!E)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),M=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function qe(n){return n===null||typeof n!="object"?null:(n=xe&&n[xe]||n["@@iterator"],typeof n=="function"?n:null)}var Ce=Symbol.for("react.client.reference");function Ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ce?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case D:return"Profiler";case R:return"StrictMode";case Y:return"Suspense";case z:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case M:return n.displayName||"Context";case q:return(n._context.displayName||"Context")+".Consumer";case H:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case G:return s=n.displayName||null,s!==null?s:Ye(n.type)||"Memo";case ie:s=n._payload,n=n._init;try{return Ye(n(s))}catch{}}return null}var xt=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Pe=[],Ie=-1;function I(n){return{current:n}}function J(n){0>Ie||(n.current=Pe[Ie],Pe[Ie]=null,Ie--)}function X(n,s){Ie++,Pe[Ie]=n.current,n.current=s}var Z=I(null),fe=I(null),pe=I(null),ke=I(null);function yt(n,s){switch(X(pe,s),X(fe,n),X(Z,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Kp(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Kp(s),n=jp(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(Z),X(Z,n)}function Q(){J(Z),J(fe),J(pe)}function ye(n){n.memoizedState!==null&&X(ke,n);var s=Z.current,r=jp(s,n.type);s!==r&&(X(fe,n),X(Z,r))}function Se(n){fe.current===n&&(J(Z),J(fe)),ke.current===n&&(J(ke),jo._currentValue=ae)}var Ee,Ze;function ot(n){if(Ee===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ee=s&&s[1]||"",Ze=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+n+Ze}var Ri=!1;function hn(n,s){if(!n||Ri)return"";Ri=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(P){var O=P}Reflect.construct(n,[],F)}else{try{F.call()}catch(P){O=P}n.call(F.prototype)}}else{try{throw Error()}catch(P){O=P}(F=n())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(P){if(P&&O&&typeof P.stack=="string")return[P.stack,O.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],b=y[1];if(E&&b){var C=E.split(`
`),L=b.split(`
`);for(p=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;p<L.length&&!L[p].includes("DetermineComponentFrameRoot");)p++;if(u===C.length||p===L.length)for(u=C.length-1,p=L.length-1;1<=u&&0<=p&&C[u]!==L[p];)p--;for(;1<=u&&0<=p;u--,p--)if(C[u]!==L[p]){if(u!==1||p!==1)do if(u--,p--,0>p||C[u]!==L[p]){var V=`
`+C[u].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=u&&0<=p);break}}}finally{Ri=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?ot(r):""}function Rn(n,s){switch(n.tag){case 26:case 27:case 5:return ot(n.type);case 16:return ot("Lazy");case 13:return n.child!==s&&s!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return hn(n.type,!1);case 11:return hn(n.type.render,!1);case 1:return hn(n.type,!0);case 31:return ot("Activity");default:return""}}function ve(n){try{var s="",r=null;do s+=Rn(n,r),r=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ge=Object.prototype.hasOwnProperty,Nn=t.unstable_scheduleCallback,ts=t.unstable_cancelCallback,pr=t.unstable_shouldYield,mr=t.unstable_requestPaint,Ct=t.unstable_now,oo=t.unstable_getCurrentPriorityLevel,_e=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,pn=t.unstable_NormalPriority,dl=t.unstable_LowPriority,gr=t.unstable_IdlePriority,yr=t.log,Dt=t.unstable_setDisableYieldValue,ro=null,Gt=null;function Zn(n){if(typeof yr=="function"&&Dt(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ro,n)}catch{}}var Vt=Math.clz32?Math.clz32:ev,Qy=Math.log,Zy=Math.LN2;function ev(n){return n>>>=0,n===0?32:31-(Qy(n)/Zy|0)|0}var vr=256,_r=262144,Sr=4194304;function Ni(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Er(n,s,r){var u=n.pendingLanes;if(u===0)return 0;var p=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~y,u!==0?p=Ni(u):(E&=b,E!==0?p=Ni(E):r||(r=b&~n,r!==0&&(p=Ni(r))))):(b=u&~y,b!==0?p=Ni(b):E!==0?p=Ni(E):r||(r=u&~n,r!==0&&(p=Ni(r)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:p}function ao(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function tv(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(){var n=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),n}function fl(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function lo(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nv(n,s,r,u,p,y){var E=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var b=n.entanglements,C=n.expirationTimes,L=n.hiddenUpdates;for(r=E&~r;0<r;){var V=31-Vt(r),F=1<<V;b[V]=0,C[V]=-1;var O=L[V];if(O!==null)for(L[V]=null,V=0;V<O.length;V++){var P=O[V];P!==null&&(P.lane&=-536870913)}r&=~F}u!==0&&Nd(n,u,0),y!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~s))}function Nd(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Vt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function Id(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var u=31-Vt(r),p=1<<u;p&s|n[u]&s&&(n[u]|=s),r&=~p}}function Md(n,s){var r=s&-s;return r=(r&42)!==0?1:hl(r),(r&(n.suspendedLanes|s))!==0?0:r}function hl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function kd(){var n=j.p;return n!==0?n:(n=window.event,n===void 0?32:vm(n.type))}function Dd(n,s){var r=j.p;try{return j.p=n,s()}finally{j.p=r}}var ei=Math.random().toString(36).slice(2),vt="__reactFiber$"+ei,Ut="__reactProps$"+ei,ns="__reactContainer$"+ei,ml="__reactEvents$"+ei,iv="__reactListeners$"+ei,sv="__reactHandles$"+ei,Ud="__reactResources$"+ei,uo="__reactMarker$"+ei;function gl(n){delete n[vt],delete n[Ut],delete n[ml],delete n[iv],delete n[sv]}function is(n){var s=n[vt];if(s)return s;for(var r=n.parentNode;r;){if(s=r[ns]||r[vt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=nm(n);n!==null;){if(r=n[vt])return r;n=nm(n)}return s}n=r,r=n.parentNode}return null}function ss(n){if(n=n[vt]||n[ns]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function co(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function os(n){var s=n[Ud];return s||(s=n[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pt(n){n[uo]=!0}var Ld=new Set,Od={};function Ii(n,s){rs(n,s),rs(n+"Capture",s)}function rs(n,s){for(Od[n]=s,n=0;n<s.length;n++)Ld.add(s[n])}var ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pd={},qd={};function rv(n){return Ge.call(qd,n)?!0:Ge.call(Pd,n)?!1:ov.test(n)?qd[n]=!0:(Pd[n]=!0,!1)}function wr(n,s,r){if(rv(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function Tr(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function In(n,s,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+u)}}function en(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function av(n,s,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){r=""+E,y.call(this,E)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(E){r=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function yl(n){if(!n._valueTracker){var s=Bd(n)?"checked":"value";n._valueTracker=av(n,s,""+n[s])}}function Hd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return n&&(u=Bd(n)?n.checked?"true":"false":n.value),n=u,n!==r?(s.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var lv=/[\n"\\]/g;function tn(n){return n.replace(lv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function vl(n,s,r,u,p,y,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+en(s)):n.value!==""+en(s)&&(n.value=""+en(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?_l(n,E,en(s)):r!=null?_l(n,E,en(r)):u!=null&&n.removeAttribute("value"),p==null&&y!=null&&(n.defaultChecked=!!y),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+en(b):n.removeAttribute("name")}function Gd(n,s,r,u,p,y,E,b){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){yl(n);return}r=r!=null?""+en(r):"",s=s!=null?""+en(s):r,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),yl(n)}function _l(n,s,r){s==="number"&&br(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function as(n,s,r,u){if(n=n.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=s.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&u&&(n[r].defaultSelected=!0)}else{for(r=""+en(r),s=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function Vd(n,s,r){if(s!=null&&(s=""+en(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+en(r):""}function zd(n,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(xt(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=en(s),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),yl(n)}function ls(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var uv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $d(n,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,r):typeof r!="number"||r===0||uv.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function Fd(n,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&$d(n,p,u)}else for(var y in s)s.hasOwnProperty(y)&&$d(n,y,s[y])}function Sl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(n){return dv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Mn(){}var El=null;function wl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var us=null,cs=null;function Jd(n){var s=ss(n);if(s&&(n=s.stateNode)){var r=n[Ut]||null;e:switch(n=s.stateNode,s.type){case"input":if(vl(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+tn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==n&&u.form===n.form){var p=u[Ut]||null;if(!p)throw Error(o(90));vl(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===n.form&&Hd(u)}break e;case"textarea":Vd(n,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&as(n,!!r.multiple,s,!1)}}}var Tl=!1;function Yd(n,s,r){if(Tl)return n(s,r);Tl=!0;try{var u=n(s);return u}finally{if(Tl=!1,(us!==null||cs!==null)&&(fa(),us&&(s=us,n=cs,cs=us=null,Jd(s),n)))for(s=0;s<n.length;s++)Jd(n[s])}}function fo(n,s){var r=n.stateNode;if(r===null)return null;var u=r[Ut]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bl=!1;if(kn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){bl=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{bl=!1}var ti=null,xl=null,Cr=null;function Kd(){if(Cr)return Cr;var n,s=xl,r=s.length,u,p="value"in ti?ti.value:ti.textContent,y=p.length;for(n=0;n<r&&s[n]===p[n];n++);var E=r-n;for(u=1;u<=E&&s[r-u]===p[y-u];u++);return Cr=p.slice(n,1<u?1-u:void 0)}function Ar(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Rr(){return!0}function jd(){return!1}function Lt(n){function s(r,u,p,y,E){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(r=n[b],this[b]=r?r(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Rr:jd,this.isPropagationStopped=jd,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),s}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nr=Lt(Mi),po=_({},Mi,{view:0,detail:0}),fv=Lt(po),Cl,Al,mo,Ir=_({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mo&&(mo&&n.type==="mousemove"?(Cl=n.screenX-mo.screenX,Al=n.screenY-mo.screenY):Al=Cl=0,mo=n),Cl)},movementY:function(n){return"movementY"in n?n.movementY:Al}}),Xd=Lt(Ir),hv=_({},Ir,{dataTransfer:0}),pv=Lt(hv),mv=_({},po,{relatedTarget:0}),Rl=Lt(mv),gv=_({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),yv=Lt(gv),vv=_({},Mi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_v=Lt(vv),Sv=_({},Mi,{data:0}),Wd=Lt(Sv),Ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bv(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Tv[n])?!!s[n]:!1}function Nl(){return bv}var xv=_({},po,{key:function(n){if(n.key){var s=Ev[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ar(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(n){return n.type==="keypress"?Ar(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ar(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Cv=Lt(xv),Av=_({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=Lt(Av),Rv=_({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),Nv=Lt(Rv),Iv=_({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mv=Lt(Iv),kv=_({},Ir,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Dv=Lt(kv),Uv=_({},Mi,{newState:0,oldState:0}),Lv=Lt(Uv),Ov=[9,13,27,32],Il=kn&&"CompositionEvent"in window,go=null;kn&&"documentMode"in document&&(go=document.documentMode);var Pv=kn&&"TextEvent"in window&&!go,Zd=kn&&(!Il||go&&8<go&&11>=go),ef=" ",tf=!1;function nf(n,s){switch(n){case"keyup":return Ov.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ds=!1;function qv(n,s){switch(n){case"compositionend":return sf(s);case"keypress":return s.which!==32?null:(tf=!0,ef);case"textInput":return n=s.data,n===ef&&tf?null:n;default:return null}}function Bv(n,s){if(ds)return n==="compositionend"||!Il&&nf(n,s)?(n=Kd(),Cr=xl=ti=null,ds=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zd&&s.locale!=="ko"?null:s.data;default:return null}}var Hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function of(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Hv[n.type]:s==="textarea"}function rf(n,s,r,u){us?cs?cs.push(u):cs=[u]:us=u,s=_a(s,"onChange"),0<s.length&&(r=new Nr("onChange","change",null,r,u),n.push({event:r,listeners:s}))}var yo=null,vo=null;function Gv(n){Vp(n,0)}function Mr(n){var s=co(n);if(Hd(s))return n}function af(n,s){if(n==="change")return s}var lf=!1;if(kn){var Ml;if(kn){var kl="oninput"in document;if(!kl){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),kl=typeof uf.oninput=="function"}Ml=kl}else Ml=!1;lf=Ml&&(!document.documentMode||9<document.documentMode)}function cf(){yo&&(yo.detachEvent("onpropertychange",df),vo=yo=null)}function df(n){if(n.propertyName==="value"&&Mr(vo)){var s=[];rf(s,vo,n,wl(n)),Yd(Gv,s)}}function Vv(n,s,r){n==="focusin"?(cf(),yo=s,vo=r,yo.attachEvent("onpropertychange",df)):n==="focusout"&&cf()}function zv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Mr(vo)}function $v(n,s){if(n==="click")return Mr(s)}function Fv(n,s){if(n==="input"||n==="change")return Mr(s)}function Jv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var zt=typeof Object.is=="function"?Object.is:Jv;function _o(n,s){if(zt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Ge.call(s,p)||!zt(n[p],s[p]))return!1}return!0}function ff(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hf(n,s){var r=ff(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=s&&u>=s)return{node:r,offset:s-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ff(r)}}function pf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?pf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function mf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=br(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=br(n.document)}return s}function Dl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Yv=kn&&"documentMode"in document&&11>=document.documentMode,fs=null,Ul=null,So=null,Ll=!1;function gf(n,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ll||fs==null||fs!==br(u)||(u=fs,"selectionStart"in u&&Dl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),So&&_o(So,u)||(So=u,u=_a(Ul,"onSelect"),0<u.length&&(s=new Nr("onSelect","select",null,s,r),n.push({event:s,listeners:u}),s.target=fs)))}function ki(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var hs={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Ol={},yf={};kn&&(yf=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Di(n){if(Ol[n])return Ol[n];if(!hs[n])return n;var s=hs[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in yf)return Ol[n]=s[r];return n}var vf=Di("animationend"),_f=Di("animationiteration"),Sf=Di("animationstart"),Kv=Di("transitionrun"),jv=Di("transitionstart"),Xv=Di("transitioncancel"),Ef=Di("transitionend"),wf=new Map,Pl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pl.push("scrollEnd");function mn(n,s){wf.set(n,s),Ii(s,[n])}var kr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},nn=[],ps=0,ql=0;function Dr(){for(var n=ps,s=ql=ps=0;s<n;){var r=nn[s];nn[s++]=null;var u=nn[s];nn[s++]=null;var p=nn[s];nn[s++]=null;var y=nn[s];if(nn[s++]=null,u!==null&&p!==null){var E=u.pending;E===null?p.next=p:(p.next=E.next,E.next=p),u.pending=p}y!==0&&Tf(r,p,y)}}function Ur(n,s,r,u){nn[ps++]=n,nn[ps++]=s,nn[ps++]=r,nn[ps++]=u,ql|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bl(n,s,r,u){return Ur(n,s,r,u),Lr(n)}function Ui(n,s){return Ur(n,null,null,s),Lr(n)}function Tf(n,s,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(p=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,p&&s!==null&&(p=31-Vt(r),n=y.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=r|536870912),y):null}function Lr(n){if(50<Vo)throw Vo=0,Ku=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ms={};function Wv(n,s,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(n,s,r,u){return new Wv(n,s,r,u)}function Hl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Dn(n,s){var r=n.alternate;return r===null?(r=$t(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function bf(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Or(n,s,r,u,p,y){var E=0;if(u=n,typeof n=="function")Hl(n)&&(E=1);else if(typeof n=="string")E=nS(n,r,Z.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case K:return n=$t(31,r,s,p),n.elementType=K,n.lanes=y,n;case A:return Li(r.children,p,y,s);case R:E=8,p|=24;break;case D:return n=$t(12,r,s,p|2),n.elementType=D,n.lanes=y,n;case Y:return n=$t(13,r,s,p),n.elementType=Y,n.lanes=y,n;case z:return n=$t(19,r,s,p),n.elementType=z,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:E=10;break e;case q:E=9;break e;case H:E=11;break e;case G:E=14;break e;case ie:E=16,u=null;break e}E=29,r=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=$t(E,r,s,p),s.elementType=n,s.type=u,s.lanes=y,s}function Li(n,s,r,u){return n=$t(7,n,u,s),n.lanes=r,n}function Gl(n,s,r){return n=$t(6,n,null,s),n.lanes=r,n}function xf(n){var s=$t(18,null,null,0);return s.stateNode=n,s}function Vl(n,s,r){return s=$t(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Cf=new WeakMap;function sn(n,s){if(typeof n=="object"&&n!==null){var r=Cf.get(n);return r!==void 0?r:(s={value:n,source:s,stack:ve(s)},Cf.set(n,s),s)}return{value:n,source:s,stack:ve(s)}}var gs=[],ys=0,Pr=null,Eo=0,on=[],rn=0,ni=null,bn=1,xn="";function Un(n,s){gs[ys++]=Eo,gs[ys++]=Pr,Pr=n,Eo=s}function Af(n,s,r){on[rn++]=bn,on[rn++]=xn,on[rn++]=ni,ni=n;var u=bn;n=xn;var p=32-Vt(u)-1;u&=~(1<<p),r+=1;var y=32-Vt(s)+p;if(30<y){var E=p-p%5;y=(u&(1<<E)-1).toString(32),u>>=E,p-=E,bn=1<<32-Vt(s)+p|r<<p|u,xn=y+n}else bn=1<<y|r<<p|u,xn=n}function zl(n){n.return!==null&&(Un(n,1),Af(n,1,0))}function $l(n){for(;n===Pr;)Pr=gs[--ys],gs[ys]=null,Eo=gs[--ys],gs[ys]=null;for(;n===ni;)ni=on[--rn],on[rn]=null,xn=on[--rn],on[rn]=null,bn=on[--rn],on[rn]=null}function Rf(n,s){on[rn++]=bn,on[rn++]=xn,on[rn++]=ni,bn=s.id,xn=s.overflow,ni=n}var _t=null,Ke=null,Ne=!1,ii=null,an=!1,Fl=Error(o(519));function si(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wo(sn(s,n)),Fl}function Nf(n){var s=n.stateNode,r=n.type,u=n.memoizedProps;switch(s[vt]=n,s[Ut]=u,r){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(r=0;r<$o.length;r++)Te($o[r],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),Gd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),zd(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||Jp(s.textContent,r)?(u.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),u.onScroll!=null&&Te("scroll",s),u.onScrollEnd!=null&&Te("scrollend",s),u.onClick!=null&&(s.onclick=Mn),s=!0):s=!1,s||si(n,!0)}function If(n){for(_t=n.return;_t;)switch(_t.tag){case 5:case 31:case 13:an=!1;return;case 27:case 3:an=!0;return;default:_t=_t.return}}function vs(n){if(n!==_t)return!1;if(!Ne)return If(n),Ne=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||uc(n.type,n.memoizedProps)),r=!r),r&&Ke&&si(n),If(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ke=tm(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ke=tm(n)}else s===27?(s=Ke,vi(n.type)?(n=pc,pc=null,Ke=n):Ke=s):Ke=_t?un(n.stateNode.nextSibling):null;return!0}function Oi(){Ke=_t=null,Ne=!1}function Jl(){var n=ii;return n!==null&&(Bt===null?Bt=n:Bt.push.apply(Bt,n),ii=null),n}function wo(n){ii===null?ii=[n]:ii.push(n)}var Yl=I(null),Pi=null,Ln=null;function oi(n,s,r){X(Yl,s._currentValue),s._currentValue=r}function On(n){n._currentValue=Yl.current,J(Yl)}function Kl(n,s,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===r)break;n=n.return}}function jl(n,s,r,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var b=y;y=p;for(var C=0;C<s.length;C++)if(b.context===s[C]){y.lanes|=r,b=y.alternate,b!==null&&(b.lanes|=r),Kl(y.return,r,n),u||(E=null);break e}y=b.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(o(341));E.lanes|=r,y=E.alternate,y!==null&&(y.lanes|=r),Kl(E,r,n),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===n){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function _s(n,s,r,u){n=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(o(387));if(E=E.memoizedProps,E!==null){var b=p.type;zt(p.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(p===ke.current){if(E=p.alternate,E===null)throw Error(o(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(jo):n=[jo])}p=p.return}n!==null&&jl(s,n,r,u),s.flags|=262144}function qr(n){for(n=n.firstContext;n!==null;){if(!zt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qi(n){Pi=n,Ln=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function St(n){return Mf(Pi,n)}function Br(n,s){return Pi===null&&qi(n),Mf(n,s)}function Mf(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Ln===null){if(n===null)throw Error(o(308));Ln=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ln=Ln.next=s;return r}var Qv=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},Zv=t.unstable_scheduleCallback,e_=t.unstable_NormalPriority,rt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xl(){return{controller:new Qv,data:new Map,refCount:0}}function To(n){n.refCount--,n.refCount===0&&Zv(e_,function(){n.controller.abort()})}var bo=null,Wl=0,Ss=0,Es=null;function t_(n,s){if(bo===null){var r=bo=[];Wl=0,Ss=ec(),Es={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Wl++,s.then(kf,kf),s}function kf(){if(--Wl===0&&bo!==null){Es!==null&&(Es.status="fulfilled");var n=bo;bo=null,Ss=0,Es=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function n_(n,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var Df=B.S;B.S=function(n,s){gp=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&t_(n,s),Df!==null&&Df(n,s)};var Bi=I(null);function Ql(){var n=Bi.current;return n!==null?n:Fe.pooledCache}function Hr(n,s){s===null?X(Bi,Bi.current):X(Bi,s.pool)}function Uf(){var n=Ql();return n===null?null:{parent:rt._currentValue,pool:n}}var ws=Error(o(460)),Zl=Error(o(474)),Gr=Error(o(542)),Vr={then:function(){}};function Lf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Of(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(Mn,Mn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qf(n),n;default:if(typeof s.status=="string")s.then(Mn,Mn);else{if(n=Fe,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qf(n),n}throw Gi=s,ws}}function Hi(n){try{var s=n._init;return s(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Gi=r,ws):r}}var Gi=null;function Pf(){if(Gi===null)throw Error(o(459));var n=Gi;return Gi=null,n}function qf(n){if(n===ws||n===Gr)throw Error(o(483))}var Ts=null,xo=0;function zr(n){var s=xo;return xo+=1,Ts===null&&(Ts=[]),Of(Ts,n,s)}function Co(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function $r(n,s){throw s.$$typeof===S?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Bf(n){function s(k,N){if(n){var U=k.deletions;U===null?(k.deletions=[N],k.flags|=16):U.push(N)}}function r(k,N){if(!n)return null;for(;N!==null;)s(k,N),N=N.sibling;return null}function u(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function p(k,N){return k=Dn(k,N),k.index=0,k.sibling=null,k}function y(k,N,U){return k.index=U,n?(U=k.alternate,U!==null?(U=U.index,U<N?(k.flags|=67108866,N):U):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function E(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function b(k,N,U,$){return N===null||N.tag!==6?(N=Gl(U,k.mode,$),N.return=k,N):(N=p(N,U),N.return=k,N)}function C(k,N,U,$){var oe=U.type;return oe===A?V(k,N,U.props.children,$,U.key):N!==null&&(N.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ie&&Hi(oe)===N.type)?(N=p(N,U.props),Co(N,U),N.return=k,N):(N=Or(U.type,U.key,U.props,null,k.mode,$),Co(N,U),N.return=k,N)}function L(k,N,U,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Vl(U,k.mode,$),N.return=k,N):(N=p(N,U.children||[]),N.return=k,N)}function V(k,N,U,$,oe){return N===null||N.tag!==7?(N=Li(U,k.mode,$,oe),N.return=k,N):(N=p(N,U),N.return=k,N)}function F(k,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Gl(""+N,k.mode,U),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case T:return U=Or(N.type,N.key,N.props,null,k.mode,U),Co(U,N),U.return=k,U;case x:return N=Vl(N,k.mode,U),N.return=k,N;case ie:return N=Hi(N),F(k,N,U)}if(xt(N)||qe(N))return N=Li(N,k.mode,U,null),N.return=k,N;if(typeof N.then=="function")return F(k,zr(N),U);if(N.$$typeof===M)return F(k,Br(k,N),U);$r(k,N)}return null}function O(k,N,U,$){var oe=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return oe!==null?null:b(k,N,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return U.key===oe?C(k,N,U,$):null;case x:return U.key===oe?L(k,N,U,$):null;case ie:return U=Hi(U),O(k,N,U,$)}if(xt(U)||qe(U))return oe!==null?null:V(k,N,U,$,null);if(typeof U.then=="function")return O(k,N,zr(U),$);if(U.$$typeof===M)return O(k,N,Br(k,U),$);$r(k,U)}return null}function P(k,N,U,$,oe){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(U)||null,b(N,k,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return k=k.get($.key===null?U:$.key)||null,C(N,k,$,oe);case x:return k=k.get($.key===null?U:$.key)||null,L(N,k,$,oe);case ie:return $=Hi($),P(k,N,U,$,oe)}if(xt($)||qe($))return k=k.get(U)||null,V(N,k,$,oe,null);if(typeof $.then=="function")return P(k,N,U,zr($),oe);if($.$$typeof===M)return P(k,N,U,Br(N,$),oe);$r(N,$)}return null}function ee(k,N,U,$){for(var oe=null,De=null,ne=N,ge=N=0,Re=null;ne!==null&&ge<U.length;ge++){ne.index>ge?(Re=ne,ne=null):Re=ne.sibling;var Ue=O(k,ne,U[ge],$);if(Ue===null){ne===null&&(ne=Re);break}n&&ne&&Ue.alternate===null&&s(k,ne),N=y(Ue,N,ge),De===null?oe=Ue:De.sibling=Ue,De=Ue,ne=Re}if(ge===U.length)return r(k,ne),Ne&&Un(k,ge),oe;if(ne===null){for(;ge<U.length;ge++)ne=F(k,U[ge],$),ne!==null&&(N=y(ne,N,ge),De===null?oe=ne:De.sibling=ne,De=ne);return Ne&&Un(k,ge),oe}for(ne=u(ne);ge<U.length;ge++)Re=P(ne,k,ge,U[ge],$),Re!==null&&(n&&Re.alternate!==null&&ne.delete(Re.key===null?ge:Re.key),N=y(Re,N,ge),De===null?oe=Re:De.sibling=Re,De=Re);return n&&ne.forEach(function(Ti){return s(k,Ti)}),Ne&&Un(k,ge),oe}function re(k,N,U,$){if(U==null)throw Error(o(151));for(var oe=null,De=null,ne=N,ge=N=0,Re=null,Ue=U.next();ne!==null&&!Ue.done;ge++,Ue=U.next()){ne.index>ge?(Re=ne,ne=null):Re=ne.sibling;var Ti=O(k,ne,Ue.value,$);if(Ti===null){ne===null&&(ne=Re);break}n&&ne&&Ti.alternate===null&&s(k,ne),N=y(Ti,N,ge),De===null?oe=Ti:De.sibling=Ti,De=Ti,ne=Re}if(Ue.done)return r(k,ne),Ne&&Un(k,ge),oe;if(ne===null){for(;!Ue.done;ge++,Ue=U.next())Ue=F(k,Ue.value,$),Ue!==null&&(N=y(Ue,N,ge),De===null?oe=Ue:De.sibling=Ue,De=Ue);return Ne&&Un(k,ge),oe}for(ne=u(ne);!Ue.done;ge++,Ue=U.next())Ue=P(ne,k,ge,Ue.value,$),Ue!==null&&(n&&Ue.alternate!==null&&ne.delete(Ue.key===null?ge:Ue.key),N=y(Ue,N,ge),De===null?oe=Ue:De.sibling=Ue,De=Ue);return n&&ne.forEach(function(hS){return s(k,hS)}),Ne&&Un(k,ge),oe}function $e(k,N,U,$){if(typeof U=="object"&&U!==null&&U.type===A&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case T:e:{for(var oe=U.key;N!==null;){if(N.key===oe){if(oe=U.type,oe===A){if(N.tag===7){r(k,N.sibling),$=p(N,U.props.children),$.return=k,k=$;break e}}else if(N.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ie&&Hi(oe)===N.type){r(k,N.sibling),$=p(N,U.props),Co($,U),$.return=k,k=$;break e}r(k,N);break}else s(k,N);N=N.sibling}U.type===A?($=Li(U.props.children,k.mode,$,U.key),$.return=k,k=$):($=Or(U.type,U.key,U.props,null,k.mode,$),Co($,U),$.return=k,k=$)}return E(k);case x:e:{for(oe=U.key;N!==null;){if(N.key===oe)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){r(k,N.sibling),$=p(N,U.children||[]),$.return=k,k=$;break e}else{r(k,N);break}else s(k,N);N=N.sibling}$=Vl(U,k.mode,$),$.return=k,k=$}return E(k);case ie:return U=Hi(U),$e(k,N,U,$)}if(xt(U))return ee(k,N,U,$);if(qe(U)){if(oe=qe(U),typeof oe!="function")throw Error(o(150));return U=oe.call(U),re(k,N,U,$)}if(typeof U.then=="function")return $e(k,N,zr(U),$);if(U.$$typeof===M)return $e(k,N,Br(k,U),$);$r(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(r(k,N.sibling),$=p(N,U),$.return=k,k=$):(r(k,N),$=Gl(U,k.mode,$),$.return=k,k=$),E(k)):r(k,N)}return function(k,N,U,$){try{xo=0;var oe=$e(k,N,U,$);return Ts=null,oe}catch(ne){if(ne===ws||ne===Gr)throw ne;var De=$t(29,ne,null,k.mode);return De.lanes=$,De.return=k,De}finally{}}}var Vi=Bf(!0),Hf=Bf(!1),ri=!1;function eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ai(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function li(n,s,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Oe&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Lr(n),Tf(n,null,r),s}return Ur(n,u,s,r),Lr(n)}function Ao(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,Id(n,r)}}function nu(n,s){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var E={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,r=r.next}while(r!==null);y===null?p=y=s:y=y.next=s}else p=y=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var iu=!1;function Ro(){if(iu){var n=Es;if(n!==null)throw n}}function No(n,s,r,u){iu=!1;var p=n.updateQueue;ri=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var C=b,L=C.next;C.next=null,E===null?y=L:E.next=L,E=C;var V=n.alternate;V!==null&&(V=V.updateQueue,b=V.lastBaseUpdate,b!==E&&(b===null?V.firstBaseUpdate=L:b.next=L,V.lastBaseUpdate=C))}if(y!==null){var F=p.baseState;E=0,V=L=C=null,b=y;do{var O=b.lane&-536870913,P=O!==b.lane;if(P?(Ae&O)===O:(u&O)===O){O!==0&&O===Ss&&(iu=!0),V!==null&&(V=V.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ee=n,re=b;O=s;var $e=r;switch(re.tag){case 1:if(ee=re.payload,typeof ee=="function"){F=ee.call($e,F,O);break e}F=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=re.payload,O=typeof ee=="function"?ee.call($e,F,O):ee,O==null)break e;F=_({},F,O);break e;case 2:ri=!0}}O=b.callback,O!==null&&(n.flags|=64,P&&(n.flags|=8192),P=p.callbacks,P===null?p.callbacks=[O]:P.push(O))}else P={lane:O,tag:b.tag,payload:b.payload,callback:b.callback,next:null},V===null?(L=V=P,C=F):V=V.next=P,E|=O;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;P=b,b=P.next,P.next=null,p.lastBaseUpdate=P,p.shared.pending=null}}while(!0);V===null&&(C=F),p.baseState=C,p.firstBaseUpdate=L,p.lastBaseUpdate=V,y===null&&(p.shared.lanes=0),hi|=E,n.lanes=E,n.memoizedState=F}}function Gf(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function Vf(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Gf(r[n],s)}var bs=I(null),Fr=I(0);function zf(n,s){n=Fn,X(Fr,n),X(bs,s),Fn=n|s.baseLanes}function su(){X(Fr,Fn),X(bs,bs.current)}function ou(){Fn=Fr.current,J(bs),J(Fr)}var Ft=I(null),ln=null;function ui(n){var s=n.alternate;X(it,it.current&1),X(Ft,n),ln===null&&(s===null||bs.current!==null||s.memoizedState!==null)&&(ln=n)}function ru(n){X(it,it.current),X(Ft,n),ln===null&&(ln=n)}function $f(n){n.tag===22?(X(it,it.current),X(Ft,n),ln===null&&(ln=n)):ci()}function ci(){X(it,it.current),X(Ft,Ft.current)}function Jt(n){J(Ft),ln===n&&(ln=null),J(it)}var it=I(0);function Jr(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||fc(r)||hc(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pn=0,me=null,Ve=null,at=null,Yr=!1,xs=!1,zi=!1,Kr=0,Io=0,Cs=null,i_=0;function et(){throw Error(o(321))}function au(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!zt(n[r],s[r]))return!1;return!0}function lu(n,s,r,u,p,y){return Pn=y,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=n===null||n.memoizedState===null?Ah:Tu,zi=!1,y=r(u,p),zi=!1,xs&&(y=Jf(s,r,u,p)),Ff(n),y}function Ff(n){B.H=Do;var s=Ve!==null&&Ve.next!==null;if(Pn=0,at=Ve=me=null,Yr=!1,Io=0,Cs=null,s)throw Error(o(300));n===null||lt||(n=n.dependencies,n!==null&&qr(n)&&(lt=!0))}function Jf(n,s,r,u){me=n;var p=0;do{if(xs&&(Cs=null),Io=0,xs=!1,25<=p)throw Error(o(301));if(p+=1,at=Ve=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}B.H=Rh,y=s(r,u)}while(xs);return y}function s_(){var n=B.H,s=n.useState()[0];return s=typeof s.then=="function"?Mo(s):s,n=n.useState()[0],(Ve!==null?Ve.memoizedState:null)!==n&&(me.flags|=1024),s}function uu(){var n=Kr!==0;return Kr=0,n}function cu(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function du(n){if(Yr){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Yr=!1}Pn=0,at=Ve=me=null,xs=!1,Io=Kr=0,Cs=null}function It(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?me.memoizedState=at=n:at=at.next=n,at}function st(){if(Ve===null){var n=me.alternate;n=n!==null?n.memoizedState:null}else n=Ve.next;var s=at===null?me.memoizedState:at.next;if(s!==null)at=s,Ve=n;else{if(n===null)throw me.alternate===null?Error(o(467)):Error(o(310));Ve=n,n={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},at===null?me.memoizedState=at=n:at=at.next=n}return at}function jr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(n){var s=Io;return Io+=1,Cs===null&&(Cs=[]),n=Of(Cs,n,s),s=me,(at===null?s.memoizedState:at.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?Ah:Tu),n}function Xr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Mo(n);if(n.$$typeof===M)return St(n)}throw Error(o(438,String(n)))}function fu(n){var s=null,r=me.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=jr(),me.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),u=0;u<n;u++)r[u]=ce;return s.index++,r}function qn(n,s){return typeof s=="function"?s(n):s}function Wr(n){var s=st();return hu(s,Ve,n)}function hu(n,s,r){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var p=n.baseQueue,y=u.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}s.baseQueue=p=y,u.pending=null}if(y=n.baseState,p===null)n.memoizedState=y;else{s=p.next;var b=E=null,C=null,L=s,V=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Ae&F)===F:(Pn&F)===F){var O=L.revertLane;if(O===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===Ss&&(V=!0);else if((Pn&O)===O){L=L.next,O===Ss&&(V=!0);continue}else F={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(b=C=F,E=y):C=C.next=F,me.lanes|=O,hi|=O;F=L.action,zi&&r(y,F),y=L.hasEagerState?L.eagerState:r(y,F)}else O={lane:F,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(b=C=O,E=y):C=C.next=O,me.lanes|=F,hi|=F;L=L.next}while(L!==null&&L!==s);if(C===null?E=y:C.next=b,!zt(y,n.memoizedState)&&(lt=!0,V&&(r=Es,r!==null)))throw r;n.memoizedState=y,n.baseState=E,n.baseQueue=C,u.lastRenderedState=y}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function pu(n){var s=st(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=n;var u=r.dispatch,p=r.pending,y=s.memoizedState;if(p!==null){r.pending=null;var E=p=p.next;do y=n(y,E.action),E=E.next;while(E!==p);zt(y,s.memoizedState)||(lt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function Yf(n,s,r){var u=me,p=st(),y=Ne;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var E=!zt((Ve||p).memoizedState,r);if(E&&(p.memoizedState=r,lt=!0),p=p.queue,yu(Xf.bind(null,u,p,n),[n]),p.getSnapshot!==s||E||at!==null&&at.memoizedState.tag&1){if(u.flags|=2048,As(9,{destroy:void 0},jf.bind(null,u,p,r,s),null),Fe===null)throw Error(o(349));y||(Pn&127)!==0||Kf(u,s,r)}return r}function Kf(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=me.updateQueue,s===null?(s=jr(),me.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function jf(n,s,r,u){s.value=r,s.getSnapshot=u,Wf(s)&&Qf(n)}function Xf(n,s,r){return r(function(){Wf(s)&&Qf(n)})}function Wf(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!zt(n,r)}catch{return!0}}function Qf(n){var s=Ui(n,2);s!==null&&Ht(s,n,2)}function mu(n){var s=It();if(typeof n=="function"){var r=n;if(n=r(),zi){Zn(!0);try{r()}finally{Zn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},s}function Zf(n,s,r,u){return n.baseState=r,hu(n,Ve,typeof u=="function"?u:qn)}function o_(n,s,r,u,p){if(ea(n))throw Error(o(485));if(n=s.action,n!==null){var y={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};B.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,eh(s,y)):(y.next=r.next,s.pending=r.next=y)}}function eh(n,s){var r=s.action,u=s.payload,p=n.state;if(s.isTransition){var y=B.T,E={};B.T=E;try{var b=r(p,u),C=B.S;C!==null&&C(E,b),th(n,s,b)}catch(L){gu(n,s,L)}finally{y!==null&&E.types!==null&&(y.types=E.types),B.T=y}}else try{y=r(p,u),th(n,s,y)}catch(L){gu(n,s,L)}}function th(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){nh(n,s,u)},function(u){return gu(n,s,u)}):nh(n,s,r)}function nh(n,s,r){s.status="fulfilled",s.value=r,ih(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,eh(n,r)))}function gu(n,s,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,ih(s),s=s.next;while(s!==u)}n.action=null}function ih(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function sh(n,s){return s}function oh(n,s){if(Ne){var r=Fe.formState;if(r!==null){e:{var u=me;if(Ne){if(Ke){t:{for(var p=Ke,y=an;p.nodeType!==8;){if(!y){p=null;break t}if(p=un(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ke=un(p.nextSibling),u=p.data==="F!";break e}}si(u)}u=!1}u&&(s=r[0])}}return r=It(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:s},r.queue=u,r=bh.bind(null,me,u),u.dispatch=r,u=mu(!1),y=wu.bind(null,me,!1,u.queue),u=It(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,r=o_.bind(null,me,p,y,r),p.dispatch=r,u.memoizedState=n,[s,r,!1]}function rh(n){var s=st();return ah(s,Ve,n)}function ah(n,s,r){if(s=hu(n,s,sh)[0],n=Wr(qn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Mo(s)}catch(E){throw E===ws?Gr:E}else u=s;s=st();var p=s.queue,y=p.dispatch;return r!==s.memoizedState&&(me.flags|=2048,As(9,{destroy:void 0},r_.bind(null,p,r),null)),[u,y,n]}function r_(n,s){n.action=s}function lh(n){var s=st(),r=Ve;if(r!==null)return ah(s,r,n);st(),s=s.memoizedState,r=st();var u=r.queue.dispatch;return r.memoizedState=n,[s,u,!1]}function As(n,s,r,u){return n={tag:n,create:r,deps:u,inst:s,next:null},s=me.updateQueue,s===null&&(s=jr(),me.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,s.lastEffect=n),n}function uh(){return st().memoizedState}function Qr(n,s,r,u){var p=It();me.flags|=n,p.memoizedState=As(1|s,{destroy:void 0},r,u===void 0?null:u)}function Zr(n,s,r,u){var p=st();u=u===void 0?null:u;var y=p.memoizedState.inst;Ve!==null&&u!==null&&au(u,Ve.memoizedState.deps)?p.memoizedState=As(s,y,r,u):(me.flags|=n,p.memoizedState=As(1|s,y,r,u))}function ch(n,s){Qr(8390656,8,n,s)}function yu(n,s){Zr(2048,8,n,s)}function a_(n){me.flags|=4;var s=me.updateQueue;if(s===null)s=jr(),me.updateQueue=s,s.events=[n];else{var r=s.events;r===null?s.events=[n]:r.push(n)}}function dh(n){var s=st().memoizedState;return a_({ref:s,nextImpl:n}),function(){if((Oe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function fh(n,s){return Zr(4,2,n,s)}function hh(n,s){return Zr(4,4,n,s)}function ph(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function mh(n,s,r){r=r!=null?r.concat([n]):null,Zr(4,4,ph.bind(null,s,n),r)}function vu(){}function gh(n,s){var r=st();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&au(s,u[1])?u[0]:(r.memoizedState=[n,s],n)}function yh(n,s){var r=st();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&au(s,u[1]))return u[0];if(u=n(),zi){Zn(!0);try{n()}finally{Zn(!1)}}return r.memoizedState=[u,s],u}function _u(n,s,r){return r===void 0||(Pn&1073741824)!==0&&(Ae&261930)===0?n.memoizedState=s:(n.memoizedState=r,n=vp(),me.lanes|=n,hi|=n,r)}function vh(n,s,r,u){return zt(r,s)?r:bs.current!==null?(n=_u(n,r,u),zt(n,s)||(lt=!0),n):(Pn&42)===0||(Pn&1073741824)!==0&&(Ae&261930)===0?(lt=!0,n.memoizedState=r):(n=vp(),me.lanes|=n,hi|=n,s)}function _h(n,s,r,u,p){var y=j.p;j.p=y!==0&&8>y?y:8;var E=B.T,b={};B.T=b,wu(n,!1,s,r);try{var C=p(),L=B.S;if(L!==null&&L(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var V=n_(C,u);ko(n,s,V,jt(n))}else ko(n,s,u,jt(n))}catch(F){ko(n,s,{then:function(){},status:"rejected",reason:F},jt())}finally{j.p=y,E!==null&&b.types!==null&&(E.types=b.types),B.T=E}}function l_(){}function Su(n,s,r,u){if(n.tag!==5)throw Error(o(476));var p=Sh(n).queue;_h(n,p,s,ae,r===null?l_:function(){return Eh(n),r(u)})}function Sh(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:ae},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Eh(n){var s=Sh(n);s.next===null&&(s=n.alternate.memoizedState),ko(n,s.next.queue,{},jt())}function Eu(){return St(jo)}function wh(){return st().memoizedState}function Th(){return st().memoizedState}function u_(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=jt();n=ai(r);var u=li(s,n,r);u!==null&&(Ht(u,s,r),Ao(u,s,r)),s={cache:Xl()},n.payload=s;return}s=s.return}}function c_(n,s,r){var u=jt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ea(n)?xh(s,r):(r=Bl(n,s,r,u),r!==null&&(Ht(r,n,u),Ch(r,s,u)))}function bh(n,s,r){var u=jt();ko(n,s,r,u)}function ko(n,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ea(n))xh(s,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,b=y(E,r);if(p.hasEagerState=!0,p.eagerState=b,zt(b,E))return Ur(n,s,p,0),Fe===null&&Dr(),!1}catch{}finally{}if(r=Bl(n,s,p,u),r!==null)return Ht(r,n,u),Ch(r,s,u),!0}return!1}function wu(n,s,r,u){if(u={lane:2,revertLane:ec(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ea(n)){if(s)throw Error(o(479))}else s=Bl(n,r,u,2),s!==null&&Ht(s,n,2)}function ea(n){var s=n.alternate;return n===me||s!==null&&s===me}function xh(n,s){xs=Yr=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Ch(n,s,r){if((r&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,Id(n,r)}}var Do={readContext:St,use:Xr,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Do.useEffectEvent=et;var Ah={readContext:St,use:Xr,useCallback:function(n,s){return It().memoizedState=[n,s===void 0?null:s],n},useContext:St,useEffect:ch,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,Qr(4194308,4,ph.bind(null,s,n),r)},useLayoutEffect:function(n,s){return Qr(4194308,4,n,s)},useInsertionEffect:function(n,s){Qr(4,2,n,s)},useMemo:function(n,s){var r=It();s=s===void 0?null:s;var u=n();if(zi){Zn(!0);try{n()}finally{Zn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(n,s,r){var u=It();if(r!==void 0){var p=r(s);if(zi){Zn(!0);try{r(s)}finally{Zn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=c_.bind(null,me,n),[u.memoizedState,n]},useRef:function(n){var s=It();return n={current:n},s.memoizedState=n},useState:function(n){n=mu(n);var s=n.queue,r=bh.bind(null,me,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:vu,useDeferredValue:function(n,s){var r=It();return _u(r,n,s)},useTransition:function(){var n=mu(!1);return n=_h.bind(null,me,n.queue,!0,!1),It().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var u=me,p=It();if(Ne){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),Fe===null)throw Error(o(349));(Ae&127)!==0||Kf(u,s,r)}p.memoizedState=r;var y={value:r,getSnapshot:s};return p.queue=y,ch(Xf.bind(null,u,y,n),[n]),u.flags|=2048,As(9,{destroy:void 0},jf.bind(null,u,y,r,s),null),r},useId:function(){var n=It(),s=Fe.identifierPrefix;if(Ne){var r=xn,u=bn;r=(u&~(1<<32-Vt(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Kr++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=i_++,s="_"+s+"r_"+r.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Eu,useFormState:oh,useActionState:oh,useOptimistic:function(n){var s=It();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=wu.bind(null,me,!0,r),r.dispatch=s,[n,s]},useMemoCache:fu,useCacheRefresh:function(){return It().memoizedState=u_.bind(null,me)},useEffectEvent:function(n){var s=It(),r={impl:n};return s.memoizedState=r,function(){if((Oe&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Tu={readContext:St,use:Xr,useCallback:gh,useContext:St,useEffect:yu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:hh,useMemo:yh,useReducer:Wr,useRef:uh,useState:function(){return Wr(qn)},useDebugValue:vu,useDeferredValue:function(n,s){var r=st();return vh(r,Ve.memoizedState,n,s)},useTransition:function(){var n=Wr(qn)[0],s=st().memoizedState;return[typeof n=="boolean"?n:Mo(n),s]},useSyncExternalStore:Yf,useId:wh,useHostTransitionStatus:Eu,useFormState:rh,useActionState:rh,useOptimistic:function(n,s){var r=st();return Zf(r,Ve,n,s)},useMemoCache:fu,useCacheRefresh:Th};Tu.useEffectEvent=dh;var Rh={readContext:St,use:Xr,useCallback:gh,useContext:St,useEffect:yu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:hh,useMemo:yh,useReducer:pu,useRef:uh,useState:function(){return pu(qn)},useDebugValue:vu,useDeferredValue:function(n,s){var r=st();return Ve===null?_u(r,n,s):vh(r,Ve.memoizedState,n,s)},useTransition:function(){var n=pu(qn)[0],s=st().memoizedState;return[typeof n=="boolean"?n:Mo(n),s]},useSyncExternalStore:Yf,useId:wh,useHostTransitionStatus:Eu,useFormState:lh,useActionState:lh,useOptimistic:function(n,s){var r=st();return Ve!==null?Zf(r,Ve,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:fu,useCacheRefresh:Th};Rh.useEffectEvent=dh;function bu(n,s,r,u){s=n.memoizedState,r=r(u,s),r=r==null?s:_({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var xu={enqueueSetState:function(n,s,r){n=n._reactInternals;var u=jt(),p=ai(u);p.payload=s,r!=null&&(p.callback=r),s=li(n,p,u),s!==null&&(Ht(s,n,u),Ao(s,n,u))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var u=jt(),p=ai(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=li(n,p,u),s!==null&&(Ht(s,n,u),Ao(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=jt(),u=ai(r);u.tag=2,s!=null&&(u.callback=s),s=li(n,u,r),s!==null&&(Ht(s,n,r),Ao(s,n,r))}};function Nh(n,s,r,u,p,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,E):s.prototype&&s.prototype.isPureReactComponent?!_o(r,u)||!_o(p,y):!0}function Ih(n,s,r,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==n&&xu.enqueueReplaceState(s,s.state,null)}function $i(n,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(n=n.defaultProps){r===s&&(r=_({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function Mh(n){kr(n)}function kh(n){console.error(n)}function Dh(n){kr(n)}function ta(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Uh(n,s,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Cu(n,s,r){return r=ai(r),r.tag=3,r.payload={element:null},r.callback=function(){ta(n,s)},r}function Lh(n){return n=ai(n),n.tag=3,n}function Oh(n,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;n.payload=function(){return p(y)},n.callback=function(){Uh(s,r,u)}}var E=r.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Uh(s,r,u),typeof p!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function d_(n,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&_s(s,r,p,!0),r=Ft.current,r!==null){switch(r.tag){case 31:case 13:return ln===null?ha():r.alternate===null&&tt===0&&(tt=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===Vr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Wu(n,u,p)),!1;case 22:return r.flags|=65536,u===Vr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Wu(n,u,p)),!1}throw Error(o(435,r.tag))}return Wu(n,u,p),ha(),!1}if(Ne)return s=Ft.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==Fl&&(n=Error(o(422),{cause:u}),wo(sn(n,r)))):(u!==Fl&&(s=Error(o(423),{cause:u}),wo(sn(s,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=sn(u,r),p=Cu(n.stateNode,u,p),nu(n,p),tt!==4&&(tt=2)),!1;var y=Error(o(520),{cause:u});if(y=sn(y,r),Go===null?Go=[y]:Go.push(y),tt!==4&&(tt=2),s===null)return!0;u=sn(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=Cu(r.stateNode,u,n),nu(r,n),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pi===null||!pi.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Lh(p),Oh(p,n,r,u),nu(r,p),!1}r=r.return}while(r!==null);return!1}var Au=Error(o(461)),lt=!1;function Et(n,s,r,u){s.child=n===null?Hf(s,null,r,u):Vi(s,n.child,r,u)}function Ph(n,s,r,u,p){r=r.render;var y=s.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return qi(s),u=lu(n,s,r,E,y,p),b=uu(),n!==null&&!lt?(cu(n,s,p),Bn(n,s,p)):(Ne&&b&&zl(s),s.flags|=1,Et(n,s,u,p),s.child)}function qh(n,s,r,u,p){if(n===null){var y=r.type;return typeof y=="function"&&!Hl(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Bh(n,s,y,u,p)):(n=Or(r.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Lu(n,p)){var E=y.memoizedProps;if(r=r.compare,r=r!==null?r:_o,r(E,u)&&n.ref===s.ref)return Bn(n,s,p)}return s.flags|=1,n=Dn(y,u),n.ref=s.ref,n.return=s,s.child=n}function Bh(n,s,r,u,p){if(n!==null){var y=n.memoizedProps;if(_o(y,u)&&n.ref===s.ref)if(lt=!1,s.pendingProps=u=y,Lu(n,p))(n.flags&131072)!==0&&(lt=!0);else return s.lanes=n.lanes,Bn(n,s,p)}return Ru(n,s,r,u,p)}function Hh(n,s,r,u){var p=u.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return Gh(n,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Hr(s,y!==null?y.cachePool:null),y!==null?zf(s,y):su(),$f(s);else return u=s.lanes=536870912,Gh(n,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Hr(s,y.cachePool),zf(s,y),ci(),s.memoizedState=null):(n!==null&&Hr(s,null),su(),ci());return Et(n,s,p,r),s.child}function Uo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Gh(n,s,r,u,p){var y=Ql();return y=y===null?null:{parent:rt._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},n!==null&&Hr(s,null),su(),$f(s),n!==null&&_s(n,s,u,!0),s.childLanes=p,null}function na(n,s){return s=sa({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Vh(n,s,r){return Vi(s,n.child,null,r),n=na(s,s.pendingProps),n.flags|=2,Jt(s),s.memoizedState=null,n}function f_(n,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ne){if(u.mode==="hidden")return n=na(s,u),s.lanes=536870912,Uo(null,n);if(ru(s),(n=Ke)?(n=em(n,an),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ni!==null?{id:bn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},r=xf(n),r.return=s,s.child=r,_t=s,Ke=null)):n=null,n===null)throw si(s);return s.lanes=536870912,null}return na(s,u)}var y=n.memoizedState;if(y!==null){var E=y.dehydrated;if(ru(s),p)if(s.flags&256)s.flags&=-257,s=Vh(n,s,r);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(lt||_s(n,s,r,!1),p=(r&n.childLanes)!==0,lt||p){if(u=Fe,u!==null&&(E=Md(u,r),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ui(n,E),Ht(u,n,E),Au;ha(),s=Vh(n,s,r)}else n=y.treeContext,Ke=un(E.nextSibling),_t=s,Ne=!0,ii=null,an=!1,n!==null&&Rf(s,n),s=na(s,u),s.flags|=4096;return s}return n=Dn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ia(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function Ru(n,s,r,u,p){return qi(s),r=lu(n,s,r,u,void 0,p),u=uu(),n!==null&&!lt?(cu(n,s,p),Bn(n,s,p)):(Ne&&u&&zl(s),s.flags|=1,Et(n,s,r,p),s.child)}function zh(n,s,r,u,p,y){return qi(s),s.updateQueue=null,r=Jf(s,u,r,p),Ff(n),u=uu(),n!==null&&!lt?(cu(n,s,y),Bn(n,s,y)):(Ne&&u&&zl(s),s.flags|=1,Et(n,s,r,y),s.child)}function $h(n,s,r,u,p){if(qi(s),s.stateNode===null){var y=ms,E=r.contextType;typeof E=="object"&&E!==null&&(y=St(E)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=xu,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},eu(s),E=r.contextType,y.context=typeof E=="object"&&E!==null?St(E):ms,y.state=s.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(bu(s,r,E,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&xu.enqueueReplaceState(y,y.state,null),No(s,u,y,p),Ro(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){y=s.stateNode;var b=s.memoizedProps,C=$i(r,b);y.props=C;var L=y.context,V=r.contextType;E=ms,typeof V=="object"&&V!==null&&(E=St(V));var F=r.getDerivedStateFromProps;V=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b||L!==E)&&Ih(s,y,u,E),ri=!1;var O=s.memoizedState;y.state=O,No(s,u,y,p),Ro(),L=s.memoizedState,b||O!==L||ri?(typeof F=="function"&&(bu(s,r,F,u),L=s.memoizedState),(C=ri||Nh(s,r,C,u,O,L,E))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=L),y.props=u,y.state=L,y.context=E,u=C):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,tu(n,s),E=s.memoizedProps,V=$i(r,E),y.props=V,F=s.pendingProps,O=y.context,L=r.contextType,C=ms,typeof L=="object"&&L!==null&&(C=St(L)),b=r.getDerivedStateFromProps,(L=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==F||O!==C)&&Ih(s,y,u,C),ri=!1,O=s.memoizedState,y.state=O,No(s,u,y,p),Ro();var P=s.memoizedState;E!==F||O!==P||ri||n!==null&&n.dependencies!==null&&qr(n.dependencies)?(typeof b=="function"&&(bu(s,r,b,u),P=s.memoizedState),(V=ri||Nh(s,r,V,u,O,P,C)||n!==null&&n.dependencies!==null&&qr(n.dependencies))?(L||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,P,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,P,C)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&O===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&O===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=P),y.props=u,y.state=P,y.context=C,u=V):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&O===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&O===n.memoizedState||(s.flags|=1024),u=!1)}return y=u,ia(n,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&u?(s.child=Vi(s,n.child,null,p),s.child=Vi(s,null,r,p)):Et(n,s,r,p),s.memoizedState=y.state,n=s.child):n=Bn(n,s,p),n}function Fh(n,s,r,u){return Oi(),s.flags|=256,Et(n,s,r,u),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(n){return{baseLanes:n,cachePool:Uf()}}function Mu(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=Kt),n}function Jh(n,s,r){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(it.current&2)!==0),E&&(p=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ne){if(p?ui(s):ci(),(n=Ke)?(n=em(n,an),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ni!==null?{id:bn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},r=xf(n),r.return=s,s.child=r,_t=s,Ke=null)):n=null,n===null)throw si(s);return hc(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,p?(ci(),p=s.mode,b=sa({mode:"hidden",children:b},p),u=Li(u,p,r,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Iu(r),u.childLanes=Mu(n,E,r),s.memoizedState=Nu,Uo(null,u)):(ui(s),ku(s,b))}var C=n.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(y)s.flags&256?(ui(s),s.flags&=-257,s=Du(n,s,r)):s.memoizedState!==null?(ci(),s.child=n.child,s.flags|=128,s=null):(ci(),b=u.fallback,p=s.mode,u=sa({mode:"visible",children:u.children},p),b=Li(b,p,r,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,Vi(s,n.child,null,r),u=s.child,u.memoizedState=Iu(r),u.childLanes=Mu(n,E,r),s.memoizedState=Nu,s=Uo(null,u));else if(ui(s),hc(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var L=E.dgst;E=L,u=Error(o(419)),u.stack="",u.digest=E,wo({value:u,source:null,stack:null}),s=Du(n,s,r)}else if(lt||_s(n,s,r,!1),E=(r&n.childLanes)!==0,lt||E){if(E=Fe,E!==null&&(u=Md(E,r),u!==0&&u!==C.retryLane))throw C.retryLane=u,Ui(n,u),Ht(E,n,u),Au;fc(b)||ha(),s=Du(n,s,r)}else fc(b)?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,Ke=un(b.nextSibling),_t=s,Ne=!0,ii=null,an=!1,n!==null&&Rf(s,n),s=ku(s,u.children),s.flags|=4096);return s}return p?(ci(),b=u.fallback,p=s.mode,C=n.child,L=C.sibling,u=Dn(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,L!==null?b=Dn(L,b):(b=Li(b,p,r,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,Uo(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Iu(r):(p=b.cachePool,p!==null?(C=rt._currentValue,p=p.parent!==C?{parent:C,pool:C}:p):p=Uf(),b={baseLanes:b.baseLanes|r,cachePool:p}),u.memoizedState=b,u.childLanes=Mu(n,E,r),s.memoizedState=Nu,Uo(n.child,u)):(ui(s),r=n.child,n=r.sibling,r=Dn(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=r,s.memoizedState=null,r)}function ku(n,s){return s=sa({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function sa(n,s){return n=$t(22,n,null,s),n.lanes=0,n}function Du(n,s,r){return Vi(s,n.child,null,r),n=ku(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Yh(n,s,r){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Kl(n.return,s,r)}function Uu(n,s,r,u,p,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=r,E.tailMode=p,E.treeForkCount=y)}function Kh(n,s,r){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var E=it.current,b=(E&2)!==0;if(b?(E=E&1|2,s.flags|=128):E&=1,X(it,E),Et(n,s,u,r),u=Ne?Eo:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yh(n,r,s);else if(n.tag===19)Yh(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)n=r.alternate,n!==null&&Jr(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),Uu(s,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Jr(n)===null){s.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}Uu(s,!0,r,null,y,u);break;case"together":Uu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Bn(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),hi|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(_s(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,r=Dn(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=Dn(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function Lu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&qr(n)))}function h_(n,s,r){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),oi(s,rt,n.memoizedState.cache),Oi();break;case 27:case 5:ye(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:oi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ru(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ui(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Jh(n,s,r):(ui(s),n=Bn(n,s,r),n!==null?n.sibling:null);ui(s);break;case 19:var p=(n.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(_s(n,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return Kh(n,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),X(it,it.current),u)break;return null;case 22:return s.lanes=0,Hh(n,s,r,s.pendingProps);case 24:oi(s,rt,n.memoizedState.cache)}return Bn(n,s,r)}function jh(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)lt=!0;else{if(!Lu(n,r)&&(s.flags&128)===0)return lt=!1,h_(n,s,r);lt=(n.flags&131072)!==0}else lt=!1,Ne&&(s.flags&1048576)!==0&&Af(s,Eo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Hi(s.elementType),s.type=n,typeof n=="function")Hl(n)?(u=$i(n,u),s.tag=1,s=$h(null,s,n,u,r)):(s.tag=0,s=Ru(null,s,n,u,r));else{if(n!=null){var p=n.$$typeof;if(p===H){s.tag=11,s=Ph(null,s,n,u,r);break e}else if(p===G){s.tag=14,s=qh(null,s,n,u,r);break e}}throw s=Ye(n)||n,Error(o(306,s,""))}}return s;case 0:return Ru(n,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=$i(u,s.pendingProps),$h(n,s,u,p,r);case 3:e:{if(yt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,tu(n,s),No(s,u,null,r);var E=s.memoizedState;if(u=E.cache,oi(s,rt,u),u!==y.cache&&jl(s,[rt],r,!0),Ro(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Fh(n,s,u,r);break e}else if(u!==p){p=sn(Error(o(424)),s),wo(p),s=Fh(n,s,u,r);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ke=un(n.firstChild),_t=s,Ne=!0,ii=null,an=!0,r=Hf(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Oi(),u===p){s=Bn(n,s,r);break e}Et(n,s,u,r)}s=s.child}return s;case 26:return ia(n,s),n===null?(r=rm(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ne||(r=s.type,n=s.pendingProps,u=Sa(pe.current).createElement(r),u[vt]=s,u[Ut]=n,wt(u,r,n),pt(u),s.stateNode=u):s.memoizedState=rm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ye(s),n===null&&Ne&&(u=s.stateNode=im(s.type,s.pendingProps,pe.current),_t=s,an=!0,p=Ke,vi(s.type)?(pc=p,Ke=un(u.firstChild)):Ke=p),Et(n,s,s.pendingProps.children,r),ia(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ne&&((p=u=Ke)&&(u=z_(u,s.type,s.pendingProps,an),u!==null?(s.stateNode=u,_t=s,Ke=un(u.firstChild),an=!1,p=!0):p=!1),p||si(s)),ye(s),p=s.type,y=s.pendingProps,E=n!==null?n.memoizedProps:null,u=y.children,uc(p,y)?u=null:E!==null&&uc(p,E)&&(s.flags|=32),s.memoizedState!==null&&(p=lu(n,s,s_,null,null,r),jo._currentValue=p),ia(n,s),Et(n,s,u,r),s.child;case 6:return n===null&&Ne&&((n=r=Ke)&&(r=$_(r,s.pendingProps,an),r!==null?(s.stateNode=r,_t=s,Ke=null,n=!0):n=!1),n||si(s)),null;case 13:return Jh(n,s,r);case 4:return yt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Vi(s,null,u,r):Et(n,s,u,r),s.child;case 11:return Ph(n,s,s.type,s.pendingProps,r);case 7:return Et(n,s,s.pendingProps,r),s.child;case 8:return Et(n,s,s.pendingProps.children,r),s.child;case 12:return Et(n,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,oi(s,s.type,u.value),Et(n,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,qi(s),p=St(p),u=u(p),s.flags|=1,Et(n,s,u,r),s.child;case 14:return qh(n,s,s.type,s.pendingProps,r);case 15:return Bh(n,s,s.type,s.pendingProps,r);case 19:return Kh(n,s,r);case 31:return f_(n,s,r);case 22:return Hh(n,s,r,s.pendingProps);case 24:return qi(s),u=St(rt),n===null?(p=Ql(),p===null&&(p=Fe,y=Xl(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),s.memoizedState={parent:u,cache:p},eu(s),oi(s,rt,p)):((n.lanes&r)!==0&&(tu(n,s),No(s,null,null,r),Ro()),p=n.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),oi(s,rt,u)):(u=y.cache,oi(s,rt,u),u!==p.cache&&jl(s,[rt],r,!0))),Et(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Hn(n){n.flags|=4}function Ou(n,s,r,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(wp())n.flags|=8192;else throw Gi=Vr,Zl}else n.flags&=-16777217}function Xh(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!dm(s))if(wp())n.flags|=8192;else throw Gi=Vr,Zl}function oa(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Rd():536870912,n.lanes|=s,Ms|=s)}function Lo(n,s){if(!Ne)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function je(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(s)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=r,s}function p_(n,s,r){var u=s.pendingProps;switch($l(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(s),null;case 1:return je(s),null;case 3:return r=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),On(rt),Q(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(vs(s)?Hn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jl())),je(s),null;case 26:var p=s.type,y=s.memoizedState;return n===null?(Hn(s),y!==null?(je(s),Xh(s,y)):(je(s),Ou(s,p,null,u,r))):y?y!==n.memoizedState?(Hn(s),je(s),Xh(s,y)):(je(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Hn(s),je(s),Ou(s,p,n,u,r)),null;case 27:if(Se(s),r=pe.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return je(s),null}n=Z.current,vs(s)?Nf(s):(n=im(p,u,r),s.stateNode=n,Hn(s))}return je(s),null;case 5:if(Se(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return je(s),null}if(y=Z.current,vs(s))Nf(s);else{var E=Sa(pe.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?E.createElement(p,{is:u.is}):E.createElement(p)}}y[vt]=s,y[Ut]=u;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=y;e:switch(wt(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hn(s)}}return je(s),Ou(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,r),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=pe.current,vs(s)){if(n=s.stateNode,r=s.memoizedProps,u=null,p=_t,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[vt]=s,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Jp(n.nodeValue,r)),n||si(s,!0)}else n=Sa(n).createTextNode(u),n[vt]=s,s.stateNode=n}return je(s),null;case 31:if(r=s.memoizedState,n===null||n.memoizedState!==null){if(u=vs(s),r!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[vt]=s}else Oi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;je(s),n=!1}else r=Jl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return s.flags&256?(Jt(s),s):(Jt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return je(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=vs(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(o(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[vt]=s}else Oi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;je(s),p=!1}else p=Jl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Jt(s),s):(Jt(s),null)}return Jt(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==n&&r&&(s.child.flags|=8192),oa(s,s.updateQueue),je(s),null);case 4:return Q(),n===null&&sc(s.stateNode.containerInfo),je(s),null;case 10:return On(s.type),je(s),null;case 19:if(J(it),u=s.memoizedState,u===null)return je(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)Lo(u,!1);else{if(tt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Jr(n),y!==null){for(s.flags|=128,Lo(u,!1),n=y.updateQueue,s.updateQueue=n,oa(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)bf(r,n),r=r.sibling;return X(it,it.current&1|2),Ne&&Un(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Ct()>ca&&(s.flags|=128,p=!0,Lo(u,!1),s.lanes=4194304)}else{if(!p)if(n=Jr(y),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,oa(s,n),Lo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ne)return je(s),null}else 2*Ct()-u.renderingStartTime>ca&&r!==536870912&&(s.flags|=128,p=!0,Lo(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(n=u.last,n!==null?n.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ct(),n.sibling=null,r=it.current,X(it,p?r&1|2:r&1),Ne&&Un(s,u.treeForkCount),n):(je(s),null);case 22:case 23:return Jt(s),ou(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(je(s),s.subtreeFlags&6&&(s.flags|=8192)):je(s),r=s.updateQueue,r!==null&&oa(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),n!==null&&J(Bi),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),On(rt),je(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function m_(n,s){switch($l(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return On(rt),Q(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Se(s),null;case 31:if(s.memoizedState!==null){if(Jt(s),s.alternate===null)throw Error(o(340));Oi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Jt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Oi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(it),null;case 4:return Q(),null;case 10:return On(s.type),null;case 22:case 23:return Jt(s),ou(),n!==null&&J(Bi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return On(rt),null;case 25:return null;default:return null}}function Wh(n,s){switch($l(s),s.tag){case 3:On(rt),Q();break;case 26:case 27:case 5:Se(s);break;case 4:Q();break;case 31:s.memoizedState!==null&&Jt(s);break;case 13:Jt(s);break;case 19:J(it);break;case 10:On(s.type);break;case 22:case 23:Jt(s),ou(),n!==null&&J(Bi);break;case 24:On(rt)}}function Oo(n,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&n)===n){u=void 0;var y=r.create,E=r.inst;u=y(),E.destroy=u}r=r.next}while(r!==p)}}catch(b){He(s,s.return,b)}}function di(n,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&n)===n){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,p=s;var C=r,L=b;try{L()}catch(V){He(p,C,V)}}}u=u.next}while(u!==y)}}catch(V){He(s,s.return,V)}}function Qh(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{Vf(s,r)}catch(u){He(n,n.return,u)}}}function Zh(n,s,r){r.props=$i(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){He(n,s,u)}}function Po(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(p){He(n,s,p)}}function Cn(n,s){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){He(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){He(n,s,p)}else r.current=null}function ep(n){var s=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){He(n,n.return,p)}}function Pu(n,s,r){try{var u=n.stateNode;P_(u,n.type,r,s),u[Ut]=s}catch(p){He(n,n.return,p)}}function tp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&vi(n.type)||n.tag===4}function qu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&vi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bu(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Mn));else if(u!==4&&(u===27&&vi(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Bu(n,s,r),n=n.sibling;n!==null;)Bu(n,s,r),n=n.sibling}function ra(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(u!==4&&(u===27&&vi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(ra(n,s,r),n=n.sibling;n!==null;)ra(n,s,r),n=n.sibling}function np(n){var s=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);wt(s,u,r),s[vt]=n,s[Ut]=r}catch(y){He(n,n.return,y)}}var Gn=!1,ut=!1,Hu=!1,ip=typeof WeakSet=="function"?WeakSet:Set,mt=null;function g_(n,s){if(n=n.containerInfo,ac=Aa,n=mf(n),Dl(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var E=0,b=-1,C=-1,L=0,V=0,F=n,O=null;t:for(;;){for(var P;F!==r||p!==0&&F.nodeType!==3||(b=E+p),F!==y||u!==0&&F.nodeType!==3||(C=E+u),F.nodeType===3&&(E+=F.nodeValue.length),(P=F.firstChild)!==null;)O=F,F=P;for(;;){if(F===n)break t;if(O===r&&++L===p&&(b=E),O===y&&++V===u&&(C=E),(P=F.nextSibling)!==null)break;F=O,O=F.parentNode}F=P}r=b===-1||C===-1?null:{start:b,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(lc={focusedElem:n,selectionRange:r},Aa=!1,mt=s;mt!==null;)if(s=mt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,mt=n;else for(;mt!==null;){switch(s=mt,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=s,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var ee=$i(r.type,p);n=u.getSnapshotBeforeUpdate(ee,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(re){He(r,r.return,re)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)dc(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,mt=n;break}mt=s.return}}function sp(n,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:zn(n,r),u&4&&Oo(5,r);break;case 1:if(zn(n,r),u&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(E){He(r,r.return,E)}else{var p=$i(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){He(r,r.return,E)}}u&64&&Qh(r),u&512&&Po(r,r.return);break;case 3:if(zn(n,r),u&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Vf(n,s)}catch(E){He(r,r.return,E)}}break;case 27:s===null&&u&4&&np(r);case 26:case 5:zn(n,r),s===null&&u&4&&ep(r),u&512&&Po(r,r.return);break;case 12:zn(n,r);break;case 31:zn(n,r),u&4&&ap(n,r);break;case 13:zn(n,r),u&4&&lp(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=x_.bind(null,r),F_(n,r))));break;case 22:if(u=r.memoizedState!==null||Gn,!u){s=s!==null&&s.memoizedState!==null||ut,p=Gn;var y=ut;Gn=u,(ut=s)&&!y?$n(n,r,(r.subtreeFlags&8772)!==0):zn(n,r),Gn=p,ut=y}break;case 30:break;default:zn(n,r)}}function op(n){var s=n.alternate;s!==null&&(n.alternate=null,op(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&gl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xe=null,Ot=!1;function Vn(n,s,r){for(r=r.child;r!==null;)rp(n,s,r),r=r.sibling}function rp(n,s,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ro,r)}catch{}switch(r.tag){case 26:ut||Cn(r,s),Vn(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ut||Cn(r,s);var u=Xe,p=Ot;vi(r.type)&&(Xe=r.stateNode,Ot=!1),Vn(n,s,r),Jo(r.stateNode),Xe=u,Ot=p;break;case 5:ut||Cn(r,s);case 6:if(u=Xe,p=Ot,Xe=null,Vn(n,s,r),Xe=u,Ot=p,Xe!==null)if(Ot)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(r.stateNode)}catch(y){He(r,s,y)}else try{Xe.removeChild(r.stateNode)}catch(y){He(r,s,y)}break;case 18:Xe!==null&&(Ot?(n=Xe,Qp(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Bs(n)):Qp(Xe,r.stateNode));break;case 4:u=Xe,p=Ot,Xe=r.stateNode.containerInfo,Ot=!0,Vn(n,s,r),Xe=u,Ot=p;break;case 0:case 11:case 14:case 15:di(2,r,s),ut||di(4,r,s),Vn(n,s,r);break;case 1:ut||(Cn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Zh(r,s,u)),Vn(n,s,r);break;case 21:Vn(n,s,r);break;case 22:ut=(u=ut)||r.memoizedState!==null,Vn(n,s,r),ut=u;break;default:Vn(n,s,r)}}function ap(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Bs(n)}catch(r){He(s,s.return,r)}}}function lp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Bs(n)}catch(r){He(s,s.return,r)}}function y_(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ip),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ip),s;default:throw Error(o(435,n.tag))}}function aa(n,s){var r=y_(n);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=C_.bind(null,n,u);u.then(p,p)}})}function Pt(n,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=n,E=s,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(vi(b.type)){Xe=b.stateNode,Ot=!1;break e}break;case 5:Xe=b.stateNode,Ot=!1;break e;case 3:case 4:Xe=b.stateNode.containerInfo,Ot=!0;break e}b=b.return}if(Xe===null)throw Error(o(160));rp(y,E,p),Xe=null,Ot=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)up(s,n),s=s.sibling}var gn=null;function up(n,s){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pt(s,n),qt(n),u&4&&(di(3,n,n.return),Oo(3,n),di(5,n,n.return));break;case 1:Pt(s,n),qt(n),u&512&&(ut||r===null||Cn(r,r.return)),u&64&&Gn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=gn;if(Pt(s,n),qt(n),u&512&&(ut||r===null||Cn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[uo]||y[vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),wt(y,u,r),y[vt]=n,pt(y),u=y;break e;case"link":var E=um("link","href",p).get(u+(r.href||""));if(E){for(var b=0;b<E.length;b++)if(y=E[b],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){E.splice(b,1);break t}}y=p.createElement(u),wt(y,u,r),p.head.appendChild(y);break;case"meta":if(E=um("meta","content",p).get(u+(r.content||""))){for(b=0;b<E.length;b++)if(y=E[b],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){E.splice(b,1);break t}}y=p.createElement(u),wt(y,u,r),p.head.appendChild(y);break;default:throw Error(o(468,u))}y[vt]=n,pt(y),u=y}n.stateNode=u}else cm(p,n.type,n.stateNode);else n.stateNode=lm(p,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?cm(p,n.type,n.stateNode):lm(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Pu(n,n.memoizedProps,r.memoizedProps)}break;case 27:Pt(s,n),qt(n),u&512&&(ut||r===null||Cn(r,r.return)),r!==null&&u&4&&Pu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Pt(s,n),qt(n),u&512&&(ut||r===null||Cn(r,r.return)),n.flags&32){p=n.stateNode;try{ls(p,"")}catch(ee){He(n,n.return,ee)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,Pu(n,p,r!==null?r.memoizedProps:p)),u&1024&&(Hu=!0);break;case 6:if(Pt(s,n),qt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(ee){He(n,n.return,ee)}}break;case 3:if(Ta=null,p=gn,gn=Ea(s.containerInfo),Pt(s,n),gn=p,qt(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Bs(s.containerInfo)}catch(ee){He(n,n.return,ee)}Hu&&(Hu=!1,cp(n));break;case 4:u=gn,gn=Ea(n.stateNode.containerInfo),Pt(s,n),qt(n),gn=u;break;case 12:Pt(s,n),qt(n);break;case 31:Pt(s,n),qt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 13:Pt(s,n),qt(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ua=Ct()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 22:p=n.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,L=Gn,V=ut;if(Gn=L||p,ut=V||C,Pt(s,n),ut=V,Gn=L,qt(n),u&8192)e:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||C||Gn||ut||Fi(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){C=r=s;try{if(y=C.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=C.stateNode;var F=C.memoizedProps.style,O=F!=null&&F.hasOwnProperty("display")?F.display:null;b.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(ee){He(C,C.return,ee)}}}else if(s.tag===6){if(r===null){C=s;try{C.stateNode.nodeValue=p?"":C.memoizedProps}catch(ee){He(C,C.return,ee)}}}else if(s.tag===18){if(r===null){C=s;try{var P=C.stateNode;p?Zp(P,!0):Zp(C.stateNode,!1)}catch(ee){He(C,C.return,ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,aa(n,r))));break;case 19:Pt(s,n),qt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,aa(n,u)));break;case 30:break;case 21:break;default:Pt(s,n),qt(n)}}function qt(n){var s=n.flags;if(s&2){try{for(var r,u=n.return;u!==null;){if(tp(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,y=qu(n);ra(n,y,p);break;case 5:var E=r.stateNode;r.flags&32&&(ls(E,""),r.flags&=-33);var b=qu(n);ra(n,b,E);break;case 3:case 4:var C=r.stateNode.containerInfo,L=qu(n);Bu(n,L,C);break;default:throw Error(o(161))}}catch(V){He(n,n.return,V)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function cp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;cp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function zn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sp(n,s.alternate,s),s=s.sibling}function Fi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:di(4,s,s.return),Fi(s);break;case 1:Cn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Zh(s,s.return,r),Fi(s);break;case 27:Jo(s.stateNode);case 26:case 5:Cn(s,s.return),Fi(s);break;case 22:s.memoizedState===null&&Fi(s);break;case 30:Fi(s);break;default:Fi(s)}n=n.sibling}}function $n(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,y=s,E=y.flags;switch(y.tag){case 0:case 11:case 15:$n(p,y,r),Oo(4,y);break;case 1:if($n(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(L){He(u,u.return,L)}if(u=y,p=u.updateQueue,p!==null){var b=u.stateNode;try{var C=p.shared.hiddenCallbacks;if(C!==null)for(p.shared.hiddenCallbacks=null,p=0;p<C.length;p++)Gf(C[p],b)}catch(L){He(u,u.return,L)}}r&&E&64&&Qh(y),Po(y,y.return);break;case 27:np(y);case 26:case 5:$n(p,y,r),r&&u===null&&E&4&&ep(y),Po(y,y.return);break;case 12:$n(p,y,r);break;case 31:$n(p,y,r),r&&E&4&&ap(p,y);break;case 13:$n(p,y,r),r&&E&4&&lp(p,y);break;case 22:y.memoizedState===null&&$n(p,y,r),Po(y,y.return);break;case 30:break;default:$n(p,y,r)}s=s.sibling}}function Gu(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&To(r))}function Vu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&To(n))}function yn(n,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dp(n,s,r,u),s=s.sibling}function dp(n,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:yn(n,s,r,u),p&2048&&Oo(9,s);break;case 1:yn(n,s,r,u);break;case 3:yn(n,s,r,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&To(n)));break;case 12:if(p&2048){yn(n,s,r,u),n=s.stateNode;try{var y=s.memoizedProps,E=y.id,b=y.onPostCommit;typeof b=="function"&&b(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){He(s,s.return,C)}}else yn(n,s,r,u);break;case 31:yn(n,s,r,u);break;case 13:yn(n,s,r,u);break;case 23:break;case 22:y=s.stateNode,E=s.alternate,s.memoizedState!==null?y._visibility&2?yn(n,s,r,u):qo(n,s):y._visibility&2?yn(n,s,r,u):(y._visibility|=2,Rs(n,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Gu(E,s);break;case 24:yn(n,s,r,u),p&2048&&Vu(s.alternate,s);break;default:yn(n,s,r,u)}}function Rs(n,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,E=s,b=r,C=u,L=E.flags;switch(E.tag){case 0:case 11:case 15:Rs(y,E,b,C,p),Oo(8,E);break;case 23:break;case 22:var V=E.stateNode;E.memoizedState!==null?V._visibility&2?Rs(y,E,b,C,p):qo(y,E):(V._visibility|=2,Rs(y,E,b,C,p)),p&&L&2048&&Gu(E.alternate,E);break;case 24:Rs(y,E,b,C,p),p&&L&2048&&Vu(E.alternate,E);break;default:Rs(y,E,b,C,p)}s=s.sibling}}function qo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,u=s,p=u.flags;switch(u.tag){case 22:qo(r,u),p&2048&&Gu(u.alternate,u);break;case 24:qo(r,u),p&2048&&Vu(u.alternate,u);break;default:qo(r,u)}s=s.sibling}}var Bo=8192;function Ns(n,s,r){if(n.subtreeFlags&Bo)for(n=n.child;n!==null;)fp(n,s,r),n=n.sibling}function fp(n,s,r){switch(n.tag){case 26:Ns(n,s,r),n.flags&Bo&&n.memoizedState!==null&&iS(r,gn,n.memoizedState,n.memoizedProps);break;case 5:Ns(n,s,r);break;case 3:case 4:var u=gn;gn=Ea(n.stateNode.containerInfo),Ns(n,s,r),gn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Bo,Bo=16777216,Ns(n,s,r),Bo=u):Ns(n,s,r));break;default:Ns(n,s,r)}}function hp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ho(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];mt=u,mp(u,n)}hp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)pp(n),n=n.sibling}function pp(n){switch(n.tag){case 0:case 11:case 15:Ho(n),n.flags&2048&&di(9,n,n.return);break;case 3:Ho(n);break;case 12:Ho(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,la(n)):Ho(n);break;default:Ho(n)}}function la(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];mt=u,mp(u,n)}hp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:di(8,s,s.return),la(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,la(s));break;default:la(s)}n=n.sibling}}function mp(n,s){for(;mt!==null;){var r=mt;switch(r.tag){case 0:case 11:case 15:di(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:To(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,mt=u;else e:for(r=n;mt!==null;){u=mt;var p=u.sibling,y=u.return;if(op(u),u===r){mt=null;break e}if(p!==null){p.return=y,mt=p;break e}mt=y}}}var v_={getCacheForType:function(n){var s=St(rt),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r},cacheSignal:function(){return St(rt).controller.signal}},__=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Fe=null,we=null,Ae=0,Be=0,Yt=null,fi=!1,Is=!1,zu=!1,Fn=0,tt=0,hi=0,Ji=0,$u=0,Kt=0,Ms=0,Go=null,Bt=null,Fu=!1,ua=0,gp=0,ca=1/0,da=null,pi=null,ft=0,mi=null,ks=null,Jn=0,Ju=0,Yu=null,yp=null,Vo=0,Ku=null;function jt(){return(Oe&2)!==0&&Ae!==0?Ae&-Ae:B.T!==null?ec():kd()}function vp(){if(Kt===0)if((Ae&536870912)===0||Ne){var n=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Kt=n}else Kt=536870912;return n=Ft.current,n!==null&&(n.flags|=32),Kt}function Ht(n,s,r){(n===Fe&&(Be===2||Be===9)||n.cancelPendingCommit!==null)&&(Ds(n,0),gi(n,Ae,Kt,!1)),lo(n,r),((Oe&2)===0||n!==Fe)&&(n===Fe&&((Oe&2)===0&&(Ji|=r),tt===4&&gi(n,Ae,Kt,!1)),An(n))}function _p(n,s,r){if((Oe&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&n.expiredLanes)===0||ao(n,s),p=u?w_(n,s):Xu(n,s,!0),y=u;do{if(p===0){Is&&!u&&gi(n,s,0,!1);break}else{if(r=n.current.alternate,y&&!S_(r)){p=Xu(n,s,!1),y=!1;continue}if(p===2){if(y=s,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var b=n;p=Go;var C=b.current.memoizedState.isDehydrated;if(C&&(Ds(b,E).flags|=256),E=Xu(b,E,!1),E!==2){if(zu&&!C){b.errorRecoveryDisabledLanes|=y,Ji|=y,p=4;break e}y=Bt,Bt=p,y!==null&&(Bt===null?Bt=y:Bt.push.apply(Bt,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){Ds(n,0),gi(n,s,0,!0);break}e:{switch(u=n,y=p,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:gi(u,s,Kt,!fi);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(p=ua+300-Ct(),10<p)){if(gi(u,s,Kt,!fi),Er(u,0,!0)!==0)break e;Jn=s,u.timeoutHandle=Xp(Sp.bind(null,u,r,Bt,da,Fu,s,Kt,Ji,Ms,fi,y,"Throttled",-0,0),p);break e}Sp(u,r,Bt,da,Fu,s,Kt,Ji,Ms,fi,y,null,-0,0)}}break}while(!0);An(n)}function Sp(n,s,r,u,p,y,E,b,C,L,V,F,O,P){if(n.timeoutHandle=-1,F=s.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},fp(s,y,F);var ee=(y&62914560)===y?ua-Ct():(y&4194048)===y?gp-Ct():0;if(ee=sS(F,ee),ee!==null){Jn=y,n.cancelPendingCommit=ee(Rp.bind(null,n,s,y,r,u,p,E,b,C,V,F,null,O,P)),gi(n,y,E,!L);return}}Rp(n,s,y,r,u,p,E,b,C)}function S_(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!zt(y(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gi(n,s,r,u){s&=~$u,s&=~Ji,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var y=31-Vt(p),E=1<<y;u[y]=-1,p&=~E}r!==0&&Nd(n,r,s)}function fa(){return(Oe&6)===0?(zo(0),!1):!0}function ju(){if(we!==null){if(Be===0)var n=we.return;else n=we,Ln=Pi=null,du(n),Ts=null,xo=0,n=we;for(;n!==null;)Wh(n.alternate,n),n=n.return;we=null}}function Ds(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,H_(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Jn=0,ju(),Fe=n,we=r=Dn(n.current,null),Ae=s,Be=0,Yt=null,fi=!1,Is=ao(n,s),zu=!1,Ms=Kt=$u=Ji=hi=tt=0,Bt=Go=null,Fu=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-Vt(u),y=1<<p;s|=n[p],u&=~y}return Fn=s,Dr(),r}function Ep(n,s){me=null,B.H=Do,s===ws||s===Gr?(s=Pf(),Be=3):s===Zl?(s=Pf(),Be=4):Be=s===Au?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yt=s,we===null&&(tt=1,ta(n,sn(s,n.current)))}function wp(){var n=Ft.current;return n===null?!0:(Ae&4194048)===Ae?ln===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?n===ln:!1}function Tp(){var n=B.H;return B.H=Do,n===null?Do:n}function bp(){var n=B.A;return B.A=v_,n}function ha(){tt=4,fi||(Ae&4194048)!==Ae&&Ft.current!==null||(Is=!0),(hi&134217727)===0&&(Ji&134217727)===0||Fe===null||gi(Fe,Ae,Kt,!1)}function Xu(n,s,r){var u=Oe;Oe|=2;var p=Tp(),y=bp();(Fe!==n||Ae!==s)&&(da=null,Ds(n,s)),s=!1;var E=tt;e:do try{if(Be!==0&&we!==null){var b=we,C=Yt;switch(Be){case 8:ju(),E=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(s=!0);var L=Be;if(Be=0,Yt=null,Us(n,b,C,L),r&&Is){E=0;break e}break;default:L=Be,Be=0,Yt=null,Us(n,b,C,L)}}E_(),E=tt;break}catch(V){Ep(n,V)}while(!0);return s&&n.shellSuspendCounter++,Ln=Pi=null,Oe=u,B.H=p,B.A=y,we===null&&(Fe=null,Ae=0,Dr()),E}function E_(){for(;we!==null;)xp(we)}function w_(n,s){var r=Oe;Oe|=2;var u=Tp(),p=bp();Fe!==n||Ae!==s?(da=null,ca=Ct()+500,Ds(n,s)):Is=ao(n,s);e:do try{if(Be!==0&&we!==null){s=we;var y=Yt;t:switch(Be){case 1:Be=0,Yt=null,Us(n,s,y,1);break;case 2:case 9:if(Lf(y)){Be=0,Yt=null,Cp(s);break}s=function(){Be!==2&&Be!==9||Fe!==n||(Be=7),An(n)},y.then(s,s);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:Lf(y)?(Be=0,Yt=null,Cp(s)):(Be=0,Yt=null,Us(n,s,y,7));break;case 5:var E=null;switch(we.tag){case 26:E=we.memoizedState;case 5:case 27:var b=we;if(E?dm(E):b.stateNode.complete){Be=0,Yt=null;var C=b.sibling;if(C!==null)we=C;else{var L=b.return;L!==null?(we=L,pa(L)):we=null}break t}}Be=0,Yt=null,Us(n,s,y,5);break;case 6:Be=0,Yt=null,Us(n,s,y,6);break;case 8:ju(),tt=6;break e;default:throw Error(o(462))}}T_();break}catch(V){Ep(n,V)}while(!0);return Ln=Pi=null,B.H=u,B.A=p,Oe=r,we!==null?0:(Fe=null,Ae=0,Dr(),tt)}function T_(){for(;we!==null&&!pr();)xp(we)}function xp(n){var s=jh(n.alternate,n,Fn);n.memoizedProps=n.pendingProps,s===null?pa(n):we=s}function Cp(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=zh(r,s,s.pendingProps,s.type,void 0,Ae);break;case 11:s=zh(r,s,s.pendingProps,s.type.render,s.ref,Ae);break;case 5:du(s);default:Wh(r,s),s=we=bf(s,Fn),s=jh(r,s,Fn)}n.memoizedProps=n.pendingProps,s===null?pa(n):we=s}function Us(n,s,r,u){Ln=Pi=null,du(s),Ts=null,xo=0;var p=s.return;try{if(d_(n,p,s,r,Ae)){tt=1,ta(n,sn(r,n.current)),we=null;return}}catch(y){if(p!==null)throw we=p,y;tt=1,ta(n,sn(r,n.current)),we=null;return}s.flags&32768?(Ne||u===1?n=!0:Is||(Ae&536870912)!==0?n=!1:(fi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ft.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ap(s,n)):pa(s)}function pa(n){var s=n;do{if((s.flags&32768)!==0){Ap(s,fi);return}n=s.return;var r=p_(s.alternate,s,Fn);if(r!==null){we=r;return}if(s=s.sibling,s!==null){we=s;return}we=s=n}while(s!==null);tt===0&&(tt=5)}function Ap(n,s){do{var r=m_(n.alternate,n);if(r!==null){r.flags&=32767,we=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){we=n;return}we=n=r}while(n!==null);tt=6,we=null}function Rp(n,s,r,u,p,y,E,b,C){n.cancelPendingCommit=null;do ma();while(ft!==0);if((Oe&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=ql,nv(n,r,y,E,b,C),n===Fe&&(we=Fe=null,Ae=0),ks=s,mi=n,Jn=r,Ju=y,Yu=p,yp=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,A_(pn,function(){return Dp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,p=j.p,j.p=2,E=Oe,Oe|=4;try{g_(n,s,r)}finally{Oe=E,j.p=p,B.T=u}}ft=1,Np(),Ip(),Mp()}}function Np(){if(ft===1){ft=0;var n=mi,s=ks,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var u=j.p;j.p=2;var p=Oe;Oe|=4;try{up(s,n);var y=lc,E=mf(n.containerInfo),b=y.focusedElem,C=y.selectionRange;if(E!==b&&b&&b.ownerDocument&&pf(b.ownerDocument.documentElement,b)){if(C!==null&&Dl(b)){var L=C.start,V=C.end;if(V===void 0&&(V=L),"selectionStart"in b)b.selectionStart=L,b.selectionEnd=Math.min(V,b.value.length);else{var F=b.ownerDocument||document,O=F&&F.defaultView||window;if(O.getSelection){var P=O.getSelection(),ee=b.textContent.length,re=Math.min(C.start,ee),$e=C.end===void 0?re:Math.min(C.end,ee);!P.extend&&re>$e&&(E=$e,$e=re,re=E);var k=hf(b,re),N=hf(b,$e);if(k&&N&&(P.rangeCount!==1||P.anchorNode!==k.node||P.anchorOffset!==k.offset||P.focusNode!==N.node||P.focusOffset!==N.offset)){var U=F.createRange();U.setStart(k.node,k.offset),P.removeAllRanges(),re>$e?(P.addRange(U),P.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),P.addRange(U))}}}}for(F=[],P=b;P=P.parentNode;)P.nodeType===1&&F.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<F.length;b++){var $=F[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Aa=!!ac,lc=ac=null}finally{Oe=p,j.p=u,B.T=r}}n.current=s,ft=2}}function Ip(){if(ft===2){ft=0;var n=mi,s=ks,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var u=j.p;j.p=2;var p=Oe;Oe|=4;try{sp(n,s.alternate,s)}finally{Oe=p,j.p=u,B.T=r}}ft=3}}function Mp(){if(ft===4||ft===3){ft=0,mr();var n=mi,s=ks,r=Jn,u=yp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ft=5:(ft=0,ks=mi=null,kp(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(pi=null),pl(r),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ro,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=B.T,p=j.p,j.p=2,B.T=null;try{for(var y=n.onRecoverableError,E=0;E<u.length;E++){var b=u[E];y(b.value,{componentStack:b.stack})}}finally{B.T=s,j.p=p}}(Jn&3)!==0&&ma(),An(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===Ku?Vo++:(Vo=0,Ku=n):Vo=0,zo(0)}}function kp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,To(s)))}function ma(){return Np(),Ip(),Mp(),Dp()}function Dp(){if(ft!==5)return!1;var n=mi,s=Ju;Ju=0;var r=pl(Jn),u=B.T,p=j.p;try{j.p=32>r?32:r,B.T=null,r=Yu,Yu=null;var y=mi,E=Jn;if(ft=0,ks=mi=null,Jn=0,(Oe&6)!==0)throw Error(o(331));var b=Oe;if(Oe|=4,pp(y.current),dp(y,y.current,E,r),Oe=b,zo(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ro,y)}catch{}return!0}finally{j.p=p,B.T=u,kp(n,s)}}function Up(n,s,r){s=sn(r,s),s=Cu(n.stateNode,s,2),n=li(n,s,2),n!==null&&(lo(n,2),An(n))}function He(n,s,r){if(n.tag===3)Up(n,n,r);else for(;s!==null;){if(s.tag===3){Up(s,n,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(pi===null||!pi.has(u))){n=sn(r,n),r=Lh(2),u=li(s,r,2),u!==null&&(Oh(r,u,s,n),lo(u,2),An(u));break}}s=s.return}}function Wu(n,s,r){var u=n.pingCache;if(u===null){u=n.pingCache=new __;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||(zu=!0,p.add(r),n=b_.bind(null,n,s,r),s.then(n,n))}function b_(n,s,r){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Fe===n&&(Ae&r)===r&&(tt===4||tt===3&&(Ae&62914560)===Ae&&300>Ct()-ua?(Oe&2)===0&&Ds(n,0):$u|=r,Ms===Ae&&(Ms=0)),An(n)}function Lp(n,s){s===0&&(s=Rd()),n=Ui(n,s),n!==null&&(lo(n,s),An(n))}function x_(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),Lp(n,r)}function C_(n,s){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Lp(n,r)}function A_(n,s){return Nn(n,s)}var ga=null,Ls=null,Qu=!1,ya=!1,Zu=!1,yi=0;function An(n){n!==Ls&&n.next===null&&(Ls===null?ga=Ls=n:Ls=Ls.next=n),ya=!0,Qu||(Qu=!0,N_())}function zo(n,s){if(!Zu&&ya){Zu=!0;do for(var r=!1,u=ga;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var E=u.suspendedLanes,b=u.pingedLanes;y=(1<<31-Vt(42|n)+1)-1,y&=p&~(E&~b),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Bp(u,y))}else y=Ae,y=Er(u,u===Fe?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||ao(u,y)||(r=!0,Bp(u,y));u=u.next}while(r);Zu=!1}}function R_(){Op()}function Op(){ya=Qu=!1;var n=0;yi!==0&&B_()&&(n=yi);for(var s=Ct(),r=null,u=ga;u!==null;){var p=u.next,y=Pp(u,s);y===0?(u.next=null,r===null?ga=p:r.next=p,p===null&&(Ls=r)):(r=u,(n!==0||(y&3)!==0)&&(ya=!0)),u=p}ft!==0&&ft!==5||zo(n),yi!==0&&(yi=0)}function Pp(n,s){for(var r=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Vt(y),b=1<<E,C=p[E];C===-1?((b&r)===0||(b&u)!==0)&&(p[E]=tv(b,s)):C<=s&&(n.expiredLanes|=b),y&=~b}if(s=Fe,r=Ae,r=Er(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===s&&(Be===2||Be===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ts(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||ao(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(u!==null&&ts(u),pl(r)){case 2:case 8:r=Nt;break;case 32:r=pn;break;case 268435456:r=gr;break;default:r=pn}return u=qp.bind(null,n),r=Nn(r,u),n.callbackPriority=s,n.callbackNode=r,s}return u!==null&&u!==null&&ts(u),n.callbackPriority=2,n.callbackNode=null,2}function qp(n,s){if(ft!==0&&ft!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(ma()&&n.callbackNode!==r)return null;var u=Ae;return u=Er(n,n===Fe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(_p(n,u,s),Pp(n,Ct()),n.callbackNode!=null&&n.callbackNode===r?qp.bind(null,n):null)}function Bp(n,s){if(ma())return null;_p(n,s,!0)}function N_(){G_(function(){(Oe&6)!==0?Nn(_e,R_):Op()})}function ec(){if(yi===0){var n=Ss;n===0&&(n=vr,vr<<=1,(vr&261888)===0&&(vr=256)),yi=n}return yi}function Hp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xr(""+n)}function Gp(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function I_(n,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var y=Hp((p[Ut]||null).action),E=u.submitter;E&&(s=(s=E[Ut]||null)?Hp(s.formAction):E.getAttribute("formAction"),s!==null&&(y=s,E=null));var b=new Nr("action","action",null,u,p);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(yi!==0){var C=E?Gp(p,E):new FormData(p);Su(r,{pending:!0,data:C,method:p.method,action:y},null,C)}}else typeof y=="function"&&(b.preventDefault(),C=E?Gp(p,E):new FormData(p),Su(r,{pending:!0,data:C,method:p.method,action:y},y,C))},currentTarget:p}]})}}for(var tc=0;tc<Pl.length;tc++){var nc=Pl[tc],M_=nc.toLowerCase(),k_=nc[0].toUpperCase()+nc.slice(1);mn(M_,"on"+k_)}mn(vf,"onAnimationEnd"),mn(_f,"onAnimationIteration"),mn(Sf,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(Kv,"onTransitionRun"),mn(jv,"onTransitionStart"),mn(Xv,"onTransitionCancel"),mn(Ef,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function Vp(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var E=u.length-1;0<=E;E--){var b=u[E],C=b.instance,L=b.currentTarget;if(b=b.listener,C!==y&&p.isPropagationStopped())break e;y=b,p.currentTarget=L;try{y(p)}catch(V){kr(V)}p.currentTarget=null,y=C}else for(E=0;E<u.length;E++){if(b=u[E],C=b.instance,L=b.currentTarget,b=b.listener,C!==y&&p.isPropagationStopped())break e;y=b,p.currentTarget=L;try{y(p)}catch(V){kr(V)}p.currentTarget=null,y=C}}}}function Te(n,s){var r=s[ml];r===void 0&&(r=s[ml]=new Set);var u=n+"__bubble";r.has(u)||(zp(s,n,2,!1),r.add(u))}function ic(n,s,r){var u=0;s&&(u|=4),zp(r,n,u,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function sc(n){if(!n[va]){n[va]=!0,Ld.forEach(function(r){r!=="selectionchange"&&(D_.has(r)||ic(r,!1,n),ic(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[va]||(s[va]=!0,ic("selectionchange",!1,s))}}function zp(n,s,r,u){switch(vm(s)){case 2:var p=aS;break;case 8:p=lS;break;default:p=_c}r=p.bind(null,s,r,n),p=void 0,!bl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,r,{capture:!0,passive:p}):n.addEventListener(s,r,!0):p!==void 0?n.addEventListener(s,r,{passive:p}):n.addEventListener(s,r,!1)}function oc(n,s,r,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===p)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;b!==null;){if(E=is(b),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=y=E;continue e}b=b.parentNode}}u=u.return}Yd(function(){var L=y,V=wl(r),F=[];e:{var O=wf.get(n);if(O!==void 0){var P=Nr,ee=n;switch(n){case"keypress":if(Ar(r)===0)break e;case"keydown":case"keyup":P=Cv;break;case"focusin":ee="focus",P=Rl;break;case"focusout":ee="blur",P=Rl;break;case"beforeblur":case"afterblur":P=Rl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=pv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Nv;break;case vf:case _f:case Sf:P=yv;break;case Ef:P=Mv;break;case"scroll":case"scrollend":P=fv;break;case"wheel":P=Dv;break;case"copy":case"cut":case"paste":P=_v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Qd;break;case"toggle":case"beforetoggle":P=Lv}var re=(s&4)!==0,$e=!re&&(n==="scroll"||n==="scrollend"),k=re?O!==null?O+"Capture":null:O;re=[];for(var N=L,U;N!==null;){var $=N;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||k===null||($=fo(N,k),$!=null&&re.push(Fo(N,$,U))),$e)break;N=N.return}0<re.length&&(O=new P(O,ee,null,r,V),F.push({event:O,listeners:re}))}}if((s&7)===0){e:{if(O=n==="mouseover"||n==="pointerover",P=n==="mouseout"||n==="pointerout",O&&r!==El&&(ee=r.relatedTarget||r.fromElement)&&(is(ee)||ee[ns]))break e;if((P||O)&&(O=V.window===V?V:(O=V.ownerDocument)?O.defaultView||O.parentWindow:window,P?(ee=r.relatedTarget||r.toElement,P=L,ee=ee?is(ee):null,ee!==null&&($e=l(ee),re=ee.tag,ee!==$e||re!==5&&re!==27&&re!==6)&&(ee=null)):(P=null,ee=L),P!==ee)){if(re=Xd,$="onMouseLeave",k="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(re=Qd,$="onPointerLeave",k="onPointerEnter",N="pointer"),$e=P==null?O:co(P),U=ee==null?O:co(ee),O=new re($,N+"leave",P,r,V),O.target=$e,O.relatedTarget=U,$=null,is(V)===L&&(re=new re(k,N+"enter",ee,r,V),re.target=U,re.relatedTarget=$e,$=re),$e=$,P&&ee)t:{for(re=U_,k=P,N=ee,U=0,$=k;$;$=re($))U++;$=0;for(var oe=N;oe;oe=re(oe))$++;for(;0<U-$;)k=re(k),U--;for(;0<$-U;)N=re(N),$--;for(;U--;){if(k===N||N!==null&&k===N.alternate){re=k;break t}k=re(k),N=re(N)}re=null}else re=null;P!==null&&$p(F,O,P,re,!1),ee!==null&&$e!==null&&$p(F,$e,ee,re,!0)}}e:{if(O=L?co(L):window,P=O.nodeName&&O.nodeName.toLowerCase(),P==="select"||P==="input"&&O.type==="file")var De=af;else if(of(O))if(lf)De=Fv;else{De=zv;var ne=Vv}else P=O.nodeName,!P||P.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?L&&Sl(L.elementType)&&(De=af):De=$v;if(De&&(De=De(n,L))){rf(F,De,r,V);break e}ne&&ne(n,O,L),n==="focusout"&&L&&O.type==="number"&&L.memoizedProps.value!=null&&_l(O,"number",O.value)}switch(ne=L?co(L):window,n){case"focusin":(of(ne)||ne.contentEditable==="true")&&(fs=ne,Ul=L,So=null);break;case"focusout":So=Ul=fs=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,gf(F,r,V);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":gf(F,r,V)}var ge;if(Il)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ds?nf(n,r)&&(Re="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(Zd&&r.locale!=="ko"&&(ds||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ds&&(ge=Kd()):(ti=V,xl="value"in ti?ti.value:ti.textContent,ds=!0)),ne=_a(L,Re),0<ne.length&&(Re=new Wd(Re,n,null,r,V),F.push({event:Re,listeners:ne}),ge?Re.data=ge:(ge=sf(r),ge!==null&&(Re.data=ge)))),(ge=Pv?qv(n,r):Bv(n,r))&&(Re=_a(L,"onBeforeInput"),0<Re.length&&(ne=new Wd("onBeforeInput","beforeinput",null,r,V),F.push({event:ne,listeners:Re}),ne.data=ge)),I_(F,n,L,r,V)}Vp(F,s)})}function Fo(n,s,r){return{instance:n,listener:s,currentTarget:r}}function _a(n,s){for(var r=s+"Capture",u=[];n!==null;){var p=n,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=fo(n,r),p!=null&&u.unshift(Fo(n,p,y)),p=fo(n,s),p!=null&&u.push(Fo(n,p,y))),n.tag===3)return u;n=n.return}return[]}function U_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $p(n,s,r,u,p){for(var y=s._reactName,E=[];r!==null&&r!==u;){var b=r,C=b.alternate,L=b.stateNode;if(b=b.tag,C!==null&&C===u)break;b!==5&&b!==26&&b!==27||L===null||(C=L,p?(L=fo(r,y),L!=null&&E.unshift(Fo(r,L,C))):p||(L=fo(r,y),L!=null&&E.push(Fo(r,L,C)))),r=r.return}E.length!==0&&n.push({event:s,listeners:E})}var L_=/\r\n?/g,O_=/\u0000|\uFFFD/g;function Fp(n){return(typeof n=="string"?n:""+n).replace(L_,`
`).replace(O_,"")}function Jp(n,s){return s=Fp(s),Fp(n)===s}function ze(n,s,r,u,p,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ls(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ls(n,""+u);break;case"className":Tr(n,"class",u);break;case"tabIndex":Tr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(n,r,u);break;case"style":Fd(n,u,y);break;case"data":if(s!=="object"){Tr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=xr(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&ze(n,s,"name",p.name,p,null),ze(n,s,"formEncType",p.formEncType,p,null),ze(n,s,"formMethod",p.formMethod,p,null),ze(n,s,"formTarget",p.formTarget,p,null)):(ze(n,s,"encType",p.encType,p,null),ze(n,s,"method",p.method,p,null),ze(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=xr(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=Mn);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=xr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Te("beforetoggle",n),Te("toggle",n),wr(n,"popover",u);break;case"xlinkActuate":In(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":In(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":In(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":In(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":In(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":In(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":In(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":In(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":In(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=cv.get(r)||r,wr(n,r,u))}}function rc(n,s,r,u,p,y){switch(r){case"style":Fd(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"children":typeof u=="string"?ls(n,u):(typeof u=="number"||typeof u=="bigint")&&ls(n,""+u);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Od.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),y=n[Ut]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,u,p);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):wr(n,r,u)}}}function wt(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var E=r[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ze(n,s,y,E,r,null)}}p&&ze(n,s,"srcSet",r.srcSet,r,null),u&&ze(n,s,"src",r.src,r,null);return;case"input":Te("invalid",n);var b=y=E=p=null,C=null,L=null;for(u in r)if(r.hasOwnProperty(u)){var V=r[u];if(V!=null)switch(u){case"name":p=V;break;case"type":E=V;break;case"checked":C=V;break;case"defaultChecked":L=V;break;case"value":y=V;break;case"defaultValue":b=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,s));break;default:ze(n,s,u,V,r,null)}}Gd(n,y,b,C,L,E,p,!1);return;case"select":Te("invalid",n),u=E=y=null;for(p in r)if(r.hasOwnProperty(p)&&(b=r[p],b!=null))switch(p){case"value":y=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:ze(n,s,p,b,r,null)}s=y,r=E,n.multiple=!!u,s!=null?as(n,!!u,s,!1):r!=null&&as(n,!!u,r,!0);return;case"textarea":Te("invalid",n),y=p=u=null;for(E in r)if(r.hasOwnProperty(E)&&(b=r[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":p=b;break;case"children":y=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:ze(n,s,E,b,r,null)}zd(n,u,p,y);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(u=r[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ze(n,s,C,u,r,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(u=0;u<$o.length;u++)Te($o[u],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(u=r[L],u!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ze(n,s,L,u,r,null)}return;default:if(Sl(s)){for(V in r)r.hasOwnProperty(V)&&(u=r[V],u!==void 0&&rc(n,s,V,u,r,void 0));return}}for(b in r)r.hasOwnProperty(b)&&(u=r[b],u!=null&&ze(n,s,b,u,r,null))}function P_(n,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,b=null,C=null,L=null,V=null;for(P in r){var F=r[P];if(r.hasOwnProperty(P)&&F!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":C=F;default:u.hasOwnProperty(P)||ze(n,s,P,null,u,F)}}for(var O in u){var P=u[O];if(F=r[O],u.hasOwnProperty(O)&&(P!=null||F!=null))switch(O){case"type":y=P;break;case"name":p=P;break;case"checked":L=P;break;case"defaultChecked":V=P;break;case"value":E=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,s));break;default:P!==F&&ze(n,s,O,P,u,F)}}vl(n,E,b,C,L,V,y,p);return;case"select":P=E=b=O=null;for(y in r)if(C=r[y],r.hasOwnProperty(y)&&C!=null)switch(y){case"value":break;case"multiple":P=C;default:u.hasOwnProperty(y)||ze(n,s,y,null,u,C)}for(p in u)if(y=u[p],C=r[p],u.hasOwnProperty(p)&&(y!=null||C!=null))switch(p){case"value":O=y;break;case"defaultValue":b=y;break;case"multiple":E=y;default:y!==C&&ze(n,s,p,y,u,C)}s=b,r=E,u=P,O!=null?as(n,!!r,O,!1):!!u!=!!r&&(s!=null?as(n,!!r,s,!0):as(n,!!r,r?[]:"",!1));return;case"textarea":P=O=null;for(b in r)if(p=r[b],r.hasOwnProperty(b)&&p!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ze(n,s,b,null,u,p)}for(E in u)if(p=u[E],y=r[E],u.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":O=p;break;case"defaultValue":P=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==y&&ze(n,s,E,p,u,y)}Vd(n,O,P);return;case"option":for(var ee in r)if(O=r[ee],r.hasOwnProperty(ee)&&O!=null&&!u.hasOwnProperty(ee))switch(ee){case"selected":n.selected=!1;break;default:ze(n,s,ee,null,u,O)}for(C in u)if(O=u[C],P=r[C],u.hasOwnProperty(C)&&O!==P&&(O!=null||P!=null))switch(C){case"selected":n.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:ze(n,s,C,O,u,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in r)O=r[re],r.hasOwnProperty(re)&&O!=null&&!u.hasOwnProperty(re)&&ze(n,s,re,null,u,O);for(L in u)if(O=u[L],P=r[L],u.hasOwnProperty(L)&&O!==P&&(O!=null||P!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(o(137,s));break;default:ze(n,s,L,O,u,P)}return;default:if(Sl(s)){for(var $e in r)O=r[$e],r.hasOwnProperty($e)&&O!==void 0&&!u.hasOwnProperty($e)&&rc(n,s,$e,void 0,u,O);for(V in u)O=u[V],P=r[V],!u.hasOwnProperty(V)||O===P||O===void 0&&P===void 0||rc(n,s,V,O,u,P);return}}for(var k in r)O=r[k],r.hasOwnProperty(k)&&O!=null&&!u.hasOwnProperty(k)&&ze(n,s,k,null,u,O);for(F in u)O=u[F],P=r[F],!u.hasOwnProperty(F)||O===P||O==null&&P==null||ze(n,s,F,O,u,P)}function Yp(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,E=p.initiatorType,b=p.duration;if(y&&b&&Yp(E)){for(E=0,b=p.responseEnd,u+=1;u<r.length;u++){var C=r[u],L=C.startTime;if(L>b)break;var V=C.transferSize,F=C.initiatorType;V&&Yp(F)&&(C=C.responseEnd,E+=V*(C<b?1:(b-L)/(C-L)))}if(--u,s+=8*(y+E)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ac=null,lc=null;function Sa(n){return n.nodeType===9?n:n.ownerDocument}function Kp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jp(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function uc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cc=null;function B_(){var n=window.event;return n&&n.type==="popstate"?n===cc?!1:(cc=n,!0):(cc=null,!1)}var Xp=typeof setTimeout=="function"?setTimeout:void 0,H_=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,G_=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(V_)}:Xp;function V_(n){setTimeout(function(){throw n})}function vi(n){return n==="head"}function Qp(n,s){var r=s,u=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(p),Bs(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Jo(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Jo(r);for(var y=r.firstChild;y;){var E=y.nextSibling,b=y.nodeName;y[uo]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=E}}else r==="body"&&Jo(n.ownerDocument.body);r=p}while(r);Bs(s)}function Zp(n,s){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function dc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":dc(r),gl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function z_(n,s,r,u){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[uo])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=un(n.nextSibling),n===null)break}return null}function $_(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=un(n.nextSibling),n===null))return null;return n}function em(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=un(n.nextSibling),n===null))return null;return n}function fc(n){return n.data==="$?"||n.data==="$~"}function hc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function F_(n,s){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function un(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var pc=null;function tm(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(s===0)return un(n.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}n=n.nextSibling}return null}function nm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return n;s--}else r!=="/$"&&r!=="/&"||s++}n=n.previousSibling}return null}function im(n,s,r){switch(s=Sa(r),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Jo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);gl(n)}var cn=new Map,sm=new Set;function Ea(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yn=j.d;j.d={f:J_,r:Y_,D:K_,C:j_,L:X_,m:W_,X:Z_,S:Q_,M:eS};function J_(){var n=Yn.f(),s=fa();return n||s}function Y_(n){var s=ss(n);s!==null&&s.tag===5&&s.type==="form"?Eh(s):Yn.r(n)}var Os=typeof document>"u"?null:document;function om(n,s,r){var u=Os;if(u&&typeof s=="string"&&s){var p=tn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),sm.has(p)||(sm.add(p),n={rel:n,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),wt(s,"link",n),pt(s),u.head.appendChild(s)))}}function K_(n){Yn.D(n),om("dns-prefetch",n,null)}function j_(n,s){Yn.C(n,s),om("preconnect",n,s)}function X_(n,s,r){Yn.L(n,s,r);var u=Os;if(u&&n&&s){var p='link[rel="preload"][as="'+tn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+tn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+tn(r.imageSizes)+'"]')):p+='[href="'+tn(n)+'"]';var y=p;switch(s){case"style":y=Ps(n);break;case"script":y=qs(n)}cn.has(y)||(n=_({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),cn.set(y,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(Yo(y))||s==="script"&&u.querySelector(Ko(y))||(s=u.createElement("link"),wt(s,"link",n),pt(s),u.head.appendChild(s)))}}function W_(n,s){Yn.m(n,s);var r=Os;if(r&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+tn(u)+'"][href="'+tn(n)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qs(n)}if(!cn.has(y)&&(n=_({rel:"modulepreload",href:n},s),cn.set(y,n),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ko(y)))return}u=r.createElement("link"),wt(u,"link",n),pt(u),r.head.appendChild(u)}}}function Q_(n,s,r){Yn.S(n,s,r);var u=Os;if(u&&n){var p=os(u).hoistableStyles,y=Ps(n);s=s||"default";var E=p.get(y);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(Yo(y)))b.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},r),(r=cn.get(y))&&mc(n,r);var C=E=u.createElement("link");pt(C),wt(C,"link",n),C._p=new Promise(function(L,V){C.onload=L,C.onerror=V}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,wa(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:b},p.set(y,E)}}}function Z_(n,s){Yn.X(n,s);var r=Os;if(r&&n){var u=os(r).hoistableScripts,p=qs(n),y=u.get(p);y||(y=r.querySelector(Ko(p)),y||(n=_({src:n,async:!0},s),(s=cn.get(p))&&gc(n,s),y=r.createElement("script"),pt(y),wt(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function eS(n,s){Yn.M(n,s);var r=Os;if(r&&n){var u=os(r).hoistableScripts,p=qs(n),y=u.get(p);y||(y=r.querySelector(Ko(p)),y||(n=_({src:n,async:!0,type:"module"},s),(s=cn.get(p))&&gc(n,s),y=r.createElement("script"),pt(y),wt(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function rm(n,s,r,u){var p=(p=pe.current)?Ea(p):null;if(!p)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ps(r.href),r=os(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Ps(r.href);var y=os(p).hoistableStyles,E=y.get(n);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=p.querySelector(Yo(n)))&&!y._p&&(E.instance=y,E.state.loading=5),cn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},cn.set(n,r),y||tS(p,n,r,E.state))),s&&u===null)throw Error(o(528,""));return E}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qs(r),r=os(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Ps(n){return'href="'+tn(n)+'"'}function Yo(n){return'link[rel="stylesheet"]['+n+"]"}function am(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function tS(n,s,r,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),wt(s,"link",r),pt(s),n.head.appendChild(s))}function qs(n){return'[src="'+tn(n)+'"]'}function Ko(n){return"script[async]"+n}function lm(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+tn(r.href)+'"]');if(u)return s.instance=u,pt(u),u;var p=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),pt(u),wt(u,"style",p),wa(u,r.precedence,n),s.instance=u;case"stylesheet":p=Ps(r.href);var y=n.querySelector(Yo(p));if(y)return s.state.loading|=4,s.instance=y,pt(y),y;u=am(r),(p=cn.get(p))&&mc(u,p),y=(n.ownerDocument||n).createElement("link"),pt(y);var E=y;return E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),wt(y,"link",u),s.state.loading|=4,wa(y,r.precedence,n),s.instance=y;case"script":return y=qs(r.src),(p=n.querySelector(Ko(y)))?(s.instance=p,pt(p),p):(u=r,(p=cn.get(y))&&(u=_({},r),gc(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),pt(p),wt(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,wa(u,r.precedence,n));return s.instance}function wa(n,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===s)y=b;else if(y!==p)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function mc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function gc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ta=null;function um(n,s,r){if(Ta===null){var u=new Map,p=Ta=new Map;p.set(r,u)}else p=Ta,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var y=r[p];if(!(y[uo]||y[vt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(s)||"";E=n+E;var b=u.get(E);b?b.push(y):u.set(E,[y])}}return u}function cm(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function nS(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function iS(n,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Ps(u.href),y=s.querySelector(Yo(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ba.bind(n),s.then(n,n)),r.state.loading|=4,r.instance=y,pt(y);return}y=s.ownerDocument||s,u=am(u),(p=cn.get(p))&&mc(u,p),y=y.createElement("link"),pt(y);var E=y;E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),wt(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=ba.bind(n),s.addEventListener("load",r),s.addEventListener("error",r))}}var yc=0;function sS(n,s){return n.stylesheets&&n.count===0&&Ca(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&Ca(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&yc===0&&(yc=62500*q_());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ca(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>yc?50:800)+s);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function ba(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ca(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xa=null;function Ca(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xa=new Map,s.forEach(oS,n),xa=null,ba.call(n))}function oS(n,s){if(!(s.state.loading&4)){var r=xa.get(n);if(r)var u=r.get(null);else{r=new Map,xa.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(r.set(E.dataset.precedence,E),u=E)}u&&r.set(null,u)}p=s.instance,E=p.getAttribute("data-precedence"),y=r.get(E)||u,y===u&&r.set(null,p),r.set(E,p),this.count++,u=ba.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var jo={$$typeof:M,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function rS(n,s,r,u,p,y,E,b,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.hiddenUpdates=fl(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function fm(n,s,r,u,p,y,E,b,C,L,V,F){return n=new rS(n,s,r,E,C,L,V,F,b),s=1,y===!0&&(s|=24),y=$t(3,null,null,s),n.current=y,y.stateNode=n,s=Xl(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},eu(y),n}function hm(n){return n?(n=ms,n):ms}function pm(n,s,r,u,p,y){p=hm(p),u.context===null?u.context=p:u.pendingContext=p,u=ai(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=li(n,u,s),r!==null&&(Ht(r,n,s),Ao(r,n,s))}function mm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function vc(n,s){mm(n,s),(n=n.alternate)&&mm(n,s)}function gm(n){if(n.tag===13||n.tag===31){var s=Ui(n,67108864);s!==null&&Ht(s,n,67108864),vc(n,67108864)}}function ym(n){if(n.tag===13||n.tag===31){var s=jt();s=hl(s);var r=Ui(n,s);r!==null&&Ht(r,n,s),vc(n,s)}}var Aa=!0;function aS(n,s,r,u){var p=B.T;B.T=null;var y=j.p;try{j.p=2,_c(n,s,r,u)}finally{j.p=y,B.T=p}}function lS(n,s,r,u){var p=B.T;B.T=null;var y=j.p;try{j.p=8,_c(n,s,r,u)}finally{j.p=y,B.T=p}}function _c(n,s,r,u){if(Aa){var p=Sc(u);if(p===null)oc(n,s,u,Ra,r),_m(n,u);else if(cS(p,n,s,r,u))u.stopPropagation();else if(_m(n,u),s&4&&-1<uS.indexOf(n)){for(;p!==null;){var y=ss(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Ni(y.pendingLanes);if(E!==0){var b=y;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var C=1<<31-Vt(E);b.entanglements[1]|=C,E&=~C}An(y),(Oe&6)===0&&(ca=Ct()+500,zo(0))}}break;case 31:case 13:b=Ui(y,2),b!==null&&Ht(b,y,2),fa(),vc(y,2)}if(y=Sc(u),y===null&&oc(n,s,u,Ra,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else oc(n,s,u,null,r)}}function Sc(n){return n=wl(n),Ec(n)}var Ra=null;function Ec(n){if(Ra=null,n=is(n),n!==null){var s=l(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=c(s),n!==null)return n;n=null}else if(r===31){if(n=h(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ra=n,null}function vm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oo()){case _e:return 2;case Nt:return 8;case pn:case dl:return 32;case gr:return 268435456;default:return 32}default:return 32}}var wc=!1,_i=null,Si=null,Ei=null,Xo=new Map,Wo=new Map,wi=[],uS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _m(n,s){switch(n){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":Xo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(s.pointerId)}}function Qo(n,s,r,u,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=ss(s),s!==null&&gm(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function cS(n,s,r,u,p){switch(s){case"focusin":return _i=Qo(_i,n,s,r,u,p),!0;case"dragenter":return Si=Qo(Si,n,s,r,u,p),!0;case"mouseover":return Ei=Qo(Ei,n,s,r,u,p),!0;case"pointerover":var y=p.pointerId;return Xo.set(y,Qo(Xo.get(y)||null,n,s,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Wo.set(y,Qo(Wo.get(y)||null,n,s,r,u,p)),!0}return!1}function Sm(n){var s=is(n.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){n.blockedOn=s,Dd(n.priority,function(){ym(r)});return}}else if(s===31){if(s=h(r),s!==null){n.blockedOn=s,Dd(n.priority,function(){ym(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Na(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=Sc(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);El=u,r.target.dispatchEvent(u),El=null}else return s=ss(r),s!==null&&gm(s),n.blockedOn=r,!1;s.shift()}return!0}function Em(n,s,r){Na(n)&&r.delete(s)}function dS(){wc=!1,_i!==null&&Na(_i)&&(_i=null),Si!==null&&Na(Si)&&(Si=null),Ei!==null&&Na(Ei)&&(Ei=null),Xo.forEach(Em),Wo.forEach(Em)}function Ia(n,s){n.blockedOn===s&&(n.blockedOn=null,wc||(wc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dS)))}var Ma=null;function wm(n){Ma!==n&&(Ma=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ma===n&&(Ma=null);for(var s=0;s<n.length;s+=3){var r=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(Ec(u||r)===null)continue;break}var y=ss(r);y!==null&&(n.splice(s,3),s-=3,Su(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function Bs(n){function s(C){return Ia(C,n)}_i!==null&&Ia(_i,n),Si!==null&&Ia(Si,n),Ei!==null&&Ia(Ei,n),Xo.forEach(s),Wo.forEach(s);for(var r=0;r<wi.length;r++){var u=wi[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<wi.length&&(r=wi[0],r.blockedOn===null);)Sm(r),r.blockedOn===null&&wi.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],E=p[Ut]||null;if(typeof y=="function")E||wm(r);else if(E){var b=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[Ut]||null)b=E.formAction;else if(Ec(p)!==null)continue}else b=E.action;typeof b=="function"?r[u+1]=b:(r.splice(u,3),u-=3),wm(r)}}}function Tm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Tc(n){this._internalRoot=n}ka.prototype.render=Tc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=jt();pm(r,u,n,s,null,null)},ka.prototype.unmount=Tc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;pm(n.current,2,null,n,null,null),fa(),s[ns]=null}};function ka(n){this._internalRoot=n}ka.prototype.unstable_scheduleHydration=function(n){if(n){var s=kd();n={blockedOn:null,target:n,priority:s};for(var r=0;r<wi.length&&s!==0&&s<wi[r].priority;r++);wi.splice(r,0,n),r===0&&Sm(n)}};var bm=e.version;if(bm!=="19.2.3")throw Error(o(527,bm,"19.2.3"));j.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=m(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var fS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{ro=Da.inject(fS),Gt=Da}catch{}}return er.createRoot=function(n,s){if(!a(n))throw Error(o(299));var r=!1,u="",p=Mh,y=kh,E=Dh;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=fm(n,1,!1,null,null,r,u,null,p,y,E,Tm),n[ns]=s.current,sc(n),new Tc(s)},er.hydrateRoot=function(n,s,r){if(!a(n))throw Error(o(299));var u=!1,p="",y=Mh,E=kh,b=Dh,C=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),s=fm(n,1,!0,s,r??null,u,p,C,y,E,b,Tm),s.context=hm(null),r=s.current,u=jt(),u=hl(u),p=ai(u),p.callback=null,li(r,p,u),r=u,s.current.lanes=r,lo(s,r),An(s),n[ns]=s.current,sc(n),new ka(s)},er.version="19.2.3",er}var Um;function wS(){if(Um)return Cc.exports;Um=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cc.exports=ES(),Cc.exports}var TS=wS();const bS=H0(TS),xS=[{id:"p1",userId:"twc_official",username:"barista_pro",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=200&h=200&auto=format&fit=crop",content:"Just perfected the art of the perfect pour-over. The notes of blueberry and dark chocolate in this Ethiopian Yirgacheffe are absolutely stunning!  #ThirdWaveCoffee #Wavegram",image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=800&h=500&auto=format&fit=crop",likes:85,shares:12,createdAt:"45m",comments:[{id:"c1",userId:"u3",username:"coffee_lover_99",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=200&h=200&auto=format&fit=crop",content:"Drop the recipe and grind size please!",createdAt:"30m",likes:5}]},{id:"p2",userId:"u4",username:"morning_ritual",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=200&h=200&auto=format&fit=crop",content:"Nothing beats a fresh batch of cold brew on a sunny morning. Steeping for 18 hours makes all the difference. Who else is a fan of long steeps? ",likes:156,shares:24,createdAt:"3h",comments:[]},{id:"p3",userId:"u5",username:"barista_hq",avatar:"https://images.unsplash.com/photo-1554151228-14d9def656e4?q=80&w=200&h=200&auto=format&fit=crop",content:"Our new seasonal beans are finally here! Direct from a small farm in Costa Rica. Expect honey-like sweetness and a silky body. ",image:"https://images.unsplash.com/photo-1442154421459-335190013233?q=80&w=800&h=500&auto=format&fit=crop",likes:210,shares:45,createdAt:"5h",comments:[]}],Wt={Home:({active:t})=>w.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),w.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Search:({active:t})=>w.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t?"3":"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("circle",{cx:"11",cy:"11",r:"8"}),w.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Post:()=>w.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),w.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Heart:({active:t})=>w.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:t?"#ed4956":"none",stroke:t?"#ed4956":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:w.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),Comment:()=>w.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:w.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),Share:()=>w.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),w.jsx("polyline",{points:"16 6 12 2 8 6"}),w.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),More:()=>w.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("circle",{cx:"12",cy:"12",r:"1"}),w.jsx("circle",{cx:"19",cy:"12",r:"1"}),w.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),Verified:()=>w.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"#1d9bf0",stroke:"white",strokeWidth:"1",children:[w.jsx("path",{d:"M12 2L15.09 5.26L19.47 4.53L20.2 8.91L23.46 12L20.2 15.09L19.47 19.47L15.09 20.2L12 23.46L8.91 20.2L4.53 19.47L3.8 15.09L0.54 12L3.8 8.91L4.53 4.53L8.91 5.26L12 2Z"}),w.jsx("path",{d:"M9 12L11 14L15 10",stroke:"white",strokeWidth:"2",fill:"none"})]})};var be=(t=>(t.HOME="home",t.SEARCH="search",t.POST="post",t.ACTIVITY="activity",t.PROFILE="profile",t))(be||{});const CS=({children:t,activeTab:e,setActiveTab:i,onLogout:o,unreadCount:a=0})=>w.jsxs("div",{className:"min-h-screen bg-[#0e0d0c] text-[#efebe9] flex flex-col md:flex-row justify-center",children:[w.jsxs("nav",{className:"hidden md:flex flex-col items-center py-6 w-20 fixed left-0 top-0 bottom-0 bg-[#0e0d0c] z-20 border-r border-[#2c1a12]",children:[w.jsx("div",{className:"mb-10 cursor-pointer group px-4",onClick:()=>i(be.HOME),children:w.jsx("img",{src:"/logo.png",alt:"Wavegram",className:"w-full h-auto object-contain group-hover:scale-110 transition-transform duration-300"})}),w.jsxs("div",{className:"flex flex-col gap-8 flex-1",children:[w.jsx("button",{onClick:()=>i(be.HOME),className:`${e===be.HOME?"text-white":"text-neutral-500"} hover:text-white transition-colors`,children:w.jsx(Wt.Home,{active:e===be.HOME})}),w.jsx("button",{onClick:()=>i(be.SEARCH),className:`${e===be.SEARCH?"text-white":"text-neutral-500"} hover:text-white transition-colors`,children:w.jsx(Wt.Search,{active:e===be.SEARCH})}),w.jsx("button",{onClick:()=>i(be.POST),className:`${e===be.POST?"text-white":"text-neutral-500"} hover:text-white transition-colors`,children:w.jsx(Wt.Post,{})}),w.jsxs("button",{onClick:()=>i(be.ACTIVITY),className:`${e===be.ACTIVITY?"text-white":"text-neutral-500"} hover:text-white transition-colors relative`,children:[w.jsx(Wt.Heart,{}),a>0&&w.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-[#0e0d0c]"})]}),w.jsx("button",{onClick:()=>i(be.PROFILE),className:`${e===be.PROFILE?"text-white":"text-neutral-500"} hover:text-white transition-colors`,children:w.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),w.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})]}),w.jsx("button",{onClick:o,className:"mt-auto mb-6 p-3 text-neutral-500 hover:text-red-400 transition-colors transform hover:scale-110",title:"Sign Out",children:w.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),w.jsx("polyline",{points:"16 17 21 12 16 7"}),w.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]}),w.jsx("main",{className:"w-full max-w-[640px] border-x border-[#2c1a12] pb-20 md:pb-0 min-h-screen bg-[#0e0d0c]",children:t}),w.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-[#0e0d0c]/95 backdrop-blur-md border-t border-[#2c1a12] h-16 flex justify-around items-center z-20 px-4",children:[w.jsx("button",{onClick:()=>i(be.HOME),className:`${e===be.HOME?"text-white":"text-neutral-500"}`,children:w.jsx(Wt.Home,{active:e===be.HOME})}),w.jsx("button",{onClick:()=>i(be.SEARCH),className:`${e===be.SEARCH?"text-white":"text-neutral-500"}`,children:w.jsx(Wt.Search,{active:e===be.SEARCH})}),w.jsx("button",{onClick:()=>i(be.POST),className:`${e===be.POST?"text-white":"text-neutral-500"}`,children:w.jsx(Wt.Post,{})}),w.jsxs("button",{onClick:()=>i(be.ACTIVITY),className:`${e===be.ACTIVITY?"text-white":"text-neutral-500"} relative`,children:[w.jsx(Wt.Heart,{}),a>0&&w.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-[#0e0d0c]"})]}),w.jsx("button",{onClick:()=>i(be.PROFILE),className:`${e===be.PROFILE?"text-white":"text-neutral-500"}`,children:w.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),w.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),w.jsx("button",{onClick:o,className:"text-neutral-500 hover:text-red-400",children:w.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),w.jsx("polyline",{points:"16 17 21 12 16 7"}),w.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),Lm=({post:t,isOwner:e,onLike:i,onComment:o,onShare:a,onEdit:l,onDelete:c})=>{const[h,g]=We.useState(!1),[m,v]=We.useState(!1);return w.jsx("div",{className:"border-b border-[#2c1a12] p-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx("img",{src:t.avatar,alt:t.username,className:"w-12 h-12 rounded-full object-cover border-2 border-[#c29a67]/20 shadow-lg"}),t.comments.length>0&&w.jsx("div",{className:"w-[2px] grow bg-[#2c1a12] rounded-full my-1"}),t.comments.length>0&&w.jsx("div",{className:"flex -space-x-4 mt-1",children:t.comments.slice(0,2).map((_,S)=>w.jsx("img",{src:_.avatar,className:"w-5 h-5 rounded-full border-2 border-[#0e0d0c]"},S))})]}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-bold text-[16px] text-[#efebe9] hover:text-[#c29a67] transition-colors cursor-pointer tracking-tight",children:t.username}),w.jsx(Wt.Verified,{}),w.jsx("span",{className:"text-[#a09a96] text-xs font-medium uppercase tracking-wider ml-1",children:t.createdAt})]}),e&&w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>v(!m),className:"text-[#a09a96] hover:text-[#c29a67] transition-colors p-1",children:w.jsx(Wt.More,{})}),m&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>v(!1)}),w.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#1a1817] border border-[#2c1a12] rounded-2xl shadow-2xl overflow-hidden z-40 backdrop-blur-xl animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("button",{onClick:()=>{v(!1),l==null||l(t)},className:"w-full px-6 py-4 text-left text-sm font-bold text-[#efebe9] hover:bg-[#c29a67]/10 hover:text-[#c29a67] transition-colors flex items-center gap-3",children:[w.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),w.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit Brew"]}),w.jsxs("button",{onClick:_=>{_.stopPropagation(),v(!1),c==null||c(t.id)},className:"w-full px-6 py-4 text-left text-sm font-bold text-[#ff4b4b] hover:bg-[#ff4b4b]/10 transition-colors flex items-center gap-3 border-t border-[#2c1a12]",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Brew"]})]})]})]})]}),w.jsx("p",{className:"text-[15px] leading-relaxed mb-3 whitespace-pre-wrap",children:t.content}),t.image&&w.jsx("div",{className:"rounded-xl overflow-hidden border border-[#2c1a12] mb-4 bg-[#0e0d0c]",children:w.jsx("img",{src:t.image,alt:"post content",className:"w-full object-contain max-h-[500px]"})}),w.jsxs("div",{className:"flex items-center gap-5 text-neutral-400 mt-1",children:[w.jsx("button",{onClick:()=>i(t.id),className:`flex items-center gap-1.5 transition-transform active:scale-90 ${t.isLiked?"text-[#ed4956]":"hover:text-white"}`,children:w.jsx(Wt.Heart,{active:t.isLiked})}),w.jsx("button",{onClick:()=>o(t),className:"flex items-center gap-1.5 hover:text-white",children:w.jsx(Wt.Comment,{})}),w.jsx("button",{onClick:()=>a(t),className:"flex items-center gap-1.5 hover:text-white",children:w.jsx(Wt.Share,{})})]}),w.jsxs("div",{className:"mt-3 text-[14px] text-neutral-500 flex items-center gap-2",children:[t.likes>0&&w.jsxs("span",{children:[t.likes," likes"]}),t.likes>0&&t.comments.length>0&&w.jsx("span",{children:""}),t.comments.length>0&&w.jsxs("button",{onClick:()=>g(!h),className:"hover:text-[#c29a67] transition-colors flex items-center gap-1 font-medium",children:[t.comments.length," ",t.comments.length===1?"reply":"replies",w.jsx("svg",{className:`w-3 h-3 transition-transform duration-300 ${h?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M19 9l-7 7-7-7"})})]})]}),t.comments.length>0&&h&&w.jsx("div",{className:"mt-6 space-y-4 border-l-2 border-[#2c1a12] ml-2 pl-6 animate-in slide-in-from-top-4 duration-300",children:t.comments.map(_=>w.jsxs("div",{className:"bg-[#1a1817]/40 p-4 rounded-2xl border border-[#2c1a12]/50",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("img",{src:_.avatar,className:"w-6 h-6 rounded-full"}),w.jsxs("span",{className:"font-bold text-xs text-[#efebe9]",children:["@",_.username]}),w.jsx("span",{className:"text-[10px] text-[#a09a96] uppercase tracking-wider",children:_.createdAt})]}),w.jsx("p",{className:"text-sm text-[#efebe9]/90 leading-relaxed",children:_.content})]},_.id))})]})]})})};var AS={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RS,NS;function IS(){return{geminiUrl:RS,vertexUrl:NS}}function MS(t,e,i,o){var a,l;if(!(t!=null&&t.baseUrl)){const c=IS();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xn{}function W(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let m=0;m<g.length;m++){const v=g[m];f(v,e.slice(l+1),i[m])}else for(const m of g)f(m,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],a=t[o];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const a=e[o];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(o+1),i)):i}else return i}else t=t[a]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function kS(t,e){for(const[i,o]of Object.entries(e)){const a=i.split("."),l=o.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Gc(t,a,l,0,c)}}function Gc(t,e,i,o,a){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Gc(g,e,i,o+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!a.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const S of i.slice(o))S==="*"?_.push(m):_.push(S);f(c,_,v)}for(const m of h)delete c[m]}}else{const c=t;l in c&&Gc(c[l],e,i,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(t){const e={},i=d(t,["operationName"]);i!=null&&f(e,["operationName"],i);const o=d(t,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function US(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],OS(c)),e}function LS(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],PS(c)),e}function OS(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>qS(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function PS(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>BS(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function qS(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],FS(i)),e}function BS(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],JS(i)),e}function HS(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function GS(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function VS(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],zS(c)),e}function zS(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function G0(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],$S(c)),e}function $S(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function FS(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],hd(o));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function JS(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],hd(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Om;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Om||(Om={}));var Pm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Pm||(Pm={}));var qm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(qm||(qm={}));var Ci;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ci||(Ci={}));var Bm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Bm||(Bm={}));var Hm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Hm||(Hm={}));var Gm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Gm||(Gm={}));var Vm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vm||(Vm={}));var zm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(zm||(zm={}));var $m;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})($m||($m={}));var Fm;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fm||(Fm={}));var Jm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Jm||(Jm={}));var Ym;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ym||(Ym={}));var Km;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Km||(Km={}));var jm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jm||(jm={}));var Xm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xm||(Xm={}));var Wm;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wm||(Wm={}));var Qm;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Qm||(Qm={}));var Zm;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zm||(Zm={}));var Ja;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ja||(Ja={}));var eg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(eg||(eg={}));var tg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tg||(tg={}));var ng;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ng||(ng={}));var Vc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Vc||(Vc={}));var ig;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ig||(ig={}));var sg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(sg||(sg={}));var og;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(og||(og={}));var rg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(rg||(rg={}));var ag;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ag||(ag={}));var lg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lg||(lg={}));var ug;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ug||(ug={}));var cg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(cg||(cg={}));var dg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(dg||(dg={}));var fg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(fg||(fg={}));var hg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hg||(hg={}));var pg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pg||(pg={}));var mg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mg||(mg={}));var gg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(gg||(gg={}));var yg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(yg||(yg={}));var vg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(vg||(vg={}));var _g;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_g||(_g={}));var Sg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Sg||(Sg={}));var Eg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Eg||(Eg={}));var wg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(wg||(wg={}));var Tg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Tg||(Tg={}));var bg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(bg||(bg={}));var xg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xg||(xg={}));var Cg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Cg||(Cg={}));var Ag;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ag||(Ag={}));var Rg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rg||(Rg={}));var Ng;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ng||(Ng={}));var Ig;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ig||(Ig={}));var Mg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mg||(Mg={}));var kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kg||(kg={}));var Dg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Dg||(Dg={}));var Xs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Xs||(Xs={}));class zc{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class tr{get text(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,x]of Object.entries(S))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(x!==null||x!==void 0)&&_.push(T);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,T]of Object.entries(_))S!=="inlineData"&&(T!==null||T!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,o,a,l,c,h,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,o,a,l,c,h,g,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,o,a,l,c,h,g,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Ug{}class Lg{}class YS{}class KS{}class jS{}class XS{}class Og{}class Pg{}class qg{}class WS{}class Ya{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Ya;let a;const l=e;return i?a=LS(l):a=US(l),Object.assign(o,a),o}}class Bg{}class Hg{}class Gg{}class Vg{}class QS{}class ZS{}class eE{}class pd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new pd,l=VS(e);return Object.assign(o,l),o}}class tE{}class nE{}class iE{}class zg{}class sE{get text(){var e,i,o;let a="",l=!1;const c=[];for(const h of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,o;let a="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class oE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class md{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new md,l=G0(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function V0(t,e){const i=Le(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function z0(t){return Array.isArray(t)?t.map(e=>Ka(e)):[Ka(t)]}function Ka(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $0(t){const e=Ka(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function F0(t){const e=Ka(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $g(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function J0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$g(e)):[$g(t)]}function $c(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Fg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Jg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Rt(t){if(t==null)throw new Error("ContentUnion is required");return $c(t)?t:{role:"user",parts:J0(t)}}function gd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Rt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Rt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Rt(i)):[Rt(e)]}function dn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Fg(t)||Jg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Rt(t)]}const e=[],i=[],o=$c(t[0]);for(const a of t){const l=$c(a);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Fg(a)||Jg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return o||e.push({role:"user",parts:J0(i)}),e}function rE(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(Ci).includes(i[0].toUpperCase())?i[0].toUpperCase():Ci.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(Ci).includes(o.toUpperCase())?o.toUpperCase():Ci.TYPE_UNSPECIFIED})}}function Zs(t){const e={},i=["items"],o=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&rE(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ci).includes(h.toUpperCase())?h.toUpperCase():Ci.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=Zs(h);else if(o.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(Zs(m))}e[c]=g}else if(a.includes(c)){const g={};for(const[m,v]of Object.entries(h))g[m]=Zs(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function yd(t){return Zs(t)}function vd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function _d(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function no(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zs(e.response));return t}function io(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function aE(t,e,i,o=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Wn(t,e){if(typeof e!="string")throw new Error("name must be a string");return aE(t,e,"cachedContents")}function Y0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ai(t){return hd(t)}function lE(t){return t!=null&&typeof t=="object"&&"name"in t}function uE(t){return t!=null&&typeof t=="object"&&"video"in t}function cE(t){return t!=null&&typeof t=="object"&&"uri"in t}function K0(t){var e;let i;if(lE(t)&&(i=t.name),!(cE(t)&&(i=t.uri,i===void 0))&&!(uE(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function j0(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function X0(t){for(const e of["models","tunedModels","publisherModels"])if(dE(t,e))return t[e];return[]}function dE(t,e){return t!==null&&typeof t=="object"&&e in t}function fE(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function hE(t,e={}){const i=[],o=new Set;for(const a of t){const l=a.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=fE(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function W0(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function pE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Q0(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function so(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Z0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mE(t){const e={},i=d(t,["responsesFile"]);i!=null&&f(e,["fileName"],i);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jE(c))),f(e,["inlinedResponses"],l)}const a=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function gE(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&f(e,["format"],i);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const a=d(t,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function yE(t){const e={},i=d(t,["format"]);i!=null&&f(e,["predictionsFormat"],i);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function za(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["metadata","state"]);a!=null&&f(e,["state"],Z0(a));const l=d(t,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const m=d(t,["metadata","output"]);return m!=null&&f(e,["dest"],mE(Q0(m))),e}function Fc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["state"]);a!=null&&f(e,["state"],Z0(a));const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],vE(_));const S=d(t,["outputConfig"]);S!=null&&f(e,["dest"],gE(Q0(S)));const T=d(t,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function vE(t){const e={},i=d(t,["instancesFormat"]);i!=null&&f(e,["format"],i);const o=d(t,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const a=d(t,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function _E(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&f(i,["fileName"],o);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>KE(t,c))),f(i,["requests","requests"],l)}return i}function SE(t){const e={},i=d(t,["format"]);i!=null&&f(e,["instancesFormat"],i);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function EE(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function wE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function TE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function bE(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],xE(o));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>T)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function xE(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["citations"],o)}return e}function ey(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>nw(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function CE(t,e){const i={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function AE(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],yE(pE(a))),i}function Yg(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],_E(t,W0(t,a)));const l=d(e,["config"]);return l!=null&&CE(l,i),i}function RE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],Le(t,o));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],SE(W0(t,a)));const l=d(e,["config"]);return l!=null&&AE(l,i),i}function NE(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),i}function IE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],PE(t,a));const l=d(e,["config"]);return l!=null&&NE(l,i),i}function ME(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function kE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function DE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function UE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function LE(t,e){const i={},o=d(e,["contents"]);if(o!=null){let l=gd(t,o);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],OE(a,i)),kS(i,{"requests[].*":"requests[].request.*"})),i}function OE(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function PE(t,e){const i={},o=d(e,["fileName"]);o!=null&&f(i,["file_name"],o);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],LE(t,a)),i}function qE(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function BE(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HE(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GE(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],ey(Rt(a)));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const x=d(e,["frequencyPenalty"]);x!=null&&f(o,["frequencyPenalty"],x);const A=d(e,["seed"]);A!=null&&f(o,["seed"],A);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const D=d(e,["responseSchema"]);D!=null&&f(o,["responseSchema"],yd(D));const q=d(e,["responseJsonSchema"]);if(q!=null&&f(o,["responseJsonSchema"],q),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let Ce=M;Array.isArray(Ce)&&(Ce=Ce.map(Ye=>iw(Ye))),f(i,["safetySettings"],Ce)}const H=d(e,["tools"]);if(i!==void 0&&H!=null){let Ce=io(H);Array.isArray(Ce)&&(Ce=Ce.map(Ye=>ow(no(Ye)))),f(i,["tools"],Ce)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],sw(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=d(e,["cachedContent"]);i!==void 0&&z!=null&&f(i,["cachedContent"],Wn(t,z));const G=d(e,["responseModalities"]);G!=null&&f(o,["responseModalities"],G);const ie=d(e,["mediaResolution"]);ie!=null&&f(o,["mediaResolution"],ie);const K=d(e,["speechConfig"]);if(K!=null&&f(o,["speechConfig"],vd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(o,["thinkingConfig"],ce);const xe=d(e,["imageConfig"]);xe!=null&&f(o,["imageConfig"],YE(xe));const qe=d(e,["enableEnhancedCivicAnswers"]);return qe!=null&&f(o,["enableEnhancedCivicAnswers"],qe),o}function VE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>bE(m))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function zE(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function $E(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],so(t,o)),i}function FE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function JE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function YE(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function KE(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["request","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(g=>ey(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],GE(t,c,d(i,["request"],{}))),i}function jE(t){const e={},i=d(t,["response"]);i!=null&&f(e,["response"],VE(i));const o=d(t,["error"]);return o!=null&&f(e,["error"],o),e}function XE(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function WE(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function QE(t){const e={},i=d(t,["config"]);return i!=null&&XE(i,e),e}function ZE(t){const e={},i=d(t,["config"]);return i!=null&&WE(i,e),e}function ew(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>za(c))),f(e,["batchJobs"],l)}return e}function tw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fc(c))),f(e,["batchJobs"],l)}return e}function nw(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],qE(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],BE(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],EE(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function iw(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function sw(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],HE(i));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function ow(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],FE(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],JE(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(jn||(jn={}));class es{constructor(e,i,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,a)}init(e,i,o){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rw extends Xn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(jn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Yg(this.apiClient,e),o=i._url,a=W("{model}:batchGenerateContent",o),h=i.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const T=_.request;T.systemInstruction=S,_.request=T}m.push(_)}return h.requests=m,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${a}`;else if(c)o.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=RE(this.apiClient,e);return h=W("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Fc(v))}else{const m=Yg(this.apiClient,e);return h=W("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>za(v))}}async createEmbeddingsInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IE(this.apiClient,e);return l=W("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>za(g))}}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=$E(this.apiClient,e);return h=W("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Fc(v))}else{const m=zE(this.apiClient,e);return h=W("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>za(v))}}async cancel(e){var i,o,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=TE(this.apiClient,e);c=W("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=wE(this.apiClient,e);c=W("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ZE(e);return h=W("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=tw(v),S=new zg;return Object.assign(S,_),S})}else{const m=QE(e);return h=W("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ew(v),S=new zg;return Object.assign(S,_),S})}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=kE(this.apiClient,e);return h=W("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>UE(v))}else{const m=ME(this.apiClient,e);return h=W("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>DE(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aw(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Kg(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Iw(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function lw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=dn(c);Array.isArray(v)&&(v=v.map(_=>Kg(_))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Kg(Rt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>kw(_))),f(e,["tools"],v)}const m=d(t,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],Mw(m)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function uw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=dn(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Rt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>Dw(S))),f(e,["tools"],_)}const m=d(t,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function cw(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],V0(t,o));const a=d(e,["config"]);return a!=null&&lw(a,i),i}function dw(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["model"],V0(t,o));const a=d(e,["config"]);return a!=null&&uw(a,i),i}function fw(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Wn(t,o)),i}function hw(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Wn(t,o)),i}function pw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function mw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function gw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function yw(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vw(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _w(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Sw(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Wn(t,o)),i}function Ew(t,e){const i={},o=d(e,["name"]);return o!=null&&f(i,["_url","name"],Wn(t,o)),i}function ww(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Tw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function bw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function xw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Cw(t){const e={},i=d(t,["config"]);return i!=null&&bw(i,e),e}function Aw(t){const e={},i=d(t,["config"]);return i!=null&&xw(i,e),e}function Rw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function Nw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function Iw(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],gw(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],yw(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],aw(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Mw(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],vw(i));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function kw(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],ww(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],Tw(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Dw(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>_w(S))),f(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Uw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Lw(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Ow(t,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],Wn(t,o));const a=d(e,["config"]);return a!=null&&Uw(a,i),i}function Pw(t,e){const i={},o=d(e,["name"]);o!=null&&f(i,["_url","name"],Wn(t,o));const a=d(e,["config"]);return a!=null&&Lw(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qw extends Xn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(jn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=dw(this.apiClient,e);return h=W("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=cw(this.apiClient,e);return h=W("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Ew(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Sw(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=hw(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=mw(v),S=new Gg;return Object.assign(S,_),S})}else{const m=fw(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=pw(v),S=new Gg;return Object.assign(S,_),S})}}async update(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Pw(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Ow(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Aw(e);return h=W("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Nw(v),S=new Vg;return Object.assign(S,_),S})}else{const m=Cw(e);return h=W("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Rw(v),S=new Vg;return Object.assign(S,_),S})}}}function ja(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function jg(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t){return this instanceof de?(this.v=t,this):new de(t)}function En(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(x){return Promise.resolve(x).then(T,_)}}function h(T,x){o[T]&&(a[T]=function(A){return new Promise(function(R,D){l.push([T,A,R,D])>1||g(T,A)})},x&&(a[T]=x(a[T])))}function g(T,x){try{m(o[T](x))}catch(A){S(l[0][3],A)}}function m(T){T.value instanceof de?Promise.resolve(T.value.v).then(v,_):S(l[0][2],T)}function v(T){g("next",T)}function _(T){g("throw",T)}function S(T,x){T(x),l.shift(),l.length&&g(l[0][0],l[0][1])}}function wn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof jg=="function"?jg(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(m){l({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:ty(i)}function ty(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Hw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Xg(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const a=[];let l=!0;for(;o<i&&t[o].role==="model";)a.push(t[o]),l&&!ty(t[o])&&(l=!1),o++;l?e.push(...a):e.pop()}return e}class Gw{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Vw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Vw{constructor(e,i,o,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),Hw(l)}async sendMessage(e){var i;await this.sendPromise;const o=Rt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,m=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const T=m?[m]:[];this.recordHistory(o,T,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const o=Rt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?Xg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return En(this,arguments,function*(){var a,l,c,h,g,m;const v=[];try{for(var _=!0,S=wn(e),T;T=yield de(S.next()),a=T.done,!a;_=!0){h=T.value,_=!1;const x=h;if(Bw(x)){const A=(m=(g=x.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;A!==void 0&&v.push(A)}yield yield de(x)}}catch(x){l={error:x}}finally{try{!_&&!a&&(c=S.return)&&(yield de(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Xg(o)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,tl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zw(t){const e={},i=d(t,["file"]);return i!=null&&f(e,["file"],i),e}function $w(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Fw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],K0(i)),e}function Jw(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Yw(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],K0(i)),e}function Kw(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function jw(t){const e={},i=d(t,["config"]);return i!=null&&Kw(i,e),e}function Xw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ww extends Xn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(jn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jw(e);return l=W("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=Xw(g),v=new tE;return Object.assign(v,m),v})}}async createInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zw(e);return l=W("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=$w(g),v=new nE;return Object.assign(v,m),v})}}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Yw(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Fw(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=Jw(g),v=new iE;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $a(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Qw(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>pT(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function Zw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function eT(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tT(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function nT(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const x=d(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const A=d(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const R=d(t,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);const D=d(t,["seed"]);D!=null&&f(e,["seed"],D);const q=d(t,["speechConfig"]);q!=null&&f(e,["speechConfig"],q);const M=d(t,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const H=d(t,["temperature"]);H!=null&&f(e,["temperature"],H);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const z=d(t,["topK"]);z!=null&&f(e,["topK"],z);const G=d(t,["topP"]);if(G!=null&&f(e,["topP"],G),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iT(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function sT(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function oT(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],_d(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],Qw(Rt(x)));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let z=io(A);Array.isArray(z)&&(z=z.map(G=>gT(no(G)))),f(e,["setup","tools"],z)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],mT(R));const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const q=d(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","outputAudioTranscription"],q);const M=d(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function rT(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],nT(o));const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],_d(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],Rt(x));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let G=io(A);Array.isArray(G)&&(G=G.map(ie=>yT(no(ie)))),f(e,["setup","tools"],G)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],R);const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const q=d(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","outputAudioTranscription"],q);const M=d(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const Y=d(t,["proactivity"]);e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y);const z=d(t,["explicitVadSignal"]);return e!==void 0&&z!=null&&f(e,["setup","explicitVadSignal"],z),i}function aT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Le(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],oT(a,i)),i}function lT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Le(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],rT(a,i)),i}function uT(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function cT(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["weightedPrompts"],o)}return e}function dT(t){const e={},i=d(t,["media"]);if(i!=null){let m=z0(i);Array.isArray(m)&&(m=m.map(v=>$a(v))),f(e,["mediaChunks"],m)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],$a(F0(o)));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],$a($0(l)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function fT(t){const e={},i=d(t,["media"]);if(i!=null){let m=z0(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],F0(o));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],$0(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function hT(t){const e={},i=d(t,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const o=d(t,["serverContent"]);o!=null&&f(e,["serverContent"],o);const a=d(t,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(t,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],vT(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const m=d(t,["voiceActivityDetectionSignal"]);return m!=null&&f(e,["voiceActivityDetectionSignal"],m),e}function pT(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],Zw(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],eT(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],$a(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function mT(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gT(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],iT(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],sT(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function yT(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>tT(S))),f(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function vT(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const o=d(t,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const a=d(t,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(x=>x)),f(e,["promptTokensDetails"],T)}const m=d(t,["cacheTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(x=>x)),f(e,["cacheTokensDetails"],T)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(x=>x)),f(e,["responseTokensDetails"],T)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(x=>x)),f(e,["toolUsePromptTokensDetails"],T)}const S=d(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _T(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ST(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],ET(o));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>T)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function ET(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(e,["citations"],o)}return e}function wT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let l=dn(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function TT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function bT(t){const e={},i=d(t,["values"]);i!=null&&f(e,["values"],i);const o=d(t,["statistics"]);return o!=null&&f(e,["statistics"],xT(o)),e}function xT(t){const e={},i=d(t,["truncated"]);i!=null&&f(e,["truncated"],i);const o=d(t,["token_count"]);return o!=null&&f(e,["tokenCount"],o),e}function nl(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ub(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function CT(t){const e={},i=d(t,["controlType"]);i!=null&&f(e,["controlType"],i);const o=d(t,["enableControlImageComputation"]);return o!=null&&f(e,["computeControl"],o),e}function AT(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function RT(t,e){const i={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],Rt(o));const a=d(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>oy(h))),f(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],_b(l)),i}function NT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let c=dn(a);Array.isArray(c)&&(c=c.map(h=>nl(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&AT(l),i}function IT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let c=dn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&RT(l,i),i}function MT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);o!=null&&f(e,["totalTokens"],o);const a=d(t,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function kT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);return o!=null&&f(e,["totalTokens"],o),e}function DT(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Le(t,o)),i}function UT(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Le(t,o)),i}function LT(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function OT(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function PT(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const A=d(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const q=d(t,["editMode"]);e!==void 0&&q!=null&&f(e,["parameters","editMode"],q);const M=d(t,["baseSteps"]);return e!==void 0&&M!=null&&f(e,["parameters","editConfig","baseSteps"],M),i}function qT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>Hb(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&PT(c,i),i}function BT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>il(l))),f(e,["generatedImages"],a)}return e}function HT(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function GT(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function VT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let h=gd(t,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&HT(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],Le(t,c)),i}function zT(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let c=gd(t,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&GT(l,i),i}function $T(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function FT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>bT(c))),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function JT(t){const e={},i=d(t,["endpoint"]);i!=null&&f(e,["name"],i);const o=d(t,["deployedModelId"]);return o!=null&&f(e,["deployedModelId"],o),e}function YT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function KT(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jT(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XT(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function WT(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],nl(Rt(a)));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const x=d(e,["frequencyPenalty"]);x!=null&&f(o,["frequencyPenalty"],x);const A=d(e,["seed"]);A!=null&&f(o,["seed"],A);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const D=d(e,["responseSchema"]);D!=null&&f(o,["responseSchema"],yd(D));const q=d(e,["responseJsonSchema"]);if(q!=null&&f(o,["responseJsonSchema"],q),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let Ce=M;Array.isArray(Ce)&&(Ce=Ce.map(Ye=>Gb(Ye))),f(i,["safetySettings"],Ce)}const H=d(e,["tools"]);if(i!==void 0&&H!=null){let Ce=io(H);Array.isArray(Ce)&&(Ce=Ce.map(Ye=>Kb(no(Ye)))),f(i,["tools"],Ce)}const Y=d(e,["toolConfig"]);if(i!==void 0&&Y!=null&&f(i,["toolConfig"],Yb(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=d(e,["cachedContent"]);i!==void 0&&z!=null&&f(i,["cachedContent"],Wn(t,z));const G=d(e,["responseModalities"]);G!=null&&f(o,["responseModalities"],G);const ie=d(e,["mediaResolution"]);ie!=null&&f(o,["mediaResolution"],ie);const K=d(e,["speechConfig"]);if(K!=null&&f(o,["speechConfig"],vd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(o,["thinkingConfig"],ce);const xe=d(e,["imageConfig"]);xe!=null&&f(o,["imageConfig"],bb(xe));const qe=d(e,["enableEnhancedCivicAnswers"]);return qe!=null&&f(o,["enableEnhancedCivicAnswers"],qe),o}function QT(t,e,i){const o={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],Rt(a));const l=d(e,["temperature"]);l!=null&&f(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(o,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(o,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const x=d(e,["frequencyPenalty"]);x!=null&&f(o,["frequencyPenalty"],x);const A=d(e,["seed"]);A!=null&&f(o,["seed"],A);const R=d(e,["responseMimeType"]);R!=null&&f(o,["responseMimeType"],R);const D=d(e,["responseSchema"]);D!=null&&f(o,["responseSchema"],yd(D));const q=d(e,["responseJsonSchema"]);q!=null&&f(o,["responseJsonSchema"],q);const M=d(e,["routingConfig"]);M!=null&&f(o,["routingConfig"],M);const H=d(e,["modelSelectionConfig"]);H!=null&&f(o,["modelConfig"],H);const Y=d(e,["safetySettings"]);if(i!==void 0&&Y!=null){let B=Y;Array.isArray(B)&&(B=B.map(j=>j)),f(i,["safetySettings"],B)}const z=d(e,["tools"]);if(i!==void 0&&z!=null){let B=io(z);Array.isArray(B)&&(B=B.map(j=>oy(no(j)))),f(i,["tools"],B)}const G=d(e,["toolConfig"]);i!==void 0&&G!=null&&f(i,["toolConfig"],G);const ie=d(e,["labels"]);i!==void 0&&ie!=null&&f(i,["labels"],ie);const K=d(e,["cachedContent"]);i!==void 0&&K!=null&&f(i,["cachedContent"],Wn(t,K));const ce=d(e,["responseModalities"]);ce!=null&&f(o,["responseModalities"],ce);const xe=d(e,["mediaResolution"]);xe!=null&&f(o,["mediaResolution"],xe);const qe=d(e,["speechConfig"]);qe!=null&&f(o,["speechConfig"],vd(qe));const Ce=d(e,["audioTimestamp"]);Ce!=null&&f(o,["audioTimestamp"],Ce);const Ye=d(e,["thinkingConfig"]);Ye!=null&&f(o,["thinkingConfig"],Ye);const xt=d(e,["imageConfig"]);if(xt!=null&&f(o,["imageConfig"],xb(xt)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Wg(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let c=dn(a);Array.isArray(c)&&(c=c.map(h=>nl(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],WT(t,l,i)),i}function Qg(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["contents"]);if(a!=null){let c=dn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],QT(t,l,i)),i}function Zg(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>ST(m))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function e0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["candidates"],m)}const a=d(t,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function ZT(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function eb(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const A=d(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&f(e,["parameters","addWatermark"],R);const D=d(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const q=d(t,["imageSize"]);e!==void 0&&q!=null&&f(e,["parameters","sampleImageSize"],q);const M=d(t,["enhancePrompt"]);return e!==void 0&&M!=null&&f(e,["parameters","enhancePrompt"],M),i}function tb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&ZT(l,i),i}function nb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&eb(l,i),i}function ib(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>mb(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],iy(a)),e}function sb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>il(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],sy(a)),e}function ob(t,e){const i={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(t,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const m=d(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],sl(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(T=>ax(T))),f(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function rb(t,e){const i={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(t,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const m=d(t,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const x=d(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const A=d(t,["lastFrame"]);e!==void 0&&A!=null&&f(e,["instances[0]","lastFrame"],Tn(A));const R=d(t,["referenceImages"]);if(e!==void 0&&R!=null){let M=R;Array.isArray(M)&&(M=M.map(H=>lx(H))),f(e,["instances[0]","referenceImages"],M)}const D=d(t,["mask"]);e!==void 0&&D!=null&&f(e,["instances[0]","mask"],rx(D));const q=d(t,["compressionQuality"]);return e!==void 0&&q!=null&&f(e,["parameters","compressionQuality"],q),i}function ab(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],db(c)),e}function lb(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],fb(c)),e}function ub(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],sl(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],ry(c));const h=d(e,["source"]);h!=null&&hb(h,i);const g=d(e,["config"]);return g!=null&&ob(g,i),i}function cb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],Tn(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],ay(c));const h=d(e,["source"]);h!=null&&pb(h,i);const g=d(e,["config"]);return g!=null&&rb(g,i),i}function db(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>yb(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function fb(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vb(c))),f(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function hb(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],sl(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],ry(l)),i}function pb(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Tn(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],ay(l)),i}function mb(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],Cb(i));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const a=d(t,["_self"]);return a!=null&&f(e,["safetyAttributes"],iy(a)),e}function il(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],ny(i));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const a=d(t,["_self"]);a!=null&&f(e,["safetyAttributes"],sy(a));const l=d(t,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function gb(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["mask"],ny(i));const o=d(t,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function yb(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],sx(i)),e}function vb(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],ox(i)),e}function _b(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const x=d(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const A=d(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const R=d(t,["routingConfig"]);R!=null&&f(e,["routingConfig"],R);const D=d(t,["seed"]);D!=null&&f(e,["seed"],D);const q=d(t,["speechConfig"]);q!=null&&f(e,["speechConfig"],q);const M=d(t,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const H=d(t,["temperature"]);H!=null&&f(e,["temperature"],H);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const z=d(t,["topK"]);z!=null&&f(e,["topK"],z);const G=d(t,["topP"]);if(G!=null&&f(e,["topP"],G),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sb(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Le(t,o)),i}function Eb(t,e){const i={},o=d(e,["model"]);return o!=null&&f(i,["_url","name"],Le(t,o)),i}function wb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Tb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function bb(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function xb(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const o=d(t,["imageSize"]);o!=null&&f(e,["imageSize"],o);const a=d(t,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const l=d(t,["outputCompressionQuality"]);return l!=null&&f(e,["imageOutputOptions","compressionQuality"],l),e}function Cb(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ai(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function ny(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],Ai(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function sl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ai(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Tn(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Ai(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Ab(t,e,i){const o={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],j0(t,h)),o}function Rb(t,e,i){const o={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],j0(t,h)),o}function Nb(t,e){const i={},o=d(e,["config"]);return o!=null&&Ab(t,o,i),i}function Ib(t,e){const i={},o=d(e,["config"]);return o!=null&&Rb(t,o,i),i}function Mb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["_self"]);if(a!=null){let l=X0(a);Array.isArray(l)&&(l=l.map(c=>Jc(c))),f(e,["models"],l)}return e}function kb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["_self"]);if(a!=null){let l=X0(a);Array.isArray(l)&&(l=l.map(c=>Yc(c))),f(e,["models"],l)}return e}function Db(t){const e={},i=d(t,["maskMode"]);i!=null&&f(e,["maskMode"],i);const o=d(t,["segmentationClasses"]);o!=null&&f(e,["maskClasses"],o);const a=d(t,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Jc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["version"]);l!=null&&f(e,["version"],l);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],jb(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const m=d(t,["supportedGenerationMethods"]);m!=null&&f(e,["supportedActions"],m);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const S=d(t,["topP"]);S!=null&&f(e,["topP"],S);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const x=d(t,["thinking"]);return x!=null&&f(e,["thinking"],x),e}function Yc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["versionId"]);l!=null&&f(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>JT(S))),f(e,["endpoints"],_)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],Xb(g));const m=d(t,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),f(e,["checkpoints"],_)}return e}function Ub(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],YT(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],KT(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],_T(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Lb(t){const e={},i=d(t,["productImage"]);return i!=null&&f(e,["image"],Tn(i)),e}function Ob(t,e){const i={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const a=d(t,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const m=d(t,["addWatermark"]);e!==void 0&&m!=null&&f(e,["parameters","addWatermark"],m);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const T=d(t,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),i}function Pb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["source"]);a!=null&&Bb(a,i);const l=d(e,["config"]);return l!=null&&Ob(l,i),i}function qb(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>il(a))),f(e,["generatedImages"],o)}return e}function Bb(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],Tn(a));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Lb(h))),f(e,["instances[0]","productImages"],c)}return i}function Hb(t){const e={},i=d(t,["referenceImage"]);i!=null&&f(e,["referenceImage"],Tn(i));const o=d(t,["referenceId"]);o!=null&&f(e,["referenceId"],o);const a=d(t,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(t,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],Db(l));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],CT(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function iy(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function sy(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function Gb(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function Vb(t){const e={},i=d(t,["image"]);return i!=null&&f(e,["image"],Tn(i)),e}function zb(t,e){const i={},o=d(t,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);const a=d(t,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function $b(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["source"]);a!=null&&Jb(a,i);const l=d(e,["config"]);return l!=null&&zb(l,i),i}function Fb(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gb(a))),f(e,["generatedMasks"],o)}return e}function Jb(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Tn(a));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],Vb(l)),i}function Yb(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],jT(i));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function Kb(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],wb(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],Tb(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function oy(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>XT(S))),f(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function jb(t){const e={},i=d(t,["baseModel"]);i!=null&&f(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function Xb(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function Wb(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function Qb(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function Zb(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","name"],Le(t,o));const a=d(e,["config"]);return a!=null&&Wb(a,i),i}function ex(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["config"]);return a!=null&&Qb(a,i),i}function tx(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const m=d(t,["enhanceInputImage"]);e!==void 0&&m!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const T=d(t,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),i}function nx(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["_url","model"],Le(t,o));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],Tn(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&tx(c,i),i}function ix(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>il(l))),f(e,["generatedImages"],a)}return e}function sx(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Ai(o));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function ox(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Ai(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function rx(t){const e={},i=d(t,["image"]);i!=null&&f(e,["_self"],Tn(i));const o=d(t,["maskMode"]);return o!=null&&f(e,["maskMode"],o),e}function ax(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],sl(i));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function lx(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],Tn(i));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function ry(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const o=d(t,["videoBytes"]);o!=null&&f(e,["encodedVideo"],Ai(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function ay(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["videoBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Ai(o));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ux(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),i}function cx(t){const e={},i=d(t,["config"]);return i!=null&&ux(i,e),e}function dx(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function fx(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&dx(o,e),e}function hx(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function px(t,e){const i={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function mx(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],yx(c)),e}function gx(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(t,["fileName"]);o!=null&&f(e,["fileName"],o);const a=d(t,["config"]);return a!=null&&px(a,e),e}function yx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function vx(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function _x(t){const e={},i=d(t,["config"]);return i!=null&&vx(i,e),e}function Sx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function ly(t,e){const i={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function Ex(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const o=d(t,["config"]);return o!=null&&ly(o,e),e}function wx(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tx="Content-Type",bx="X-Server-Timeout",xx="User-Agent",Kc="x-goog-api-client",Cx="1.34.0",Ax=`google-genai-sdk/${Cx}`,Rx="v1beta1",Nx="v1beta";class Ix{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Rx,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Nx,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const a=[this.getRequestUrlInternal(i)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?o[a]=Object.assign(Object.assign({},o[a]),l):l!==void 0&&(o[a]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&Mx(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await t0(a),new zc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await t0(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return En(this,arguments,function*(){var o;const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield de(a.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const x=JSON.parse(_);if("error"in x){const A=JSON.parse(JSON.stringify(x.error)),R=A.status,D=A.code,q=`got status: ${R}. ${JSON.stringify(x)}`;if(D>=400&&D<600)throw new tl({message:q,status:D})}}catch(x){if(x.name==="ApiError")throw x}c+=_;let S=-1,T=0;for(;;){S=-1,T=0;for(const R of g){const D=c.indexOf(R);D!==-1&&(S===-1||D<S)&&(S=D,T=R.length)}if(S===-1)break;const x=c.substring(0,S);c=c.substring(S+T);const A=x.trim();if(A.startsWith(h)){const R=A.substring(h.length).trim();try{const D=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield de(new zc(D))}catch(D){throw new Error(`exception parsing stream chunk ${R}. ${D}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=Ax+" "+this.clientOptions.userAgentExtra;return e[xx]=i,e[Kc]=i,e[Tx]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))o.append(a,l);e.timeout&&e.timeout>0&&o.append(bx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},m=this.getFileName(e),v=W("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,g,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};o!=null&&ly(o,_);const S=await this.fetchUploadUrl(m,h,g,v,_,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function t0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(o);throw i>=400&&i<600?new tl({message:a,status:i}):new Error(a)}}function Mx(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const a=o(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kx="mcp_used/unknown";let Dx=!1;function uy(t){for(const e of t)if(Ux(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Dx}function cy(t){var e;const i=(e=t[Kc])!==null&&e!==void 0?e:"";t[Kc]=(i+` ${kx}`).trimStart()}function Ux(t){return t!==null&&typeof t=="object"&&t instanceof Sd}function Lx(t){return En(this,arguments,function*(i,o=100){let a,l=0;for(;l<o;){const c=yield de(i.listTools({cursor:a}));for(const h of c.tools)yield yield de(h),l++;if(!c.nextCursor)break;a=c.nextCursor}})}class Sd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Sd(e,i)}async initialize(){var e,i,o,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,wn(Lx(v))),m;m=await g.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const _=a;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),hE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ox(t,e,i){const o=new oE;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(o,a),e(o)}class Px{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Hx(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(M=>{m=M}),_=e.callbacks,S=function(){m({})},T=this.apiClient,x={onopen:S,onmessage:M=>{Ox(T,_.onmessage,M)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(M){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(M){}},A=this.webSocketFactory.create(g,Bx(c),x);A.connect(),await v;const q={setup:{model:Le(this.apiClient,e.model)}};return A.send(JSON.stringify(q)),new qx(A,this.apiClient)}}class qx{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=cT(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=uT(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Xs.PLAY)}pause(){this.sendPlaybackControl(Xs.PAUSE)}stop(){this.sendPlaybackControl(Xs.STOP)}resetContext(){this.sendPlaybackControl(Xs.RESET_CONTEXT)}close(){this.conn.close()}}function Bx(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function Hx(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Vx(t,e,i){const o=new sE;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const c=hT(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class zx{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new Px(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&uy(e.config.tools)&&cy(_);const S=Yx(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const K=this.apiClient.getApiKey();let ce="BidiGenerateContent",xe="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ce="BidiGenerateContentConstrained",xe="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ce}?${xe}=${K}`}let T=()=>{};const x=new Promise(K=>{T=K}),A=e.callbacks,R=function(){var K;(K=A==null?void 0:A.onopen)===null||K===void 0||K.call(A),T({})},D=this.apiClient,q={onopen:R,onmessage:K=>{Vx(D,A.onmessage,K)},onerror:(i=A==null?void 0:A.onerror)!==null&&i!==void 0?i:function(K){},onclose:(o=A==null?void 0:A.onclose)!==null&&o!==void 0?o:function(K){}},M=this.webSocketFactory.create(v,Jx(S),q);M.connect(),await x;let H=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const K=this.apiClient.getProject(),ce=this.apiClient.getLocation();H=`projects/${K}/locations/${ce}/`+H}let Y={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ja.AUDIO]}:e.config.responseModalities=[Ja.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],G=[];for(const K of z)if(this.isCallableTool(K)){const ce=K;G.push(await ce.tool())}else G.push(K);G.length>0&&(e.config.tools=G);const ie={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=lT(this.apiClient,ie):Y=aT(this.apiClient,ie),delete Y.config,M.send(JSON.stringify(Y)),new Fx(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const $x={turnComplete:!0};class Fx{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=dn(i.turns),e.isVertexAI()||(o=o.map(a=>nl(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Gx)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},$x),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:fT(e)}:i={realtimeInput:dT(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function Jx(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function Yx(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n0=10;function i0(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(eo(c)){a=!0;break}if(!a)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function eo(t){return"callTool"in t&&typeof t.callTool=="function"}function Kx(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>eo(a)))!==null&&o!==void 0?o:!1}function s0(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,a)=>{if(eo(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function o0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jx extends Xn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!Kx(i)||i0(i.config))return await this.generateContentInternal(g);const m=s0(i);if(m.length>0){const A=m.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let v,_;const S=dn(g.contents),T=(l=(a=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:n0;let x=0;for(;x<T&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const A=v.candidates[0].content,R=[];for(const D of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(eo(D)){const M=await D.callTool(v.functionCalls);R.push(...M)}x++,_={role:"user",parts:R},g.contents=dn(g.contents),g.contents.push(A),g.contents.push(_),o0(g.config)&&(S.push(A),S.push(_))}return o0(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var o,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),i0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const g=s0(i);if(g.length>0){const _=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(a=(o=i==null?void 0:i.config)===null||o===void 0?void 0:o.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var a;let l;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new es(jn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var o,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>eo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&uy(e.config.tools)){const g=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),cy(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var i,o,a;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(eo(c)){const h=c,g=await h.tool();for(const m of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var i,o,a;const l=(a=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:n0;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){return En(this,arguments,function*(){for(var S,T,x,A,R,D;h<l;){c&&(h++,c=!1);const Y=yield de(m.processParamsMaybeAddMcpUsage(_)),z=yield de(m.generateContentStreamInternal(Y)),G=[],ie=[];try{for(var q=!0,M=(T=void 0,wn(z)),H;H=yield de(M.next()),S=H.done,!S;q=!0){A=H.value,q=!1;const K=A;if(yield yield de(K),K.candidates&&(!((R=K.candidates[0])===null||R===void 0)&&R.content)){ie.push(K.candidates[0].content);for(const ce of(D=K.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(h<l&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ce.functionCall.name)){const xe=yield de(v.get(ce.functionCall.name).callTool([ce.functionCall]));G.push(...xe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(K){T={error:K}}finally{try{!q&&!S&&(x=M.return)&&(yield de(x.call(M)))}finally{if(T)throw T.error}}if(G.length>0){c=!0;const K=new tr;K.candidates=[{content:{role:"user",parts:G}}],yield yield de(K);const ce=[];ce.push(...ie),ce.push({role:"user",parts:G});const xe=dn(_.contents).concat(ce);_.contents=xe}else break}})})(this,g,e)}async generateContentInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Qg(this.apiClient,e);return h=W("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=e0(v),S=new tr;return Object.assign(S,_),S})}else{const m=Wg(this.apiClient,e);return h=W("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Zg(v),S=new tr;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Qg(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return En(this,arguments,function*(){var S,T,x,A;try{for(var R=!0,D=wn(_),q;q=yield de(D.next()),S=q.done,!S;R=!0){A=q.value,R=!1;const M=A,H=e0(yield de(M.json()));H.sdkHttpResponse={headers:M.headers};const Y=new tr;Object.assign(Y,H),yield yield de(Y)}}catch(M){T={error:M}}finally{try{!R&&!S&&(x=D.return)&&(yield de(x.call(D)))}finally{if(T)throw T.error}}})})}else{const m=Wg(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return En(this,arguments,function*(){var S,T,x,A;try{for(var R=!0,D=wn(_),q;q=yield de(D.next()),S=q.done,!S;R=!0){A=q.value,R=!1;const M=A,H=Zg(yield de(M.json()));H.sdkHttpResponse={headers:M.headers};const Y=new tr;Object.assign(Y,H),yield yield de(Y)}}catch(M){T={error:M}}finally{try{!R&&!S&&(x=D.return)&&(yield de(x.call(D)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=zT(this.apiClient,e);return h=W("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=FT(v),S=new Ug;return Object.assign(S,_),S})}else{const m=VT(this.apiClient,e);return h=W("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=$T(v),S=new Ug;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=nb(this.apiClient,e);return h=W("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=sb(v),S=new Lg;return Object.assign(S,_),S})}else{const m=tb(this.apiClient,e);return h=W("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ib(v),S=new Lg;return Object.assign(S,_),S})}}async editImageInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=qT(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=BT(g),v=new YS;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=nx(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=ix(g),v=new KS;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Pb(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=qb(g),v=new jS;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=$b(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=Fb(g),v=new XS;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Eb(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const m=Sb(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Ib(this.apiClient,e);return h=W("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=kb(v),S=new Og;return Object.assign(S,_),S})}else{const m=Nb(this.apiClient,e);return h=W("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Mb(v),S=new Og;return Object.assign(S,_),S})}}async update(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ex(this.apiClient,e);return h=W("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const m=Zb(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async delete(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=UT(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=OT(v),S=new Pg;return Object.assign(S,_),S})}else{const m=DT(this.apiClient,e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=LT(v),S=new Pg;return Object.assign(S,_),S})}}async countTokens(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=IT(this.apiClient,e);return h=W("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=kT(v),S=new qg;return Object.assign(S,_),S})}else{const m=NT(this.apiClient,e);return h=W("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=MT(v),S=new qg;return Object.assign(S,_),S})}}async computeTokens(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=wT(this.apiClient,e);return l=W("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=TT(g),v=new WS;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=cb(this.apiClient,e);return h=W("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=lb(v),S=new Ya;return Object.assign(S,_),S})}else{const m=ub(this.apiClient,e);return h=W("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=ab(v),S=new Ya;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xx extends Xn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=GS(e);return h=W("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=HS(e);return h=W("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=DS(e);return l=W("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wx(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Qx(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>aC(l))),f(e,["parts"],a)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function Zx(t,e,i){const o={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],rC(t,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),o}function eC(t,e){const i={},o=d(e,["config"]);return o!=null&&f(i,["config"],Zx(t,o,i)),i}function tC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function nC(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function sC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function oC(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],_d(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],Qx(Rt(x)));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let z=io(A);Array.isArray(z)&&(z=z.map(G=>uC(no(G)))),f(e,["setup","tools"],z)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&f(e,["setup","sessionResumption"],lC(R));const D=d(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const q=d(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","outputAudioTranscription"],q);const M=d(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function rC(t,e){const i={},o=d(e,["model"]);o!=null&&f(i,["setup","model"],Le(t,o));const a=d(e,["config"]);return a!=null&&f(i,["config"],oC(a,i)),i}function aC(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],tC(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],nC(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Wx(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function lC(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],iC(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],sC(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cC(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function dC(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=cC(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class fC extends Xn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=eC(this.apiClient,e);l=W("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=dC(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hC(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),i}function pC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&hC(o,e),e}function mC(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function gC(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function yC(t){const e={},i=d(t,["parent"]);i!=null&&f(e,["_url","parent"],i);const o=d(t,["config"]);return o!=null&&gC(o,e),e}function vC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const a=d(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _C extends Xn{constructor(e){super(),this.apiClient=e,this.list=async i=>new es(jn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mC(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pC(e);a=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yC(e);return l=W("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=vC(g),v=new QS;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends Xn{constructor(e,i=new _C(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new es(jn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cx(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hx(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fx(e);a=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_x(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=Sx(g),v=new ZS;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ex(e);return l=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=wx(g),v=new eE;return Object.assign(v,m),v})}}async importFile(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gx(e);return l=W("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>{const m=mx(g),v=new pd;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dy=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return dy=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const EC=()=>dy();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Xc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fn extends Error{}class kt extends fn{constructor(e,i,o,a){super(`${kt.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new ol({message:o,cause:Xc(i)});const l=i;return e===400?new hy(e,l,o,a):e===401?new py(e,l,o,a):e===403?new my(e,l,o,a):e===404?new gy(e,l,o,a):e===409?new yy(e,l,o,a):e===422?new vy(e,l,o,a):e===429?new _y(e,l,o,a):e>=500?new Sy(e,l,o,a):new kt(e,l,o,a)}}class Wc extends kt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ol extends kt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class fy extends ol{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hy extends kt{}class py extends kt{}class my extends kt{}class gy extends kt{}class yy extends kt{}class vy extends kt{}class _y extends kt{}class Sy extends kt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wC=/^[a-z][a-z0-9+.-]*:/i,TC=t=>wC.test(t);let Qc=t=>(Qc=Array.isArray,Qc(t));const bC=Qc;let xC=bC;const r0=xC;function CC(t){if(!t)return!0;for(const e in t)return!1;return!0}function AC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const RC=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fn(`${t} must be an integer`);if(e<0)throw new fn(`${t} must be a positive integer`);return e},NC=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IC=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Js="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MC(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kC=()=>{var t,e,i,o,a;const l=MC();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":l0(Deno.build.os),"X-Stainless-Arch":a0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":l0((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":a0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=DC();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DC(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const a0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",l0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ua;const UC=()=>Ua??(Ua=kC());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Ey(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function OC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Ey({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function wy(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function PC(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const o=t.getReader(),a=o.cancel();o.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qC=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ty=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ic(t,e,i){return Ty(),new File(t,e??"unknown_file",i)}function BC(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const HC=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const by=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",GC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&by(t),VC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function zC(t,e,i){if(Ty(),t=await t,GC(t))return t instanceof File?t:Ic([await t.arrayBuffer()],t.name);if(VC(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ic(await Zc(a),e,i)}const o=await Zc(t);if(e||(e=BC(t)),!(i!=null&&i.type)){const a=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Ic(o,e,i)}async function Zc(t){var e,i,o,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(by(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(HC(t))try{for(var h=!0,g=wn(t),m;m=await g.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const v=a;c.push(...await Zc(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${$C(t)}`)}return c}function $C(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xy{constructor(e){this._client=e}}xy._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cy(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const u0=Object.freeze(Object.create(null)),FC=(t=Cy)=>(function(i,...o){if(i.length===1)return i[0];let a=!1;const l=[],c=i.reduce((v,_,S)=>{var T,x,A;/[?#]/.test(_)&&(a=!0);const R=o[S];let D=(a?encodeURIComponent:t)(""+R);return S!==o.length&&(R==null||typeof R=="object"&&R.toString===((A=Object.getPrototypeOf((x=Object.getPrototypeOf((T=R.hasOwnProperty)!==null&&T!==void 0?T:u0))!==null&&x!==void 0?x:u0))===null||A===void 0?void 0:A.toString))&&(D=R+"",l.push({start:v.length+_.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),v+_+(S===o.length?"":D)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,T)=>{const x=" ".repeat(T.start-v),A="^".repeat(T.length);return v=T.start+T.length,S+x+A},"");throw new fn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),La=FC(Cy);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ay extends xy{create(e,i){var o;const{api_version:a=this._client.apiVersion}=e,l=ja(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new fn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new fn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(La`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(La`/${a}/interactions/${e}`,o)}cancel(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(La`/${a}/interactions/${e}/cancel`,o)}get(e,i={},o){var a;const l=i??{},{api_version:c=this._client.apiVersion}=l,h=ja(l,["api_version"]);return this._client.get(La`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}Ay._key=Object.freeze(["interactions"]);class Ry extends Ay{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let Oa;function Ed(t){let e;return(Oa??(e=new globalThis.TextEncoder,Oa=e.encode.bind(e)))(t)}let Pa;function c0(t){let e;return(Pa??(e=new globalThis.TextDecoder,Pa=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ed(e):e;this.buffer=JC([this.buffer,i]);const o=[];let a;for(;(a=YC(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){o.push(c0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=c0(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}rl.NEWLINE_CHARS=new Set([`
`,"\r"]);rl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function YC(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function KC(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xa={off:0,error:200,warn:300,info:400,debug:500},d0=(t,e,i)=>{if(t){if(AC(Xa,t))return t;Mt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Xa))}`)}};function ir(){}function qa(t,e,i){return!e||Xa[t]>Xa[i]?ir:e[t].bind(e)}const jC={error:ir,warn:ir,info:ir,debug:ir};let f0=new WeakMap;function Mt(t){var e;const i=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return jC;const a=f0.get(i);if(a&&a[0]===o)return a[1];const l={error:qa("error",i,o),warn:qa("warn",i,o),info:qa("info",i,o),debug:qa("debug",i,o)};return f0.set(i,[o,l]),l}const ji=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws{constructor(e,i,o){this.iterator=e,this.controller=i,this.client=o}static fromSSEResponse(e,i,o){let a=!1;const l=o?Mt(o):console;function c(){return En(this,arguments,function*(){var g,m,v,_;if(a)throw new fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var T=!0,x=wn(XC(e,i)),A;A=yield de(x.next()),g=A.done,!g;T=!0){_=A.value,T=!1;const R=_;if(!S)if(R.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield de(JSON.parse(R.data))}catch(D){throw l.error("Could not parse message into JSON:",R.data),l.error("From chunk:",R.raw),D}}}catch(R){m={error:R}}finally{try{!T&&!g&&(v=x.return)&&(yield de(v.call(x)))}finally{if(m)throw m.error}}S=!0}catch(R){if(jc(R))return yield de(void 0);throw R}finally{S||i.abort()}})}return new Ws(c,i,o)}static fromReadableStream(e,i,o){let a=!1;function l(){return En(this,arguments,function*(){var g,m,v,_;const S=new rl,T=wy(e);try{for(var x=!0,A=wn(T),R;R=yield de(A.next()),g=R.done,!g;x=!0){_=R.value,x=!1;const D=_;for(const q of S.decode(D))yield yield de(q)}}catch(D){m={error:D}}finally{try{!x&&!g&&(v=A.return)&&(yield de(v.call(A)))}finally{if(m)throw m.error}}for(const D of S.flush())yield yield de(D)})}function c(){return En(this,arguments,function*(){var g,m,v,_;if(a)throw new fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var T=!0,x=wn(l()),A;A=yield de(x.next()),g=A.done,!g;T=!0){_=A.value,T=!1;const R=_;S||R&&(yield yield de(JSON.parse(R)))}}catch(R){m={error:R}}finally{try{!T&&!g&&(v=x.return)&&(yield de(v.call(x)))}finally{if(m)throw m.error}}S=!0}catch(R){if(jc(R))return yield de(void 0);throw R}finally{S||i.abort()}})}return new Ws(c,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),i.push(c)}return l.shift()}});return[new Ws(()=>a(e),this.controller,this.client),new Ws(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return Ey({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:l}=await i.next();if(l)return o.close();const c=Ed(JSON.stringify(a)+`
`);o.enqueue(c)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}}function XC(t,e){return En(this,arguments,function*(){var o,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new fn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new fn("Attempted to iterate over a response with no body");const h=new QC,g=new rl,m=wy(t.body);try{for(var v=!0,_=wn(WC(m)),S;S=yield de(_.next()),o=S.done,!o;v=!0){c=S.value,v=!1;const T=c;for(const x of g.decode(T)){const A=h.decode(x);A&&(yield yield de(A))}}}catch(T){a={error:T}}finally{try{!v&&!o&&(l=_.return)&&(yield de(l.call(_)))}finally{if(a)throw a.error}}for(const T of g.flush()){const x=h.decode(T);x&&(yield yield de(x))}})}function WC(t){return En(this,arguments,function*(){var i,o,a,l;let c=new Uint8Array;try{for(var h=!0,g=wn(t),m;m=yield de(g.next()),i=m.done,!i;h=!0){l=m.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Ed(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let T;for(;(T=KC(c))!==-1;)yield yield de(c.slice(0,T)),c=c.slice(T)}}catch(v){o={error:v}}finally{try{!h&&!i&&(a=g.return)&&(yield de(a.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield de(c))})}class QC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=ZC(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function ZC(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eA(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return Mt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Ws.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await i.json():await i.text()})();return Mt(t).debug(`[${o}] response parsed`,ji({retryOfRequestLogID:a,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wd extends Promise{constructor(e,i,o=eA){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new wd(this.client,this.responsePromise,async(i,o)=>e(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ny=Symbol("brand.privateNullableHeaders");function*tA(t){if(!t)return;if(Ny in t){const{values:o,nulls:a}=t;yield*o.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():r0(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=r0(o[1])?o[1]:[o[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const nr=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[l,c]of tA(o)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),i.add(h)):(e.append(l,c),i.delete(h))}}return{[Ny]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mc=t=>{var e,i,o,a,l,c;if(typeof globalThis.process<"u")return(o=(i=(e=AS)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Iy;class al{constructor(e){var i,o,a,l,c,h,g,{baseURL:m=Mc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Mc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,S=ja(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:v,apiVersion:_},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(o=T.timeout)!==null&&o!==void 0?o:al.DEFAULT_TIMEOUT,this.logger=(a=T.logger)!==null&&a!==void 0?a:console;const x="warn";this.logLevel=x,this.logLevel=(c=(l=d0(T.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:d0(Mc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:x,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:LC(),this.encoder=qC,this._options=T,this.apiKey=v,this.apiVersion=_,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=nr([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return nr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return nr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new fn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Js}`}defaultIdempotencyKey(){return`stainless-node-retry-${EC()}`}makeStatusError(e,i,o,a){return kt.generate(e,i,o,a)}buildURL(e,i,o){const a=!this.baseURLOverridden()&&o||this.baseURL,l=TC(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return CC(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new wd(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var a,l,c;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:m,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(m,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(Mt(this).debug(`[${S}] sending request`,ji({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:m.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Wc;const A=new AbortController,R=await this.fetchWithTimeout(v,m,_,A).catch(Xc),D=Date.now();if(R instanceof globalThis.Error){const M=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Wc;const H=jc(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(i)return Mt(this).info(`[${S}] connection ${H?"timed out":"failed"} - ${M}`),Mt(this).debug(`[${S}] connection ${H?"timed out":"failed"} (${M})`,ji({retryOfRequestLogID:o,url:v,durationMs:D-x,message:R.message})),this.retryRequest(h,i,o??S);throw Mt(this).info(`[${S}] connection ${H?"timed out":"failed"} - error; no more retries left`),Mt(this).debug(`[${S}] connection ${H?"timed out":"failed"} (error; no more retries left)`,ji({retryOfRequestLogID:o,url:v,durationMs:D-x,message:R.message})),H?new fy:new ol({cause:R})}const q=`[${S}${T}] ${m.method} ${v} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${D-x}ms`;if(!R.ok){const M=await this.shouldRetry(R);if(i&&M){const K=`retrying, ${i} attempts remaining`;return await PC(R.body),Mt(this).info(`${q} - ${K}`),Mt(this).debug(`[${S}] response error (${K})`,ji({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:D-x})),this.retryRequest(h,i,o??S,R.headers)}const H=M?"error; no more retries left":"error; not retryable";Mt(this).info(`${q} - ${H}`);const Y=await R.text().catch(K=>Xc(K).message),z=NC(Y),G=z?void 0:Y;throw Mt(this).debug(`[${S}] response error (${H})`,ji({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,message:G,durationMs:Date.now()-x})),this.makeStatusError(R.status,z,G,R.headers)}return Mt(this).info(q),Mt(this).debug(`[${S}] response start`,ji({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:D-x})),{response:R,options:h,controller:A,requestLogID:S,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,i,o,a){const l=i||{},{signal:c,method:h}=l,g=ja(l,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const m=setTimeout(()=>a.abort(),o),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){var l;let c;const h=a==null?void 0:a.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=a==null?void 0:a.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,m)}return await IC(c),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var o,a,l;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:v}=c,_=this.buildURL(g,m,v);"timeout"in c&&RC("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:T}=this.buildBody({options:c}),x=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:x},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=nr([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),UC()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=nr([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:OC(e)}:this.encoder({body:e,headers:o})}}al.DEFAULT_TIMEOUT=6e4;class gt extends al{constructor(){super(...arguments),this.interactions=new Ry(this)}}Iy=gt;gt.GeminiNextGenAPIClient=Iy;gt.GeminiNextGenAPIClientError=fn;gt.APIError=kt;gt.APIConnectionError=ol;gt.APIConnectionTimeoutError=fy;gt.APIUserAbortError=Wc;gt.NotFoundError=gy;gt.ConflictError=yy;gt.RateLimitError=_y;gt.BadRequestError=hy;gt.AuthenticationError=py;gt.InternalServerError=Sy;gt.PermissionDeniedError=my;gt.UnprocessableEntityError=vy;gt.toFile=zC;gt.Interactions=Ry;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nA(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function iA(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function sA(t,e){const i={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(i,["sdkHttpResponse"],o),i}function oA(t,e){const i={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(i,["sdkHttpResponse"],o),i}function rA(t,e,i){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function aA(t,e,i){const o={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],h0(T))}else if(a==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],h0(T))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(m==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function lA(t,e){const i={},o=d(t,["baseModel"]);o!=null&&f(i,["baseModel"],o);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&_A(l);const c=d(t,["config"]);return c!=null&&rA(c,i),i}function uA(t,e){const i={},o=d(t,["baseModel"]);o!=null&&f(i,["baseModel"],o);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&SA(l,i,e);const c=d(t,["config"]);return c!=null&&aA(c,i,e),i}function cA(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function dA(t,e){const i={},o=d(t,["name"]);return o!=null&&f(i,["_url","name"],o),i}function fA(t,e,i){const o={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function hA(t,e,i){const o={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function pA(t,e){const i={},o=d(t,["config"]);return o!=null&&fA(o,i),i}function mA(t,e){const i={},o=d(t,["config"]);return o!=null&&hA(o,i),i}function gA(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>My(h))),f(i,["tuningJobs"],c)}return i}function yA(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>ed(h))),f(i,["tuningJobs"],c)}return i}function vA(t,e){const i={},o=d(t,["name"]);o!=null&&f(i,["model"],o);const a=d(t,["name"]);return a!=null&&f(i,["endpoint"],a),i}function _A(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function SA(t,e,i){const o={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function My(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],Y0(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(t,["description"]);v!=null&&f(i,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(i,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&f(i,["tunedModel"],vA(S)),i}function ed(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],Y0(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(i,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(t,["error"]);v!=null&&f(i,["error"],v);const _=d(t,["description"]);_!=null&&f(i,["description"],_);const S=d(t,["baseModel"]);S!=null&&f(i,["baseModel"],S);const T=d(t,["tunedModel"]);T!=null&&f(i,["tunedModel"],T);const x=d(t,["preTunedModel"]);x!=null&&f(i,["preTunedModel"],x);const A=d(t,["supervisedTuningSpec"]);A!=null&&f(i,["supervisedTuningSpec"],A);const R=d(t,["preferenceOptimizationSpec"]);R!=null&&f(i,["preferenceOptimizationSpec"],R);const D=d(t,["tuningDataStats"]);D!=null&&f(i,["tuningDataStats"],D);const q=d(t,["encryptionSpec"]);q!=null&&f(i,["encryptionSpec"],q);const M=d(t,["partnerModelTuningSpec"]);M!=null&&f(i,["partnerModelTuningSpec"],M);const H=d(t,["customBaseModel"]);H!=null&&f(i,["customBaseModel"],H);const Y=d(t,["experiment"]);Y!=null&&f(i,["experiment"],Y);const z=d(t,["labels"]);z!=null&&f(i,["labels"],z);const G=d(t,["outputUri"]);G!=null&&f(i,["outputUri"],G);const ie=d(t,["pipelineJob"]);ie!=null&&f(i,["pipelineJob"],ie);const K=d(t,["serviceAccount"]);K!=null&&f(i,["serviceAccount"],K);const ce=d(t,["tunedModelDisplayName"]);ce!=null&&f(i,["tunedModelDisplayName"],ce);const xe=d(t,["veoTuningSpec"]);return xe!=null&&f(i,["veoTuningSpec"],xe),i}function EA(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&f(i,["sdkHttpResponse"],o);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(t,["done"]);c!=null&&f(i,["done"],c);const h=d(t,["error"]);return h!=null&&f(i,["error"],h),i}function h0(t,e){const i={},o=d(t,["gcsUri"]);o!=null&&f(i,["validationDatasetUri"],o);const a=d(t,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wA extends Xn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(jn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Vc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=dA(e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>ed(v))}else{const m=cA(e);return h=W("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>My(v))}}async listInternal(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mA(e);return h=W("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=yA(v),S=new Bg;return Object.assign(S,_),S})}else{const m=pA(e);return h=W("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=gA(v),S=new Bg;return Object.assign(S,_),S})}}async cancel(e){var i,o,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=iA(e);return h=W("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=oA(v),S=new Hg;return Object.assign(S,_),S})}else{const m=nA(e);return h=W("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=sA(v),S=new Hg;return Object.assign(S,_),S})}}async tuneInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=uA(e,e);return l=W("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>ed(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lA(e);return l=W("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>EA(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TA{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const bA=1024*1024*8,xA=3,CA=1e3,AA=2,Wa="x-goog-upload-status";async function RA(t,e,i){var o;const a=await ky(t,e,i),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Wa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function NA(t,e,i){var o;const a=await ky(t,e,i),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Wa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=G0(l),h=new md;return Object.assign(h,c),h}async function ky(t,e,i){var o,a;let l=0,c=0,h=new zc(new Response),g="upload";for(l=t.size;c<l;){const m=Math.min(bA,l-c),v=t.slice(c,c+m);c+m>=l&&(g+=", finalize");let _=0,S=CA;for(;_<xA&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Wa]));)_++,await MA(S),S=S*AA;if(c+=m,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Wa])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function IA(t){return{size:t.size,type:t.type}}function MA(t){return new Promise(e=>setTimeout(e,t))}class kA{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RA(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NA(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DA{create(e,i,o){return new UA(e,i,o)}}class UA{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p0="x-goog-api-key";class LA{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(p0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(p0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OA="gl-node/";class PA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=MS(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new LA(this.apiKey);this.apiClient=new Ix({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:OA+"web",uploader:new kA,downloader:new TA}),this.models=new jx(this.apiClient),this.live=new zx(this.apiClient,a,new DA),this.batches=new rw(this.apiClient),this.chats=new Gw(this.models,this.apiClient),this.caches=new qw(this.apiClient),this.files=new Ww(this.apiClient),this.operations=new Xx(this.apiClient),this.authTokens=new fC(this.apiClient),this.tunings=new wA(this.apiClient),this.fileSearchStores=new SC(this.apiClient)}}const qA=()=>new PA({apiKey:"AIzaSyCTegmx9Z2q1EsBBFYaNy7oJgDWFSfCqIU"}),BA=async t=>{try{return(await qA().models.generateContent({model:"gemini-3-flash-preview",contents:`You are a world-class barista and social media manager for "Wavegram", a premium third-wave coffee community. Write a short, aesthetic "Wave" post (max 280 characters) about this topic: "${t}". Use an engaging, slightly sophisticated yet passionate tone about the art of the perfect pour. Include relevant emojis (like , , , ) and 1-2 coffee-related hashtags.`,config:{temperature:.8,topP:.95}})).text||"Failed to brew content."}catch(e){return console.error("AI Generation error:",e),"The milk is frothing... try again in a bit."}};function ll(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function HA(t,e,i,o){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{m(o.next(v))}catch(_){c(_)}}function g(v){try{m(o.throw(v))}catch(_){c(_)}}function m(v){v.done?l(v.value):a(v.value).then(h,g)}m((o=o.apply(t,e||[])).next())})}const GA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Td extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class VA extends Td{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class m0 extends Td{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class g0 extends Td{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var td;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(td||(td={}));class zA{constructor(e,{headers:i={},customFetch:o,region:a=td.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=GA(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return HA(this,arguments,void 0,function*(i,o={}){var a;let l,c;try{const{headers:h,method:g,body:m,signal:v,timeout:_}=o;let S={},{region:T}=o;T||(T=this.region);const x=new URL(`${this.url}/${i}`);T&&T!=="any"&&(S["x-region"]=T,x.searchParams.set("forceFunctionRegion",T));let A;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",A=m):typeof m=="string"?(S["Content-Type"]="text/plain",A=m):typeof FormData<"u"&&m instanceof FormData?A=m:(S["Content-Type"]="application/json",A=JSON.stringify(m)):A=m;let R=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(R=c.signal,v.addEventListener("abort",()=>c.abort())):R=c.signal);const D=yield this.fetch(x.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:A,signal:R}).catch(Y=>{throw new VA(Y)}),q=D.headers.get("x-relay-error");if(q&&q==="true")throw new m0(D);if(!D.ok)throw new g0(D);let M=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),H;return M==="application/json"?H=yield D.json():M==="application/octet-stream"||M==="application/pdf"?H=yield D.blob():M==="text/event-stream"?H=D:M==="multipart/form-data"?H=yield D.formData():H=yield D.text(),{data:H,error:null,response:D}}catch(h){return{data:null,error:h,response:h instanceof g0||h instanceof m0?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var $A=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},FA=class{constructor(t){var e,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,m=l.status,v=l.statusText;if(l.ok){var _,S;if(i.method!=="HEAD"){var T;const D=await l.text();D===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((T=i.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?h=D:h=JSON.parse(D))}const A=(_=i.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");A&&R&&R.length>1&&(g=parseInt(R[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,m=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var x;const A=await l.text();try{c=JSON.parse(A),Array.isArray(c)&&l.status===404&&(h=[],c=null,m=200,v="OK")}catch{l.status===404&&A===""?(m=204,v="No Content"):c={message:A}}if(c&&i.isMaybeSingle&&(!(c==null||(x=c.details)===null||x===void 0)&&x.includes("0 rows"))&&(c=null,m=200,v="OK"),c&&i.shouldThrowOnError)throw new $A(c)}return{error:c,data:h,count:g,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let h="";const g=l==null?void 0:l.cause;if(g){var m,v,_,S;const x=(m=g==null?void 0:g.message)!==null&&m!==void 0?m:"",A=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";h=`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(S=g==null?void 0:g.name)!==null&&S!==void 0?S:"Error"}: ${x}`,A&&(h+=` (${A})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var T;h=(T=l==null?void 0:l.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},JA=class extends FA{select(t){let e=!1;const i=(t??"*").split("").map(o=>/\s/.test(o)&&!e?"":(o==='"'&&(e=!e),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"offset":`${o}.offset`,l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:o=!1,wal:a=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const y0=new RegExp("[,()]");var Ys=class extends JA{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&y0.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&y0.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},YA=class{constructor(t,{headers:e={},schema:i,fetch:o}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=o}select(t,e){const{head:i=!1,count:o}=e??{},a=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",c),o&&this.headers.append("Prefer",`count=${o}`),new Ys({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:i=!0}={}){var o;const a="POST";if(e&&this.headers.append("Prefer",`count=${e}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ys({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:o,defaultToNull:a=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(h.length>0){const g=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new Ys({method:c,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var i;const o="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ys({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:t}={}){var e;const i="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ys({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},KA=class Dy{constructor(e,{headers:i={},schema:o,fetch:a}={}){this.url=e,this.headers=new Headers(i),this.schemaName=o,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YA(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dy(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:o=!1,get:a=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let m;o||a?(h=o?"HEAD":"GET",Object.entries(i).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{g.searchParams.append(_,S)})):(h="POST",m=i);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new Ys({method:h,url:g,headers:v,schema:this.schemaName,body:m,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class jA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const XA="2.89.0",WA=`realtime-js/${XA}`,Uy="1.0.0",QA="2.0.0",v0=Uy,nd=1e4,ZA=1e3,e1=100;var bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bi||(bi={}));var ht;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ht||(ht={}));var Sn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Sn||(Sn={}));var id;(function(t){t.websocket="websocket"})(id||(id={}));var Wi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Wi||(Wi={}));class t1{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,o;const a=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,o;const a=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,o){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+m.length+_.length,T=new ArrayBuffer(this.HEADER_LENGTH+S);let x=new DataView(T),A=0;x.setUint8(A++,this.KINDS.userBroadcastPush),x.setUint8(A++,g.length),x.setUint8(A++,h.length),x.setUint8(A++,c.length),x.setUint8(A++,m.length),x.setUint8(A++,_.length),x.setUint8(A++,i),Array.from(g,D=>x.setUint8(A++,D.charCodeAt(0))),Array.from(h,D=>x.setUint8(A++,D.charCodeAt(0))),Array.from(c,D=>x.setUint8(A++,D.charCodeAt(0))),Array.from(m,D=>x.setUint8(A++,D.charCodeAt(0))),Array.from(_,D=>x.setUint8(A++,D.charCodeAt(0)));var R=new Uint8Array(T.byteLength+o.byteLength);return R.set(new Uint8Array(T),0),R.set(new Uint8Array(o),T.byteLength),R.buffer}decode(e,i){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return i(o)}if(typeof e=="string"){const o=JSON.parse(e),[a,l,c,h,g]=o;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),o=i.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,o){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const m=o.decode(e.slice(g,g+a));g=g+a;const v=o.decode(e.slice(g,g+l));g=g+l;const _=o.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),T=h===this.JSON_ENCODING?JSON.parse(o.decode(S)):S,x={type:this.BROADCAST_EVENT,event:v,payload:T};return c>0&&(x.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>i.includes(o)))}}class Ly{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Je||(Je={}));const _0=(t,e,i={})=>{var o;const a=(o=i.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=n1(c,t,e,a),l),{}):{}},n1=(t,e,i,o)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,c=i[t];return l&&!o.includes(l)?Oy(l,c):sd(c)},Oy=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return r1(e,i)}switch(t){case Je.bool:return i1(e);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return s1(e);case Je.json:case Je.jsonb:return o1(e);case Je.timestamp:return a1(e);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return sd(e);default:return sd(e)}},sd=t=>t,i1=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},s1=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},r1=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,o=t[i];if(t[0]==="{"&&o==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>Oy(e,h))}return t},a1=t=>typeof t=="string"?t.replace(" ","T"):t,Py=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class kc{constructor(e,i,o={},a=nd){this.channel=e,this.event=i,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var S0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(S0||(S0={}));class or{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=or.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=or.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=or.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(m,v)=>{c[m]||(g[m]=v)}),this.map(c,(m,v)=>{const _=l[m];if(_){const S=v.map(R=>R.presence_ref),T=_.map(R=>R.presence_ref),x=v.filter(R=>T.indexOf(R.presence_ref)<0),A=_.filter(R=>S.indexOf(R.presence_ref)<0);x.length>0&&(h[m]=x),A.length>0&&(g[m]=A)}else h[m]=v}),this.syncDiff(l,{joins:h,leaves:g},o,a)}static syncDiff(e,i,o,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var m;const v=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(T=>T.presence_ref),S=v.filter(T=>_.indexOf(T.presence_ref)<0);e[h].unshift(...S)}o(h,v,g)}),this.map(c,(h,g)=>{let m=e[h];if(!m)return;const v=g.map(_=>_.presence_ref);m=m.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=m,a(h,m,g),m.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const a=e[o];return"metas"in a?i[o]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[o]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var E0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(E0||(E0={}));var rr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(rr||(rr={}));var Kn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kn||(Kn={}));class Qs{constructor(e,i={config:{}},o){var a,l;if(this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new kc(this,Sn.join,this.params,this.timeout),this.rejoinTimer=new Ly(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new or(this),this.broadcastEndpointURL=Py(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var o,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,m=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(T=>T.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[rr.PRESENCE]&&this.bindings[rr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(Kn.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(Kn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:T})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(Kn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,R=(x=A==null?void 0:A.length)!==null&&x!==void 0?x:0,D=[];for(let q=0;q<R;q++){const M=A[q],{filter:{event:H,schema:Y,table:z,filter:G}}=M,ie=T&&T[q];if(ie&&ie.event===H&&Qs.isFilterValueEqual(ie.schema,Y)&&Qs.isFilterValueEqual(ie.table,z)&&Qs.isFilterValueEqual(ie.filter,G))D.push(Object.assign(Object.assign({},M),{id:ie.id}));else{this.unsubscribe(),this.state=ht.errored,e==null||e(Kn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Kn.SUBSCRIBED);return}}).receive("error",T=>{this.state=ht.errored,e==null||e(Kn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===ht.joined&&e===rr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,o)}async httpSend(e,i,o={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const m=await h.json();g=m.error||m.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var o,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const m=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ht.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new kc(this,Sn.leave,{},e),o.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const a=new AbortController,l=setTimeout(()=>a.abort(),o),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new kc(this,e,i,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>e1){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:v}=Sn;if(o&&[h,g,m,v].indexOf(c)>=0&&o!==this._joinRef())return;let S=this._onMessage(c,i,o);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var x,A,R;return((x=T.filter)===null||x===void 0?void 0:x.event)==="*"||((R=(A=T.filter)===null||A===void 0?void 0:A.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(T=>T.callback(S,o)):(l=this.bindings[c])===null||l===void 0||l.filter(T=>{var x,A,R,D,q,M;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const H=T.id,Y=(x=T.filter)===null||x===void 0?void 0:x.event;return H&&((A=i.ids)===null||A===void 0?void 0:A.includes(H))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((R=i.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const H=(q=(D=T==null?void 0:T.filter)===null||D===void 0?void 0:D.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return H==="*"||H===((M=i==null?void 0:i.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof S=="object"&&"ids"in S){const x=S.data,{schema:A,table:R,commit_timestamp:D,type:q,errors:M}=x;S=Object.assign(Object.assign({},{schema:A,table:R,commit_timestamp:D,eventType:q,new:{},old:{},errors:M}),this._getPayloadRecords(x))}T.callback(S,o)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:o};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&Qs.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sn.close,{},e)}_onError(e){this._on(Sn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=_0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=_0(e.columns,e.old_record)),i}}const Dc=()=>{},Ba={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l1=[1e3,2e3,5e3,1e4],u1=1e4,c1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d1{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nd,this.transport=null,this.heartbeatIntervalMs=Ba.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dc,this.ref=0,this.reconnectTimer=null,this.vsn=v0,this.logger=Dc,this.conn=null,this.sendBuffer=[],this.serializer=new t1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${id.websocket}`,this.httpEndpoint=Py(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case bi.connecting:return Wi.Connecting;case bi.open:return Wi.Open;case bi.closing:return Wi.Closing;default:return Wi.Closed}}isConnected(){return this.connectionState()===Wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===o);if(a)return a;{const l=new Qs(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:o,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${o} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ZA,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ba.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${o} ${a} ${h}`.trim(),l),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bi.open||this.conn.readyState===bi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${o}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([c1],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,o=!1;if(e)i=e,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:WA};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(Sn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Ly(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ba.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,a,l,c,h,g,m,v,_,S,T;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:nd,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ba.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Dc,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:v0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(x=>l1[x-1]||u1),this.vsn){case Uy:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((x,A)=>A(JSON.stringify(x))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((x,A)=>A(JSON.parse(x)));break;case QA:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ar=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function f1(t,e,i){const o=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&o.searchParams.set(a,l);return o.toString()}async function h1(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function p1(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:a,body:l,headers:c}){const h=f1(t.baseUrl,o,a),g=await h1(t.auth),m=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await m.text(),_=(m.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!m.ok){const T=_?S:void 0,x=T==null?void 0:T.error;throw new ar((x==null?void 0:x.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:T})}return{status:m.status,headers:m.headers,data:S}}}}function Ha(t){return t.join("")}var m1=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ha(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ha(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ha(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ha(t.namespace)}`}),!0}catch(e){if(e instanceof ar&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof ar&&i.status===409)return;throw i}}};function Hs(t){return t.join("")}var g1=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof ar&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof ar&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},y1=class{constructor(t){var o;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=p1({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(o=t.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new m1(this.client,e),this.tableOps=new g1(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ul=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Qe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var v1=class extends ul{constructor(t,e,i){super(t),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},od=class extends ul{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const bd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_1=()=>Response,rd=t=>{if(Array.isArray(t))return t.map(i=>rd(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,o])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=rd(o)}),e},S1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},E1=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function lr(t){"@babel/helpers - typeof";return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(t)}function w1(t,e){if(lr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var o=i.call(t,e);if(lr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T1(t){var e=w1(t,"string");return lr(e)=="symbol"?e:e+""}function b1(t,e,i){return(e=T1(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function w0(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,o)}return i}function ue(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?w0(Object(i),!0).forEach(function(o){b1(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w0(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}const Uc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},x1=async(t,e,i)=>{t instanceof await _1()&&!(i!=null&&i.noResolveJson)?t.json().then(o=>{const a=t.status||500,l=(o==null?void 0:o.statusCode)||a+"";e(new v1(Uc(o),a,l))}).catch(o=>{e(new od(Uc(o),o))}):e(new od(Uc(t),t))},C1=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!o?a:(S1(o)?(a.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,e!=null&&e.duplex&&(a.duplex=e.duplex),ue(ue({},a),i))};async function hr(t,e,i,o,a,l){return new Promise((c,h)=>{t(i,C1(e,o,a,l)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>x1(g,h,o))})}async function ur(t,e,i,o){return hr(t,"GET",e,i,o)}async function _n(t,e,i,o,a){return hr(t,"POST",e,o,a,i)}async function ad(t,e,i,o,a){return hr(t,"PUT",e,o,a,i)}async function A1(t,e,i,o){return hr(t,"HEAD",e,ue(ue({},i),{},{noResolveJson:!0}),o)}async function xd(t,e,i,o,a){return hr(t,"DELETE",e,o,a,i)}var R1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}}};let qy;qy=Symbol.toStringTag;var N1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[qy]="BlobDownloadBuilder",this.promise=null}asStream(){return new R1(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}}};const I1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},T0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var M1=class{constructor(t,e={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=i,this.fetch=bd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,i,o){var a=this;try{let l;const c=ue(ue({},T0),o);let h=ue(ue({},a.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),o!=null&&o.headers&&(h=ue(ue({},h),o.headers));const m=a._removeEmptyFolders(e),v=a._getFinalPath(m),_=await(t=="PUT"?ad:_n)(a.fetch,`${a.url}/object/${v}`,l,ue({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Qe(l))return{data:null,error:l};throw l}}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,o){var a=this;const l=a._removeEmptyFolders(t),c=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${c}`);h.searchParams.set("token",e);try{let g;const m=ue({upsert:T0.upsert},o),v=ue(ue({},a.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",m.cacheControl)):(g=i,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:l,fullPath:(await ad(a.fetch,h.toString(),g,{headers:v})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(Qe(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(t,e){var i=this;try{let o=i._getFinalPath(t);const a=ue({},i.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await _n(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:a}),c=new URL(i.url+l.url),h=c.searchParams.get("token");if(!h)throw new ul("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:h},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var o=this;try{return{data:await _n(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers}),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}}async copy(t,e,i){var o=this;try{return{data:{path:(await _n(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers})).Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,i){var o=this;try{let a=o._getFinalPath(t),l=await _n(o.fetch,`${o.url}/object/sign/${a}`,ue({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:o.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${o.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,i){var o=this;try{const a=await _n(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:e,paths:t},{headers:o.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>ue(ue({},c),{},{signedUrl:c.signedURL?encodeURI(`${o.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}}download(t,e){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>ur(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new N1(c,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);try{return{data:rd(await ur(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await A1(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(Qe(o)&&o instanceof od){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}}getPublicUrl(t,e){const i=this._getFinalPath(t),o=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&o.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&o.push(c);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;try{return{data:await xd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async list(t,e,i){var o=this;try{const a=ue(ue(ue({},I1),e),{},{prefix:t||""});return{data:await _n(o.fetch,`${o.url}/object/list/${o.bucketId}`,a,{headers:o.headers},i),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}}async listV2(t,e){var i=this;try{const o=ue({},t);return{data:await _n(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},e),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const By="2.89.0",Hy={"X-Client-Info":`storage-js/${By}`};var k1=class{constructor(t,e={},i,o){this.shouldThrowOnError=!1;const a=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=ue(ue({},Hy),e),this.fetch=bd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const i=e.listBucketOptionsToQueryString(t);return{data:await ur(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await ur(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async createBucket(t,e={public:!1}){var i=this;try{return{data:await _n(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}}async updateBucket(t,e){var i=this;try{return{data:await ad(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}}async emptyBucket(t){var e=this;try{return{data:await _n(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await xd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},D1=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Hy),e),this.fetch=bd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await _n(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async listBuckets(t){var e=this;try{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const o=i.toString(),a=o?`${e.url}/bucket?${o}`:`${e.url}/bucket`;return{data:await ur(e.fetch,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await xd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}}from(t){var e=this;if(!E1(t))throw new ul("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new y1({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(a,h),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const Cd={"X-Client-Info":`storage-js/${By}`,"Content-Type":"application/json"};var Gy=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Qt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Lc=class extends Gy{constructor(t,e,i){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U1=class extends Gy{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ad=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},b0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),O1=async(t,e,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const o=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new Lc(b0(l),o,c))}).catch(()=>{const l=o+"";e(new Lc(a.statusText||`HTTP ${o} error`,o,l))});else{const l=o+"";e(new Lc(a.statusText||`HTTP ${o} error`,o,l))}}else e(new U1(b0(t),t))},P1=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return o?(L1(o)?(a.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,ue(ue({},a),i)):a};async function q1(t,e,i,o,a,l){return new Promise((c,h)=>{t(i,P1(e,o,a,l)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const m=g.headers.get("content-type");return!m||!m.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>O1(g,h,o))})}async function Zt(t,e,i,o,a){return q1(t,"POST",e,o,a,i)}var B1=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cd),e),this.fetch=Ad(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async getIndex(t,e){var i=this;try{return{data:await Zt(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qt(o))return{data:null,error:o};throw o}}async listIndexes(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async deleteIndex(t,e){var i=this;try{return{data:await Zt(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Qt(o))return{data:null,error:o};throw o}}},H1=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cd),e),this.fetch=Ad(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Zt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async getVectors(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Zt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async queryVectors(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Zt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}},G1=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cd),e),this.fetch=Ad(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async listBuckets(t={}){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Zt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}},V1=class extends G1{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new z1(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},z1=class extends B1{constructor(t,e,i,o){super(t,e,o),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new $1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},$1=class extends H1{constructor(t,e,i,o,a){super(t,e,a),this.vectorBucketName=i,this.indexName=o}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},F1=class extends k1{constructor(t,e={},i,o){super(t,e,i,o)}from(t){return new M1(this.url,this.headers,t,this.fetch)}get vectors(){return new V1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new D1(this.url+"/iceberg",this.headers,this.fetch)}};const Vy="2.89.0",Ks=30*1e3,ld=3,Oc=ld*Ks,J1="http://localhost:9999",Y1="supabase.auth.token",K1={"X-Client-Info":`gotrue-js/${Vy}`},ud="X-Supabase-Api-Version",zy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X1=600*1e3;class cr extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class W1 extends cr{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function Q1(t){return se(t)&&t.name==="AuthApiError"}class Qi extends cr{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class Qn extends cr{constructor(e,i,o,a){super(e,o,a),this.name=i,this.status=o}}class Xt extends Qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z1(t){return se(t)&&t.name==="AuthSessionMissingError"}class Gs extends Qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ga extends Qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Va extends Qn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eR(t){return se(t)&&t.name==="AuthImplicitGrantRedirectError"}class x0 extends Qn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tR extends Qn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cd extends Qn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Pc(t){return se(t)&&t.name==="AuthRetryableFetchError"}class C0 extends Qn{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class dd extends Qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A0=` 	
\r=`.split(""),nR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<A0.length;e+=1)t[A0[e].charCodeAt(0)]=-2;for(let e=0;e<Qa.length;e+=1)t[Qa[e].charCodeAt(0)]=e;return t})();function R0(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Qa[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(Qa[o]),e.queuedBits-=6}}function $y(t,e,i){const o=nR[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function N0(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{oR(c,o,i)};for(let c=0;c<t.length;c+=1)$y(t.charCodeAt(c),a,l);return e.join("")}function iR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sR(t,e){for(let i=0;i<t.length;i+=1){let o=t.charCodeAt(i);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}iR(o,e)}}function oR(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function to(t){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)$y(t.charCodeAt(a),i,o);return new Uint8Array(e)}function rR(t){const e=[];return sR(t,i=>e.push(i)),new Uint8Array(e)}function Zi(t){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};return t.forEach(a=>R0(a,i,o)),R0(null,i,o),e.join("")}function aR(t){return Math.round(Date.now()/1e3)+t}function lR(){return Symbol("auth-callback")}const bt=()=>typeof window<"u"&&typeof document<"u",Yi={tested:!1,writable:!1},Fy=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yi.tested)return Yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yi.tested=!0,Yi.writable=!0}catch{Yi.tested=!0,Yi.writable=!1}return Yi.writable};function uR(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((o,a)=>{e[a]=o}),e}const Jy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",js=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Ki=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Tt=async(t,e)=>{await t.removeItem(e)};class cl{constructor(){this.promise=new cl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}cl.promiseConstructor=Promise;function qc(t){const e=t.split(".");if(e.length!==3)throw new dd("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!j1.test(e[o]))throw new dd("JWT not in base64url format");return{header:JSON.parse(N0(e[0])),payload:JSON.parse(N0(e[1])),signature:to(e[2]),raw:{header:e[0],payload:e[1]}}}async function dR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fR(t,e){return new Promise((o,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){o(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function hR(t){return("0"+t.toString(16)).substr(-2)}function pR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(e),Array.from(e,hR).join("")}async function mR(t){const i=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(o);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function gR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await mR(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(t,e,i=!1){const o=pR();let a=o;i&&(a+="/PASSWORD_RECOVERY"),await js(t,`${e}-code-verifier`,a);const l=await gR(o);return[l,o===l?"plain":"s256"]}const yR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vR(t){const e=t.headers.get(ud);if(!e||!e.match(yR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _R(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SR(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ER=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(t){if(!ER.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wR(t,e){return new Proxy(t,{get:(i,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,a)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,o,a)}})}function I0(t){return JSON.parse(JSON.stringify(t))}const Xi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),TR=[502,503,504];async function M0(t){var e;if(!cR(t))throw new cd(Xi(t),0);if(TR.includes(t.status))throw new cd(Xi(t),t.status);let i;try{i=await t.json()}catch(l){throw new Qi(Xi(l),l)}let o;const a=vR(t);if(a&&a.getTime()>=zy["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new C0(Xi(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Xt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new C0(Xi(i),t.status,i.weak_password.reasons);throw new W1(Xi(i),t.status||500,o)}const bR=(t,e,i,o)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),i))};async function le(t,e,i,o){var a;const l=Object.assign({},o==null?void 0:o.headers);l[ud]||(l[ud]=zy["2024-01-01"].name),o!=null&&o.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const c=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(c.redirect_to=o.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await xR(t,e,i+h,{headers:l,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function xR(t,e,i,o,a,l){const c=bR(e,o,a,l);let h;try{h=await t(i,Object.assign({},c))}catch(g){throw console.error(g),new cd(Xi(g),0)}if(h.ok||await M0(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(g){await M0(g)}}function vn(t){var e;let i=null;RR(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=aR(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:o},error:null}}function k0(t){const e=vn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CR(t){return{data:t,error:null}}function AR(t){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:l}=t,c=ll(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function D0(t){return t}function RR(t){return t.access_token&&t.refresh_token&&t.expires_in}const Hc=["global","local","others"];class NR{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=Jy(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Hc[0]){if(Hc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hc.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(se(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:xi})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=ll(e,["options"]),a=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:AR,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(se(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xi})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,a,l,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:D0});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(x=>{const A=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(x.split(";")[1].split("=")[1]);m[`${R}Page`]=A}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(se(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){zs(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xi})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){zs(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:xi})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){zs(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:xi})}catch(o){if(se(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){zs(e.userId);try{const{data:i,error:o}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:o}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _deleteFactor(e){zs(e.userId),zs(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,o,a,l,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:D0});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(x=>{const A=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(x.split(";")[1].split("=")[1]);m[`${R}Page`]=A}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(se(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(se(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}}function U0(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const $s={debug:!!(globalThis&&Fy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class IR extends Yy{}async function MR(t,e,i){$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),$s.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw $s.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new IR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($s.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function kR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ky(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function DR(t){return parseInt(t,16)}function UR(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function LR(t){var e;const{chainId:i,domain:o,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:m,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=Ky(t.address),x=v?`${v}://${o}`:o,A=t.statement?`${t.statement}
`:"",R=`${x} wants you to sign in with your Ethereum account:
${T}

${A}`;let D=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),h&&(D+=`
Not Before: ${h.toISOString()}`),g&&(D+=`
Request ID: ${g}`),m){let q=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);q+=`
- ${M}`}D+=q}return`${R}
${D}`}class ct extends Error{constructor({message:e,code:i,cause:o,name:a}){var l;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=a??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class Za extends ct{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function OR({error:t,options:e}){var i,o,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ct({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(jy(c)){if(l.rp.id!==c)return new ct({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function PR({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ct({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(jy(o)){if(i.rpId!==o)return new ct({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class qR{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const BR=new qR;function HR(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:o}=t,a=ll(t,["challenge","user","excludeCredentials"]),l=to(e).buffer,c=Object.assign(Object.assign({},i),{id:to(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(o&&o.length>0){h.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const m=o[g];h.excludeCredentials[g]=Object.assign(Object.assign({},m),{id:to(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function GR(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,o=ll(t,["challenge","allowCredentials"]),a=to(e).buffer,l=Object.assign(Object.assign({},o),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:to(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function VR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,o=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zi(new Uint8Array(a.authenticatorData)),clientDataJSON:Zi(new Uint8Array(a.clientDataJSON)),signature:Zi(new Uint8Array(a.signature)),userHandle:a.userHandle?Zi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jy(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function L0(){var t,e;return!!(bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $R(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Za("Browser returned unexpected credential type",e)}:{data:null,error:new Za("Empty credential response",e)}}catch(e){return{data:null,error:OR({error:e,options:t})}}}async function FR(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Za("Browser returned unexpected credential type",e)}:{data:null,error:new Za("Empty credential response",e)}}catch(e){return{data:null,error:PR({error:e,options:t})}}}const JR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function el(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))o[l]=c;else if(i(c))o[l]=c;else if(e(c)){const h=o[l];e(h)?o[l]=el(h,c):o[l]=el(c)}else o[l]=c}return o}function KR(t,e){return el(JR,t,e||{})}function jR(t,e){return el(YR,t,e||{})}class XR{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:o,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??BR.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=KR(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await $R({publicKey:m,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const m=jR(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await FR(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Qi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new cr("rpId is required for WebAuthn authentication")};try{if(!L0())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:o},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:o,credential_response:g.credential_response}})}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Qi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new cr("rpId is required for WebAuthn registration")};try{if(!L0())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:m}}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Qi("Unexpected error in register",c)}}}}kR();const WR={url:J1,storageKey:Y1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function O0(t,e,i){return await i()}const Fs={};class dr{get jwks(){var e,i;return(i=(e=Fs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Fs[this.storageKey]=Object.assign(Object.assign({},Fs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Fs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fs[this.storageKey]=Object.assign(Object.assign({},Fs[this.storageKey]),{cachedAt:e})}constructor(e){var i,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},WR),e);if(this.storageKey=l.storageKey,this.instanceID=(i=dr.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,dr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&bt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new NR({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Jy(l.fetch),this.lock=l.lock||O0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&bt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=MR:this.lock=O0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Fy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=U0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=U0(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vy}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},o="none";if(bt()&&(i=uR(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),bt()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),eR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return se(i)?this._returnResult({error:i}):this._returnResult({error:new Qi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,a;try{const l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:vn}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,o,a;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let T=null,x=null;this.flowType==="pkce"&&([T,x]=await Vs(this.storage,this.storageKey)),l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:T,code_challenge_method:x},xform:vn})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:vn})}else throw new Ga("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await Tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:k0})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:k0})}else throw new Ga("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const l=new Gs;return this._returnResult({data:{user:null,session:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,o,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,o,a,l,c,h,g,m,v,_,S;let T,x;if("message"in e)T=e.message,x=e.signature;else{const{chain:A,wallet:R,statement:D,options:q}=e;let M;if(bt())if(typeof R=="object")M=R;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")M=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=R}const H=new URL((i=q==null?void 0:q.url)!==null&&i!==void 0?i:window.location.href),Y=await M.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Ky(Y[0]);let G=(o=q==null?void 0:q.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!G){const K=await M.request({method:"eth_chainId"});G=DR(K)}const ie={domain:H.host,address:z,statement:D,uri:H.href,version:"1",chainId:G,nonce:(a=q==null?void 0:q.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=q==null?void 0:q.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=q==null?void 0:q.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=q==null?void 0:q.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(m=q==null?void 0:q.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=q==null?void 0:q.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=LR(ie),x=await M.request({method:"personal_sign",params:[UR(T),z]})}try{const{data:A,error:R}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:x},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:vn});if(R)throw R;if(!A||!A.session||!A.user){const D=new Gs;return this._returnResult({data:{user:null,session:null},error:D})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:R})}catch(A){if(se(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var i,o,a,l,c,h,g,m,v,_,S,T;let x,A;if("message"in e)x=e.message,A=e.signature;else{const{chain:R,wallet:D,statement:q,options:M}=e;let H;if(bt())if(typeof D=="object")H=D;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))H=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=D}const Y=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in H&&H.signIn){const z=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),q?{statement:q}:null));let G;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")G=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)G=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)x=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),A=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${Y.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(a=(o=M==null?void 0:M.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=M==null?void 0:M.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((c=M==null?void 0:M.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((_=(v=M==null?void 0:M.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...M.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const z=await H.signMessage(new TextEncoder().encode(x),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=z}}try{const{data:R,error:D}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Zi(A)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:vn});if(D)throw D;if(!R||!R.session||!R.user){const q=new Gs;return this._returnResult({data:{user:null,session:null},error:q})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:D})}catch(R){if(se(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const i=await Ki(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new tR;const{data:l,error:c}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:vn});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Gs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:o,token:a,access_token:l,nonce:c}=e,h=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:vn}),{data:g,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g||!g.session||!g.user){const v=new Gs;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:m})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,o,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Vs(this.storage,this.storageKey));const{error:_}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:v}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new Ga("You must provide either an email or phone number.")}catch(h){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,o;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:h}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:vn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,m=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,o,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Vs(this.storage,this.storageKey));const m=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:CR});return!((l=m.data)===null||l===void 0)&&l.url&&bt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new Xt;const{error:a}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:a,options:l}=e,{error:c}=await le(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:o,type:a,options:l}=e,{data:c,error:h}=await le(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Ga("You must provide either an email or phone number and a type")}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<Oc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const c=await Ki(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Bc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=wR(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xi}):await this._useSession(async i=>{var o,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:xi})})}catch(i){if(se(i))return Z1(i)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:a,error:l}=o;if(l)throw l;if(!a.session)throw new Xt;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Vs(this.storage,this.storageKey));const{data:m,error:v}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:xi});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(o){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xt;const i=Date.now()/1e3;let o=i,a=!0,l=null;const{payload:c}=qc(e.access_token);if(c.exp&&(o=c.exp,a=o<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(se(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(o=c.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new Xt;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!bt())throw new Va("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Va(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new x0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Va("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new x0("No code detected.");const{data:q,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:m}=e;if(!l||!h||!c||!m)throw new Va("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const T=S-v;T*1e3<=Ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const x=S-_;v-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,S,v):v-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,S,v);const{data:A,error:R}=await this._getUser(l);if(R)throw R;const D={provider_token:o,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:m,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(o){if(se(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(o=a.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(Q1(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=lR(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Vs(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:o,error:a}=await this._useSession(async l=>{var c,h,g,m,v;const{data:_,error:S}=l;if(S)throw S;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return bt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:e.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(se(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var o;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:m,nonce:v}=e,_=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l==null?void 0:l.access_token)!==null&&o!==void 0?o:void 0,body:{provider:h,id_token:g,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:vn}),{data:S,error:T}=_;return T?this._returnResult({data:{user:null,session:null},error:T}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Gs}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:T}))}catch(a){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,a;const{data:l,error:c}=i;if(c)throw c;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await fR(async a=>(a>0&&await dR(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Pc(l)&&Date.now()+c-o<Ks})}catch(o){if(this._debug(i,"error",o),se(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),bt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await Ki(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await js(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Bc()}else if(a&&!a.user&&!a.user){const c=await Ki(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Tt(this.storage,this.storageKey+"-user"),await js(this.storage,this.storageKey,a)):a.user=Bc()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Oc;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${Oc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Pc(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new cl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Xt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),se(l)){const c={data:null,error:l};return Pc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,o=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Tt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await js(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=I0(a);await js(this.storage,this.storageKey,l)}else{const a=I0(i);await js(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ks);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-e)/Ks);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ks}ms, refresh threshold is ${ld} ticks`),a<=ld&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const a=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,c]=await Vs(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(o!=null&&o.queryParams){const l=new URLSearchParams(o.queryParams);a.push(l.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:m}=await le(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?VR(e.webauthn.credential_response):zR(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:HR(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:GR(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=qc(o.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const m=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Xt})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Xt});const c=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&bt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Xt});const c=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&bt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;return o?this._returnResult({data:null,error:o}):i?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Xt})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xt})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(h=>h.kid===e);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(h=>h.kid===e),o&&this.jwks_cached_at+X1>a)return o;const{data:l,error:c}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,o=l.keys.find(h=>h.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:T,error:x}=await this.getSession();if(x||!T.session)return this._returnResult({data:null,error:x});o=T.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=qc(o);i!=null&&i.allowExpired||_R(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!m){const{error:T}=await this.getUser(o);if(T)throw T;return{data:{claims:l,header:a,signature:c},error:null}}const v=SR(a.alg),_=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,rR(`${h}.${g}`)))throw new dd("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}}dr.nextInstanceID={};const QR=dr,ZR="2.89.0";let sr="";typeof Deno<"u"?sr="deno":typeof document<"u"?sr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sr="react-native":sr="node";const e2={"X-Client-Info":`supabase-js-${sr}/${ZR}`},t2={headers:e2},n2={schema:"public"},i2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s2={};function fr(t){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(t)}function o2(t,e){if(fr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var o=i.call(t,e);if(fr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r2(t){var e=o2(t,"string");return fr(e)=="symbol"?e:e+""}function a2(t,e,i){return(e=r2(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P0(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,o)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?P0(Object(i),!0).forEach(function(o){a2(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P0(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}const l2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),u2=()=>Headers,c2=(t,e,i)=>{const o=l2(i),a=u2();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let m=new a(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),o(l,nt(nt({},c),{},{headers:m}))}};function d2(t){return t.endsWith("/")?t:t+"/"}function f2(t,e){var i,o;const{db:a,auth:l,realtime:c,global:h}=t,{db:g,auth:m,realtime:v,global:_}=e,S={db:nt(nt({},g),a),auth:nt(nt({},m),l),realtime:nt(nt({},v),c),storage:{},global:nt(nt(nt({},_),h),{},{headers:nt(nt({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function h2(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(d2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var p2=class extends QR{constructor(t){super(t)}},m2=class{constructor(t,e,i){var o,a;this.supabaseUrl=t,this.supabaseKey=e;const l=h2(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:n2,realtime:s2,auth:nt(nt({},i2),{},{storageKey:c}),global:t2},g=f2(i??{},h);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=g.auth)!==null&&m!==void 0?m:{},this.headers,g.global.fetch)}this.fetch=c2(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new KA(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new F1(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new zA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:o}=await t.auth.getSession();return(e=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:m},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new p2({url:this.authUrl.href,headers:nt(nt({},S),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:a,flowType:c,lock:h,debug:g,throwOnError:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new d1(this.realtimeUrl.href,nt(nt({},t),{},{params:nt(nt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const g2=(t,e,i)=>new m2(t,e,i);function y2(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}y2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const v2="https://avyhikexewvhsrtnddbl.supabase.co",_2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2eWhpa2V4ZXd2aHNydG5kZGJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTAwMDUsImV4cCI6MjA3NjcyNjAwNX0.fz0wC8bdIzWECrPgnj4aTz3EA-jEIW_p9V1KfTtFztk",Me=g2(v2,_2),q0=({user:t,onClose:e,onSubmit:i,initialData:o})=>{const[a,l]=te.useState((o==null?void 0:o.content)||""),[c,h]=te.useState(null),[g,m]=te.useState((o==null?void 0:o.image)||""),[v,_]=te.useState(!1),[S,T]=te.useState(!1),[x,A]=te.useState(""),R=!!o,D=async()=>{if(!x)return;_(!0);const H=await BA(x);l(H),_(!1)},q=H=>{var z;const Y=(z=H.target.files)==null?void 0:z[0];if(Y){h(Y);const G=new FileReader;G.onloadend=()=>{m(G.result)},G.readAsDataURL(Y)}},M=async()=>{T(!0);let H="";if(c){const Y=c.name.split(".").pop(),G=`brews/${`${Math.random()}.${Y}`}`,{data:ie,error:K}=await Me.storage.from("brew-images").upload(G,c);if(K)console.error("FAILED_TO_UPLOAD_IMAGE",K),alert(`Failed to upload image: ${K.message}`);else if(ie){const{data:ce}=Me.storage.from("brew-images").getPublicUrl(G);H=ce.publicUrl}}i(a,H),T(!1)};return w.jsx("div",{className:"fixed inset-0 bg-[#0e0d0c]/90 backdrop-blur-xl flex items-center justify-center p-4 z-50 animate-in fade-in duration-300",children:w.jsxs("div",{className:"bg-[#1a1817] w-full max-w-xl rounded-[2.5rem] border border-[#2c1a12] flex flex-col max-h-[92vh] shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)] overflow-hidden motion-safe:animate-in motion-safe:zoom-in-95 motion-safe:slide-in-from-bottom-8",children:[w.jsxs("div",{className:"px-8 py-6 border-b border-[#2c1a12] flex justify-between items-center bg-[#1a1817]",children:[w.jsx("button",{onClick:e,className:"text-[#a09a96] hover:text-[#efebe9] transition-all font-bold text-sm uppercase tracking-widest active:scale-95",children:"Cancel"}),w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("span",{className:"font-black text-[#efebe9] text-xl tracking-tight",children:R?"Edit Brew":"New Brew"}),w.jsx("div",{className:"h-1 w-8 bg-[#c29a67] rounded-full mt-1 opacity-50"})]}),w.jsx("div",{className:"w-16"})]}),w.jsxs("div",{className:"px-8 py-8 overflow-y-auto custom-scrollbar",children:[w.jsxs("div",{className:"flex gap-5",children:[w.jsxs("div",{className:"flex flex-col items-center gap-3",children:[w.jsx("img",{src:t.avatar,className:"w-14 h-14 rounded-full border-2 border-[#c29a67]/30 object-cover shadow-xl"}),w.jsx("div",{className:"w-0.5 flex-1 bg-gradient-to-b from-[#c29a67]/20 to-transparent rounded-full min-h-[40px]"})]}),w.jsxs("div",{className:"flex-1 min-w-0 pt-1",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("span",{className:"font-black text-[#efebe9] text-lg tracking-tight",children:["@",t.username]}),w.jsx("span",{className:"text-xs font-bold text-[#c29a67] bg-[#c29a67]/10 px-3 py-1 rounded-full border border-[#c29a67]/20 uppercase tracking-widest",children:R?"Refining":"Drafting"})]}),w.jsx("textarea",{autoFocus:!0,value:a,onChange:H=>l(H.target.value),placeholder:"Share your coffee thoughts...",className:"w-full bg-transparent border-none focus:ring-0 text-xl font-medium leading-relaxed resize-none min-h-[160px] p-0 placeholder-[#a09a96]/30 text-[#efebe9]"}),g&&w.jsxs("div",{className:"group relative mt-6 rounded-[2rem] overflow-hidden border border-[#2c1a12] shadow-2xl bg-[#0e0d0c]",children:[w.jsx("img",{src:g,className:"w-full object-contain max-h-[320px] transition-transform duration-500 group-hover:scale-[1.02]"}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"}),w.jsx("button",{onClick:()=>{h(null),m("")},className:"absolute top-4 right-4 bg-black/60 backdrop-blur-md p-2.5 rounded-full hover:bg-black text-white transition-all transform hover:scale-110 shadow-xl",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"mt-8 flex items-center gap-6",children:w.jsxs("label",{className:"group flex items-center gap-2 cursor-pointer text-[#a09a96] hover:text-[#c29a67] transition-all",children:[w.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"}),w.jsx("div",{className:"p-3 bg-[#2c1a12] rounded-2xl group-hover:bg-[#c29a67]/10 transition-colors",children:w.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),w.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),w.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),w.jsx("span",{className:"text-xs font-bold uppercase tracking-widest hidden sm:block",children:g?"Change Photo":"Add Photo"})]})})]})]}),w.jsx("div",{className:"mt-12 group transition-all duration-300",children:w.jsxs("div",{className:"bg-gradient-to-br from-[#2c1a12] to-[#1a1817] rounded-[2rem] p-8 border border-[#c29a67]/10 shadow-inner group-hover:border-[#c29a67]/30 transition-all",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[w.jsx("div",{className:"p-2 bg-[#c29a67]/10 rounded-xl",children:w.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#c29a67",strokeWidth:"2",children:w.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),w.jsx("h4",{className:"text-xs font-black text-[#c29a67] uppercase tracking-[0.2em]",children:"Brew with Gemini assistant"})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[w.jsx("input",{type:"text",value:x,onChange:H=>A(H.target.value),placeholder:"e.g. A review of Third Wave's latest roast",className:"flex-1 bg-[#0e0d0c]/50 border border-[#c29a67]/10 rounded-2xl px-5 py-4 text-sm focus:border-[#c29a67] outline-none text-[#efebe9] placeholder-[#a09a96]/20 transition-all font-medium"}),w.jsx("button",{onClick:D,disabled:v||!x,className:"bg-[#c29a67] text-[#0e0d0c] text-sm font-black px-8 py-4 rounded-2xl hover:bg-[#d4b48d] disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-[0_10px_20px_-5px_rgba(194,154,103,0.3)] active:scale-95 shrink-0",children:v?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 border-2 border-[#0e0d0c] border-t-transparent rounded-full animate-spin"}),"Roasting Draft..."]}):"Generate Draft"})]})]})})]}),w.jsx("div",{className:"px-8 py-6 border-t border-[#2c1a12] flex justify-end bg-[#1a1817]",children:w.jsxs("button",{onClick:M,disabled:!a.trim()||S,className:"group relative bg-[#efebe9] text-[#0e0d0c] font-black px-12 py-4 rounded-2xl disabled:opacity-30 disabled:cursor-not-allowed hover:bg-white transition-all shadow-[0_20px_40px_-10px_rgba(239,235,233,0.2)] active:scale-95 flex items-center gap-3 overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),S?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-5 h-5 border-3 border-[#0e0d0c] border-t-transparent rounded-full animate-spin"}),w.jsx("span",{children:R?"Updating...":"Brewing..."})]}):w.jsxs(w.Fragment,{children:[w.jsx("span",{children:R?"Update Brew":"Brew Now"}),w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:w.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})})]})})},S2=({currentUser:t})=>{const[e,i]=te.useState(null),[o,a]=te.useState(!0),[l,c]=te.useState(!1),[h,g]=te.useState({}),[m,v]=te.useState(null),[_,S]=te.useState(""),[T,x]=te.useState(!1);te.useEffect(()=>{A()},[]);const A=async()=>{a(!0);const{data:M,error:H}=await Me.from("featured_brews").select("*").eq("id",1).single();H?console.error("Error fetching featured brew:",H):(i(M),g(M)),a(!1)},R=M=>{var Y;const H=(Y=M.target.files)==null?void 0:Y[0];if(H){v(H);const z=new FileReader;z.onloadend=()=>{S(z.result),g({...h,image_url:z.result})},z.readAsDataURL(H)}},D=async()=>{x(!0);let M=h.image_url;if(m){const Y=m.name.split(".").pop(),z=`featured/brew-${Date.now()}.${Y}`,{data:G,error:ie}=await Me.storage.from("brew-images").upload(z,m);if(ie){alert("Image upload failed: "+ie.message),x(!1);return}const{data:{publicUrl:K}}=Me.storage.from("brew-images").getPublicUrl(z);M=K}const{error:H}=await Me.from("featured_brews").update({title:h.title,description:h.description,image_url:M,cta_text:h.cta_text,cta_link:h.cta_link,updated_at:new Date().toISOString()}).eq("id",1);H?alert("Failed to update featured brew: "+H.message):(i({...h,image_url:M}),c(!1),v(null),S("")),x(!1)};if(o&&!e)return w.jsxs("div",{className:"mx-6 my-8 p-12 bg-[#1a1817] rounded-[2.5rem] border border-[#2c1a12] animate-pulse flex flex-col items-center",children:[w.jsx("div",{className:"w-8 h-8 border-3 border-[#c29a67] border-t-transparent rounded-full animate-spin mb-4"}),w.jsx("p",{className:"text-[#a09a96] text-xs font-bold uppercase tracking-widest",children:"Dialing in the espresso..."})]});const q=(t==null?void 0:t.username)==="twc_training";return w.jsxs("div",{className:"mx-6 my-8 p-8 bg-gradient-to-br from-[#1a1817] to-[#0e0d0c] rounded-[2.5rem] border border-[#c29a67]/30 shadow-2xl relative overflow-hidden group transition-all duration-500 hover:border-[#c29a67]/60",children:[w.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-[#c29a67]/5 rounded-full blur-3xl group-hover:bg-[#c29a67]/10 transition-colors duration-500"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"flex h-2 w-2 rounded-full bg-[#c29a67] animate-ping"}),w.jsx("h3",{className:"text-[#c29a67] text-xs font-black uppercase tracking-[0.2em]",children:"Barista's Choice"})]}),q&&!l&&w.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-[#c29a67] border border-[#c29a67]/30 rounded-xl hover:bg-[#c29a67] hover:text-[#0e0d0c] transition-all bg-[#0e0d0c]/50",children:"Edit Feature"})]}),l?w.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-top-2",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("label",{className:"text-[10px] font-bold text-[#a09a96] uppercase ml-2 tracking-widest",children:"Image Preview"}),w.jsxs("div",{className:"group/edit-img relative w-full aspect-video md:aspect-square rounded-[2.5rem] overflow-hidden border border-[#c29a67]/20 shadow-2xl bg-[#0e0d0c]",children:[w.jsx("img",{src:_||h.image_url,className:"w-full h-full object-contain transition-transform duration-500 group-hover/edit-img:scale-[1.05]"}),w.jsxs("label",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover/edit-img:opacity-100 transition-opacity flex flex-col items-center justify-center cursor-pointer backdrop-blur-sm",children:[w.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"}),w.jsx("div",{className:"p-4 bg-[#c29a67] rounded-full text-[#0e0d0c] shadow-2xl mb-2 transform scale-75 group-hover/edit-img:scale-100 transition-transform flex items-center justify-center",children:w.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),w.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),w.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),w.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Click to Replace Image"})]})]})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-[#a09a96] uppercase ml-2 tracking-widest",children:"Brew Title"}),w.jsx("input",{value:h.title,onChange:M=>g({...h,title:M.target.value}),placeholder:"e.g. La vien rose",className:"w-full bg-[#0e0d0c]/50 border border-[#c29a67]/20 rounded-2xl px-6 py-4 text-[#efebe9] focus:border-[#c29a67] outline-none font-bold text-lg transition-all"})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-[#a09a96] uppercase ml-2 tracking-widest",children:"Description"}),w.jsx("textarea",{value:h.description,onChange:M=>g({...h,description:M.target.value}),placeholder:"Describe the brew...",className:"w-full bg-[#0e0d0c]/50 border border-[#c29a67]/20 rounded-2xl px-6 py-4 text-[#efebe9] focus:border-[#c29a67] outline-none h-32 font-medium leading-relaxed resize-none transition-all"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-[#a09a96] uppercase ml-2 tracking-widest",children:"Button Text"}),w.jsx("input",{value:h.cta_text,onChange:M=>g({...h,cta_text:M.target.value}),placeholder:"Learn how to prepare it",className:"w-full bg-[#0e0d0c]/50 border border-[#c29a67]/20 rounded-2xl px-5 py-4 text-[#efebe9] focus:border-[#c29a67] outline-none font-bold transition-all"})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-[#a09a96] uppercase ml-2 tracking-widest",children:"Action Link (PDF/Video)"}),w.jsx("input",{value:h.cta_link,onChange:M=>g({...h,cta_link:M.target.value}),placeholder:"e.g. https://...",className:"w-full bg-[#0e0d0c]/50 border border-[#c29a67]/20 rounded-2xl px-5 py-4 text-[#efebe9] focus:border-[#c29a67] outline-none font-medium text-xs transition-all"})]})]}),w.jsxs("div",{className:"flex gap-4 pt-8 border-t border-[#2c1a12]",children:[w.jsx("button",{onClick:D,disabled:T,className:"flex-1 bg-[#c29a67] text-[#0e0d0c] py-5 rounded-2xl font-black uppercase tracking-widest text-xs hover:bg-[#efebe9] transition-all shadow-2xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-4 h-4 border-2 border-[#0e0d0c] border-t-transparent rounded-full animate-spin"}),w.jsx("span",{children:"Saving..."})]}):w.jsx("span",{children:"Save Feature Update"})}),w.jsx("button",{onClick:()=>{c(!1),S(""),v(null)},disabled:T,className:"flex-1 border border-[#2c1a12] text-[#a09a96] py-5 rounded-2xl font-black uppercase tracking-widest text-xs hover:text-[#efebe9] transition-all active:scale-95",children:"Discard Changes"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("h2",{className:"text-4xl font-black text-[#efebe9] mb-8 tracking-tighter group-hover:text-white transition-colors",children:"Barista's Signature"}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start md:items-center",children:[w.jsxs("div",{className:"relative group/img shrink-0 bg-[#0e0d0c] rounded-[2.5rem] overflow-hidden border border-[#c29a67]/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[w.jsx("img",{src:(e==null?void 0:e.image_url)||"https://images.unsplash.com/photo-1541167760496-162955ed8a9f?q=80&w=400&h=400&auto=format&fit=crop",alt:e==null?void 0:e.title,className:"w-full md:w-44 h-44 object-contain group-hover:scale-110 transition-transform duration-700 ease-out"}),w.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/10"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"text-2xl font-black text-[#efebe9] tracking-tight mb-2",children:e==null?void 0:e.title}),w.jsx("p",{className:"text-[#a09a96] text-[16px] leading-relaxed font-medium",children:e==null?void 0:e.description}),w.jsxs("div",{className:"flex gap-4 mt-6",children:[w.jsx("span",{className:"text-[10px] font-black text-[#c29a67] border border-[#c29a67]/20 px-3 py-1.5 rounded-xl bg-[#c29a67]/5 uppercase tracking-wider",children:"#ArtisanCraft"}),w.jsx("span",{className:"text-[10px] font-black text-[#efebe9]/40 border border-[#efebe9]/10 px-3 py-1.5 rounded-xl uppercase tracking-wider",children:"#BaristaGold"})]})]})]}),w.jsxs("button",{onClick:()=>{if(e!=null&&e.cta_link&&e.cta_link!=="#"){const M=e.cta_link.startsWith("http")?e.cta_link:`https://${e.cta_link}`;window.open(M,"_blank")}},className:"w-full mt-10 py-5 bg-[#efebe9] text-[#0e0d0c] font-black rounded-2xl hover:bg-white transition-all transform hover:-translate-y-1 active:scale-[0.98] shadow-[0_20px_40px_-10px_rgba(239,235,233,0.3)] flex items-center justify-center gap-3 group/btn",children:[w.jsx("span",{children:(e==null?void 0:e.cta_text)||"Learn how to prepare it"}),w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"group-hover/btn:translate-x-1 transition-transform",children:w.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})]})]})},E2=()=>{const[t,e]=te.useState(!1),[i,o]=te.useState(!1),[a,l]=te.useState(""),[c,h]=te.useState(""),[g,m]=te.useState(null),v=async _=>{_.preventDefault(),e(!0),m(null);let S=a.trim(),T="";try{if(!S.includes("@")){const{data:x,error:A}=await Me.from("allowed_employees").select("email, employee_name").ilike("employee_code",S).maybeSingle();if(console.log("Employee Lookup:",{id:S,data:x,error:A}),A)throw console.error("Database Error:",A),new Error(`Database Error: ${A.message} (${A.details||A.hint||"Check RLS on allowed_employees"})`);if(!x)throw new Error(`Employee ID "${S}" not found in allowed_employees. (Hint: Check RLS!)`);S=x.email,T=x.employee_name}if(S==="training@thirdwavecoffee.in"&&c==="Training@10"){localStorage.setItem("bc_mock_session","training_team_active"),window.location.reload();return}if(i){const{error:x}=await Me.auth.signUp({email:S,password:c,options:{data:{full_name:T||void 0,employee_id:a.includes("@")?void 0:a}}});if(x)throw x;alert(`Confirmation link sent to ${S}!`)}else{const{error:x}=await Me.auth.signInWithPassword({email:S,password:c});if(x)throw x}}catch(x){m(x.message||"An error occurred during authentication.")}finally{e(!1)}};return w.jsxs("div",{className:"min-h-screen bg-[#0e0d0c] flex items-center justify-center p-4",children:[w.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[w.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-[#c29a67]/5 rounded-full blur-[120px]"}),w.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-[#c29a67]/5 rounded-full blur-[120px]"})]}),w.jsxs("div",{className:"w-full max-w-md z-10",children:[w.jsxs("div",{className:"text-center mb-10",children:[w.jsx("div",{className:"inline-block mb-4 px-8 py-2",children:w.jsx("img",{src:"/logo.png",alt:"Wavegram",className:"w-64 h-auto object-contain"})}),w.jsx("p",{className:"text-[#c29a67] font-bold uppercase tracking-[0.4em] text-[10px] opacity-70",children:"The Coffee Network"})]}),w.jsxs("div",{className:"glass bg-[#1a1817]/60 p-8 rounded-[2.5rem] border border-[#2c1a12] shadow-2xl backdrop-blur-xl",children:[w.jsx("h2",{className:"text-xl font-bold text-[#efebe9] mb-8 text-center",children:i?"Apply for Access":"Welcome Back"}),w.jsxs("form",{onSubmit:v,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-bold text-[#a09a96] uppercase tracking-wider mb-2 ml-1",children:"Work Email or Employee ID"}),w.jsx("input",{type:"text",required:!0,value:a,onChange:_=>l(_.target.value),placeholder:"e.g. TWC123 or email@thirdwavecoffee.in",className:"w-full bg-[#0e0d0c]/50 border border-[#2c1a12] rounded-2xl px-5 py-4 text-[#efebe9] placeholder-[#a09a96]/30 focus:outline-none focus:border-[#c29a67] transition-all"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-bold text-[#a09a96] uppercase tracking-wider mb-2 ml-1",children:"Password"}),w.jsx("input",{type:"password",required:!0,value:c,onChange:_=>h(_.target.value),placeholder:"",className:"w-full bg-[#0e0d0c]/50 border border-[#2c1a12] rounded-2xl px-5 py-4 text-[#efebe9] placeholder-[#a09a96]/30 focus:outline-none focus:border-[#c29a67] transition-all"})]}),g&&w.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 text-sm px-4 py-3 rounded-2xl flex items-start gap-3",children:[w.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),g]}),w.jsx("button",{type:"submit",disabled:t,className:"w-full bg-[#efebe9] text-[#0e0d0c] font-black py-4 rounded-2xl hover:bg-white transition-all transform active:scale-[0.98] shadow-lg disabled:opacity-50",children:t?w.jsxs("div",{className:"flex items-center justify-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 border-2 border-[#0e0d0c] border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):i?"Join Wavegram":"Enter Lounge"})]}),w.jsxs("p",{className:"mt-8 text-center text-[#a09a96] text-sm",children:[i?"Already a member?":"New at TWC?",w.jsx("button",{onClick:()=>o(!i),className:"ml-2 text-[#c29a67] font-bold hover:underline",children:i?"Sign In":"Sign Up"})]})]}),w.jsx("p",{className:"mt-8 text-center text-[#a09a96]/40 text-xs px-8",children:"This is a private network. By entering, you agree to the TWC internal communication guidelines."})]})]})},w2=({post:t,currentUser:e,onClose:i})=>{const[o,a]=te.useState([]),[l,c]=te.useState(!0),[h,g]=te.useState(""),[m,v]=te.useState(null);te.useEffect(()=>{_()},[]);const _=async()=>{c(!0);const{data:x,error:A}=await Me.from("profiles").select("*").order("full_name",{ascending:!0});A?console.error("Error fetching employees:",A):x&&a(x.map(R=>({id:R.id,username:R.username,name:R.full_name,avatar:R.avatar_url,verified:!0}))),c(!1)},S=async x=>{if(!e)return;v(x.id);const{error:A}=await Me.from("shares").insert({post_id:t.id,sender_id:e.id,receiver_id:x.id});A?(console.error("Error sharing brew:",A),alert("Failed to share brew. Please try again.")):(alert(`Shared with ${x.name}!`),i()),v(null)},T=o.filter(x=>x.name.toLowerCase().includes(h.toLowerCase())||x.username.toLowerCase().includes(h.toLowerCase()));return w.jsx("div",{className:"fixed inset-0 bg-[#0e0d0c]/90 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-in fade-in zoom-in-95 duration-200",children:w.jsxs("div",{className:"bg-[#1a1817] w-full max-w-md rounded-[2.5rem] border border-[#2c1a12] flex flex-col max-h-[80vh] shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"p-6 border-b border-[#2c1a12] flex items-center justify-between",children:[w.jsx("h2",{className:"text-xl font-black text-[#efebe9] tracking-tight",children:"Share Brew"}),w.jsx("button",{onClick:i,className:"p-2 hover:bg-[#2c1a12] rounded-full text-[#a09a96] hover:text-[#efebe9] transition-colors",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"p-4 bg-[#0e0d0c]/50",children:w.jsx("input",{type:"text",placeholder:"Search employees...",value:h,onChange:x=>g(x.target.value),className:"w-full bg-[#1a1817] border border-[#2c1a12] rounded-2xl px-5 py-3 text-sm focus:border-[#c29a67] outline-none text-[#efebe9] transition-all"})}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l?w.jsxs("div",{className:"flex flex-col items-center py-10 gap-4",children:[w.jsx("div",{className:"w-8 h-8 border-2 border-[#c29a67] border-t-transparent rounded-full animate-spin"}),w.jsx("p",{className:"text-xs font-bold text-[#c29a67] uppercase tracking-widest",children:"Calling the team..."})]}):w.jsxs("div",{className:"space-y-2",children:[w.jsx("div",{className:"px-2 py-4 border border-[#c29a67]/20 rounded-2xl bg-[#c29a67]/5 mb-6",children:w.jsx("p",{className:"text-xs text-center text-[#c29a67] font-bold uppercase tracking-widest",children:"Share this brew with"})}),T.map(x=>w.jsxs("button",{onClick:()=>S(x),disabled:m===x.id,className:"w-full flex items-center gap-4 p-3 rounded-2xl hover:bg-[#2c1a12] transition-all group active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx("img",{src:x.avatar,className:"w-12 h-12 rounded-full border-2 border-[#c29a67]/10 object-cover"}),w.jsxs("div",{className:"flex-1 text-left",children:[w.jsx("p",{className:"font-bold text-[#efebe9] group-hover:text-[#c29a67] transition-colors",children:x.name}),w.jsxs("p",{className:"text-xs text-[#a09a96]",children:["@",x.username]})]}),w.jsx("div",{className:"w-8 h-8 rounded-full border border-[#2c1a12] flex items-center justify-center group-hover:bg-[#c29a67] group-hover:border-[#c29a67] transition-all",children:m===x.id?w.jsx("div",{className:"w-4 h-4 border-2 border-[#efebe9] border-t-transparent rounded-full animate-spin"}):w.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"group-hover:text-[#0e0d0c]",children:w.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]},x.id)),T.length===0&&w.jsx("p",{className:"text-center py-10 text-[#a09a96] italic",children:"No employees found matched your search."})]})}),w.jsx("div",{className:"p-6 bg-[#0e0d0c] border-t border-[#2c1a12]",children:w.jsxs("div",{className:"flex items-center gap-3 opacity-60 grayscale scale-95",children:[w.jsx("img",{src:t.avatar,className:"w-8 h-8 rounded-full"}),w.jsxs("p",{className:"text-xs text-[#a09a96] truncate",children:["Brewing: ",t.content.substring(0,40),"..."]})]})})]})})},T2=({achievement:t,isUnlocked:e=!0})=>{const[i,o]=te.useState({x:50,y:50}),[a,l]=te.useState(!1),[c,h]=te.useState(!1),[g,m]=te.useState("mouse"),[v,_]=te.useState(!1),S=te.useRef(null),T=te.useRef({x:50,y:50}),x=te.useRef(null);te.useEffect(()=>{const z=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),G="DeviceOrientationEvent"in window;console.log("Device detection:",{isMobile:z,hasGyro:G,userAgent:navigator.userAgent}),m(z&&G?"gyro":z?"touch":"mouse")},[]),te.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);const A=async()=>{if(console.log("Requesting gyroscope permission..."),typeof DeviceOrientationEvent.requestPermission=="function")try{const z=await DeviceOrientationEvent.requestPermission();return console.log("iOS permission result:",z),_(z==="granted"),z==="granted"}catch(z){return console.error("Gyroscope permission error:",z),!1}else return console.log("Android - granting permission"),_(!0),!0};te.useEffect(()=>{if(!a||g!=="gyro"||!v)return;const z=G=>{console.log("Gyro event:",{beta:G.beta,gamma:G.gamma});const ie=G.beta||0,K=G.gamma||0,ce=Math.max(-45,Math.min(45,ie));let qe=(Math.max(-45,Math.min(45,K))+45)/90*100,Ce=(ce+45)/90*100;const Ye=.3;T.current.x+=(qe-T.current.x)*Ye,T.current.y+=(Ce-T.current.y)*Ye,o({x:T.current.x,y:T.current.y})};return window.addEventListener("deviceorientation",z),()=>window.removeEventListener("deviceorientation",z)},[a,g,v]);const R=te.useCallback(z=>{if(g!=="mouse"||!a||!S.current)return;const G=S.current.getBoundingClientRect(),ie=(z.clientX-G.left)/G.width*100,K=(z.clientY-G.top)/G.height*100;o({x:ie,y:K})},[g,a]),D=z=>{const G=z.touches[0];x.current={x:G.clientX,y:G.clientY,time:Date.now()}},q=async z=>{if(!x.current)return;const G=z.changedTouches[0],ie=Math.abs(G.clientX-x.current.x),K=Math.abs(G.clientY-x.current.y),ce=Date.now()-x.current.time,xe=ie<10&&K<10&&ce<300;console.log("Touch end:",{deltaX:ie,deltaY:K,deltaTime:ce,isTap:xe}),xe&&(z.preventDefault(),z.stopPropagation(),a?(console.log("Flipping card, current state:",c),h(qe=>!qe)):(console.log("Expanding card..."),l(!0),g==="gyro"&&!v&&(console.log("Requesting permission after expansion..."),await A()))),x.current=null},M=async z=>{z.stopPropagation(),a?(console.log("Flipping card (mouse), current state:",c),h(G=>!G)):(console.log("Expanding card (mouse)..."),l(!0))},H=z=>{z.stopPropagation(),z.preventDefault(),console.log("Closing card..."),l(!1),h(!1)},Y=z=>{switch(z){case"Legendary":return"text-amber-400 border-amber-500/50 bg-amber-500/10";case"Epic":return"text-purple-400 border-purple-500/50 bg-purple-500/10";case"Rare":return"text-sky-400 border-sky-500/50 bg-sky-500/10";default:return"text-slate-400 border-slate-700 bg-slate-800/50"}};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{ref:a?null:S,onClick:g==="mouse"?M:void 0,onTouchStart:g!=="mouse"?D:void 0,onTouchEnd:g!=="mouse"?q:void 0,className:`relative group cursor-pointer w-full aspect-[2/3] rounded-[32px] p-px 
                    transition-all duration-300 ease-out transform hover:-translate-y-2
                    ${e?"":"grayscale opacity-60"}
                    ${a?"opacity-0 pointer-events-none":"opacity-100"}
                `,children:[e&&w.jsx("div",{className:"absolute inset-0 rounded-[32px] transition-opacity duration-500 blur-2xl opacity-0 group-hover:opacity-30 pointer-events-none",style:{backgroundColor:t.color}}),w.jsxs("div",{className:"relative h-full w-full bg-[#0a0f1d] border border-white/5 rounded-[30px] overflow-hidden flex flex-col items-center shadow-2xl",children:[w.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-30`}),w.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),w.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10 w-full p-4 mt-2",children:w.jsx("div",{className:"relative transform scale-90",children:w.jsx("div",{className:"relative drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:t.illustration})})}),w.jsx("div",{className:`absolute top-3 right-3 z-30 px-1.5 py-0.5 rounded-md border text-[8px] font-black uppercase tracking-widest ${Y(t.rarity.charAt(0).toUpperCase()+t.rarity.slice(1))}`,children:t.rarity}),w.jsxs("div",{className:"w-full p-5 pt-0 relative z-10 flex flex-col",children:[w.jsx("h3",{className:"text-base font-black text-white mb-1 tracking-tight leading-none uppercase truncate",children:t.name}),w.jsx("p",{className:"text-slate-400 text-[10px] leading-tight mb-3 font-medium min-h-[2.5em] line-clamp-2",children:t.description}),w.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-slate-800 to-transparent mb-3"}),w.jsxs("div",{className:"flex justify-between items-end",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-[8px] uppercase tracking-tighter text-slate-500 font-bold mb-0.5",children:t.metricLabel}),w.jsx("span",{className:"text-sm font-black text-white",children:t.metricValue})]}),w.jsx("div",{className:"px-2 py-1 rounded-lg border border-white/5 bg-white/5 backdrop-blur-md text-[8px] font-bold uppercase tracking-widest text-slate-400",children:e?`${t.id.substring(0,4)}`:"LOCKED"})]})]})]})]}),a&&w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",style:{perspective:"1000px"},children:[w.jsx("button",{onClick:g==="mouse"?H:void 0,onTouchEnd:g!=="mouse"?H:void 0,className:"absolute top-6 right-6 z-[60] w-10 h-10 rounded-full bg-white/10 border border-white/20 backdrop-blur-md flex items-center justify-center text-white hover:bg-white/20 transition-all",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),w.jsxs("div",{ref:a?S:null,onMouseMove:R,onClick:g==="mouse"?M:void 0,onTouchStart:g!=="mouse"?D:void 0,onTouchEnd:g!=="mouse"?q:void 0,className:"relative w-[85vw] max-w-[400px] aspect-[2/3] cursor-pointer",style:{transformStyle:"preserve-3d",transform:c?"rotateY(180deg)":"rotateY(0deg)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:[w.jsxs("div",{className:"absolute inset-0 rounded-[32px] p-px",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[w.jsx("div",{className:"absolute inset-0 rounded-[32px] blur-3xl opacity-40 pointer-events-none",style:{backgroundColor:t.color}}),w.jsxs("div",{className:"relative h-full w-full bg-[#0a0f1d] border border-white/5 rounded-[30px] overflow-hidden flex flex-col items-center shadow-2xl",children:[w.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-30`}),w.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),e&&w.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none opacity-100 mix-blend-color-dodge",style:{background:`
                                                radial-gradient(
                                                    circle at ${i.x}% ${i.y}%, 
                                                    rgba(255, 255, 255, ${t.rarity==="legendary"?"0.35":"0.25"}) 0%, 
                                                    transparent 50%
                                                ),
                                                linear-gradient(
                                                    ${i.x+i.y}deg, 
                                                    transparent 0%, 
                                                    ${t.rarity==="legendary"?"rgba(251, 191, 36, 0.2)":"rgba(255, 100, 200, 0.15)"} 20%, 
                                                    ${t.rarity==="legendary"?"rgba(245, 158, 11, 0.2)":"rgba(100, 200, 255, 0.15)"} 40%, 
                                                    ${t.rarity==="legendary"?"rgba(251, 191, 36, 0.2)":"rgba(200, 100, 255, 0.15)"} 60%, 
                                                    transparent 80%
                                                )
                                            `,backgroundSize:"200% 200%",transition:"background 0.1s ease-out"}}),w.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10 w-full p-8 mt-4",children:w.jsxs("div",{className:"relative transform scale-110",children:[e&&w.jsx("div",{className:"absolute inset-0 blur-3xl opacity-20 bg-white"}),w.jsx("div",{className:"relative drop-shadow-[0_0_25px_rgba(255,255,255,0.2)]",children:t.illustration})]})}),w.jsx("div",{className:`absolute top-4 right-4 z-30 px-2 py-1 rounded-lg border text-[10px] font-black uppercase tracking-widest ${Y(t.rarity.charAt(0).toUpperCase()+t.rarity.slice(1))}`,children:t.rarity}),w.jsxs("div",{className:"w-full p-6 pt-0 relative z-10 flex flex-col",children:[w.jsx("h3",{className:"text-xl font-black text-white mb-2 tracking-tight leading-none uppercase",children:t.name}),w.jsx("p",{className:"text-slate-400 text-xs leading-relaxed mb-4 font-medium",children:t.description}),w.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-slate-700 to-transparent mb-4"}),w.jsxs("div",{className:"flex justify-between items-end",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold mb-1",children:t.metricLabel}),w.jsx("span",{className:"text-lg font-black text-white",children:t.metricValue})]}),w.jsx("div",{className:"px-3 py-1.5 rounded-lg border border-white/10 bg-white/5 backdrop-blur-md text-[9px] font-bold uppercase tracking-widest text-slate-300",children:"TAP TO FLIP"})]})]}),e&&w.jsx("div",{className:"absolute inset-0 pointer-events-none z-30 opacity-30",style:{background:"linear-gradient(115deg, transparent 20%, white 48%, white 52%, transparent 80%)",backgroundSize:"200% 200%",backgroundPosition:`${i.x/100*200-50}%`}})]})]}),w.jsx("div",{className:"absolute inset-0 rounded-[32px] p-px",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:w.jsxs("div",{className:"relative h-full w-full bg-[#0a0f1d] border border-white/5 rounded-[30px] overflow-hidden flex flex-col p-6 shadow-2xl",children:[w.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-20`}),w.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),w.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[w.jsx("h3",{className:"text-xl font-black text-white mb-4 tracking-tight uppercase",children:"Badge Details"}),w.jsxs("div",{className:"flex-1 space-y-4",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold block mb-1",children:"Achievement Name"}),w.jsx("span",{className:"text-base font-bold text-white",children:t.name})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold block mb-1",children:"Description"}),w.jsx("span",{className:"text-sm text-slate-300 leading-relaxed",children:t.description})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold block mb-1",children:"Rarity"}),w.jsx("span",{className:`text-sm font-bold ${t.rarity==="legendary"?"text-amber-400":t.rarity==="epic"?"text-purple-400":"text-sky-400"}`,children:t.rarity.toUpperCase()})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold block mb-1",children:t.metricLabel}),w.jsx("span",{className:"text-2xl font-black text-white",children:t.metricValue})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-bold block mb-1",children:"Badge ID"}),w.jsx("span",{className:"text-xs font-mono text-slate-400",children:t.id})]})]}),w.jsx("div",{className:"mt-4 px-3 py-2 rounded-lg border border-white/10 bg-white/5 backdrop-blur-md text-center text-[9px] font-bold uppercase tracking-widest text-slate-300",children:"TAP TO FLIP BACK"})]})]})})]})]})]})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,o)=>o?o.toUpperCase():i.toLowerCase()),B0=t=>{const e=x2(t);return e.charAt(0).toUpperCase()+e.slice(1)},Xy=(...t)=>t.filter((e,i,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===i).join(" ").trim(),C2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=te.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c,...h},g)=>te.createElement("svg",{ref:g,...A2,width:e,height:e,stroke:t,strokeWidth:o?Number(i)*24/Number(e):i,className:Xy("lucide",a),...!l&&!C2(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,v])=>te.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const i=te.forwardRef(({className:o,...a},l)=>te.createElement(R2,{ref:l,iconNode:e,className:Xy(`lucide-${b2(B0(t))}`,`lucide-${t}`,o),...a}));return i.displayName=B0(t),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]],I2=dt("clapperboard",N2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],k2=dt("coffee",M2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],U2=dt("crown",D2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],O2=dt("flame",L2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],q2=dt("gem",P2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],H2=dt("heart",B2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],V2=dt("landmark",G2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],$2=dt("medal",z2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],J2=dt("message-square",F2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],K2=dt("mic",Y2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M20.341 6.484A10 10 0 0 1 10.266 21.85",key:"1enhxb"}],["path",{d:"M3.659 17.516A10 10 0 0 1 13.74 2.152",key:"1crzgf"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}]],X2=dt("orbit",j2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Q2=dt("pen-tool",W2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],eN=dt("repeat",Z2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],nN=dt("smartphone",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sN=dt("sparkles",iN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rN=dt("star",oN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lN=dt("target",aN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],cN=dt("trophy",uN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],fN=dt("wind",dN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pN=dt("zap",hN),Fa=[{id:"first_brew",name:"First Brew",description:"Shared your first coffee moment",emoji:"",metricLabel:"Moment",metricValue:"1/1",color:"#94a3b8",gradient:"from-slate-500/10 to-slate-400/5",illustration:We.createElement(k2,{className:"w-20 h-20 text-slate-300"}),requirement:t=>t.totalBrews>=1,rarity:"common"},{id:"social_butterfly",name:"Social Butterfly",description:"Received 5 sips on your brews",emoji:"",metricLabel:"Sips",metricValue:"5",color:"#94a3b8",gradient:"from-slate-500/10 to-slate-400/5",illustration:We.createElement(fN,{className:"w-20 h-20 text-slate-300"}),requirement:t=>t.totalSips>=5,rarity:"common"},{id:"conversationalist",name:"Conversationalist",description:"Received 3 comments",emoji:"",metricLabel:"Replies",metricValue:"3",color:"#94a3b8",gradient:"from-slate-500/10 to-slate-400/5",illustration:We.createElement(J2,{className:"w-20 h-20 text-slate-300"}),requirement:t=>t.totalComments>=3,rarity:"common"},{id:"coffee_lover",name:"Coffee Lover",description:"Posted 5 brews",emoji:"",metricLabel:"Brews",metricValue:"5",color:"#94a3b8",gradient:"from-slate-500/10 to-slate-400/5",illustration:We.createElement(H2,{className:"w-20 h-20 text-slate-300"}),requirement:t=>t.totalBrews>=5,rarity:"common"},{id:"rising_star",name:"Rising Star",description:"Received 25 sips",emoji:"",metricLabel:"Sips",metricValue:"25",color:"#38bdf8",gradient:"from-sky-500/20 to-blue-600/20",illustration:We.createElement(rN,{className:"w-20 h-20 text-sky-400"}),requirement:t=>t.totalSips>=25,rarity:"rare"},{id:"community_voice",name:"Community Voice",description:"Posted 10 brews",emoji:"",metricLabel:"Brews",metricValue:"10",color:"#38bdf8",gradient:"from-sky-500/20 to-blue-600/20",illustration:We.createElement(K2,{className:"w-20 h-20 text-sky-400"}),requirement:t=>t.totalBrews>=10,rarity:"rare"},{id:"crowd_pleaser",name:"Crowd Pleaser",description:"Received 10 comments",emoji:"",metricLabel:"Applause",metricValue:"10",color:"#38bdf8",gradient:"from-sky-500/20 to-blue-600/20",illustration:We.createElement(I2,{className:"w-20 h-20 text-sky-400"}),requirement:t=>t.totalComments>=10,rarity:"rare"},{id:"share_worthy",name:"Share Worthy",description:"Your brews were shared 5 times",emoji:"",metricLabel:"Echoes",metricValue:"5",color:"#38bdf8",gradient:"from-sky-500/20 to-blue-600/20",illustration:We.createElement(eN,{className:"w-20 h-20 text-sky-400"}),requirement:t=>t.sharesReceived>=5,rarity:"rare"},{id:"dedicated_barista",name:"Dedicated Barista",description:"Posted 20 brews",emoji:"",metricLabel:"Target",metricValue:"20",color:"#38bdf8",gradient:"from-sky-500/20 to-blue-600/20",illustration:We.createElement(lN,{className:"w-20 h-20 text-sky-400"}),requirement:t=>t.totalBrews>=20,rarity:"rare"},{id:"espresso_expert",name:"Espresso Expert",description:"Received 50 sips",emoji:"",metricLabel:"Impact",metricValue:"50",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(cN,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.totalSips>=50,rarity:"epic"},{id:"viral_brew",name:"Viral Brew",description:"Received 100 sips",emoji:"",metricLabel:"Heat",metricValue:"100+",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(O2,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.totalSips>=100,rarity:"epic"},{id:"engagement_master",name:"Engagement Master",description:"Received 25 comments",emoji:"",metricLabel:"Gems",metricValue:"25",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(q2,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.totalComments>=25,rarity:"epic"},{id:"prolific_creator",name:"Prolific Creator",description:"Posted 50 brews",emoji:"",metricLabel:"Folios",metricValue:"50",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(Q2,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.totalBrews>=50,rarity:"epic"},{id:"influencer",name:"Influencer",description:"Your brews were shared 15 times",emoji:"",metricLabel:"Ping",metricValue:"15",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(nN,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.sharesReceived>=15,rarity:"epic"},{id:"triple_threat",name:"Triple Threat",description:"30 brews, 75 sips, and 20 comments",emoji:"",metricLabel:"Power",metricValue:"3X",color:"#a855f7",gradient:"from-purple-500/20 to-fuchsia-600/20",illustration:We.createElement(pN,{className:"w-20 h-20 text-purple-400"}),requirement:t=>t.totalBrews>=30&&t.totalSips>=75&&t.totalComments>=20,rarity:"epic"},{id:"coffee_legend",name:"Coffee Legend",description:"Received 200 sips",emoji:"",metricLabel:"Legacy",metricValue:"200+",color:"#fbbf24",gradient:"from-amber-500/30 to-orange-600/30",illustration:We.createElement(U2,{className:"w-20 h-20 text-amber-400"}),requirement:t=>t.totalSips>=200,rarity:"legendary"},{id:"master_barista",name:"Master Barista",description:"Posted 100 brews",emoji:"",metricLabel:"Honor",metricValue:"100",color:"#fbbf24",gradient:"from-amber-500/30 to-orange-600/30",illustration:We.createElement($2,{className:"w-20 h-20 text-amber-400"}),requirement:t=>t.totalBrews>=100,rarity:"legendary"},{id:"community_pillar",name:"Community Pillar",description:"75 brews, 150 sips, and 50 comments",emoji:"",metricLabel:"Status",metricValue:"ELIT",color:"#fbbf24",gradient:"from-amber-500/30 to-orange-600/30",illustration:We.createElement(V2,{className:"w-20 h-20 text-amber-400"}),requirement:t=>t.totalBrews>=75&&t.totalSips>=150&&t.totalComments>=50,rarity:"legendary"},{id:"taste_maker",name:"Taste Maker",description:"Your brews were shared 30 times",emoji:"",metricLabel:"Spark",metricValue:"30",color:"#fbbf24",gradient:"from-amber-500/30 to-orange-600/30",illustration:We.createElement(sN,{className:"w-20 h-20 text-amber-400"}),requirement:t=>t.sharesReceived>=30,rarity:"legendary"},{id:"wavegram_elite",name:"Wavegram Elite",description:"100 brews, 250 sips, 75 comments, and 25 shares",emoji:"",metricLabel:"Cosmos",metricValue:"",color:"#fbbf24",gradient:"from-amber-500/30 to-orange-600/30",illustration:We.createElement(X2,{className:"w-20 h-20 text-amber-400"}),requirement:t=>t.totalBrews>=100&&t.totalSips>=250&&t.totalComments>=75&&t.sharesReceived>=25,rarity:"legendary"}],mN=t=>Fa.filter(e=>e.requirement(t)),gN=()=>{const[t,e]=te.useState(null),[i,o]=te.useState(null),[a,l]=te.useState([]),[c,h]=te.useState(!0),[g,m]=te.useState(be.HOME),[v,_]=te.useState(!1),[S,T]=te.useState(null),[x,A]=te.useState(null),[R,D]=te.useState(null),[q,M]=te.useState(""),[H,Y]=te.useState([]),[z,G]=te.useState(!1),[ie,K]=te.useState(null),[ce,xe]=te.useState("brews"),[qe,Ce]=te.useState(0),[Ye,xt]=te.useState(parseInt(localStorage.getItem("lastViewedInteractions")||"0",10)),B=We.useRef(Ye);te.useEffect(()=>{if(localStorage.getItem("bc_mock_session")==="training_team_active"){e({user:{id:"77777777-7777-7777-7777-777777777777"}}),o({id:"77777777-7777-7777-7777-777777777777",username:"twc_training",name:"TWC Training Team",avatar:"https://api.dicebear.com/7.x/identicon/svg?seed=training",verified:!0});return}Me.auth.getSession().then(({data:{session:Se}})=>{e(Se),Se&&j(Se.user.id)});const{data:{subscription:ye}}=Me.auth.onAuthStateChange((Se,Ee)=>{e(Ee),Ee?j(Ee.user.id):o(null)});return()=>ye.unsubscribe()},[]);const j=async Q=>{const{data:ye,error:Se}=await Me.from("profiles").select("*").eq("id",Q).single();Se?console.error("Error fetching profile:",Se):ye&&o({id:ye.id,username:ye.username,name:ye.full_name,avatar:ye.avatar_url,verified:!0})},ae=async()=>{localStorage.removeItem("bc_mock_session"),await Me.auth.signOut(),window.location.reload()},Pe=Q=>{m(be.HOME),K(Q),setTimeout(()=>{const ye=document.getElementById(`post-${Q}`);ye&&ye.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>K(null),3e3)},100)},Ie=te.useCallback(async()=>{h(!0);const{data:Q,error:ye}=await Me.from("posts").select(`
        *,
        profiles (
          full_name,
          username,
          avatar_url
        ),
        comments (
          id,
          content,
          created_at,
          user_id,
          avatar,
          username
        ),
        likes (user_id),
        shares (id, sender_id, receiver_id)
      `).order("created_at",{ascending:!1});if(ye)console.error("Error fetching posts:",ye),l(xS);else if(Q){const Se=Q.map(Ee=>{var Ze;return{id:Ee.id,userId:Ee.user_id,username:((Ze=Ee.profiles)==null?void 0:Ze.full_name)||Ee.username||"Unknown Barista",avatar:Ee.avatar,content:Ee.content,image:Ee.image,likes:Ee.likes_count,shares:(Ee.shares||[]).length,createdAt:new Date(Ee.created_at).toLocaleDateString(),isLiked:(Ee.likes||[]).some(ot=>ot.user_id===(i==null?void 0:i.id)),comments:Ee.comments.map(ot=>({id:ot.id,userId:ot.user_id,username:ot.username,avatar:ot.avatar,content:ot.content,createdAt:new Date(ot.created_at).toLocaleDateString(),likes:0}))}});l(Se),pe()}h(!1)},[i]);te.useEffect(()=>{Ie()},[Ie]),te.useEffect(()=>{g===be.POST&&(_(!0),m(be.HOME)),g===be.ACTIVITY&&pe()},[g]);const I=async Q=>{if(!i)return;const ye=a.find(Ee=>Ee.id===Q);if(!ye)return;const Se=!ye.isLiked;l(Ee=>Ee.map(Ze=>Ze.id===Q?{...Ze,isLiked:Se,likes:Se?Ze.likes+1:Math.max(0,Ze.likes-1)}:Ze)),Se?(await Me.from("likes").insert({post_id:Q,user_id:i.id}),await Me.rpc("increment_likes",{post_id_val:Q})):(await Me.from("likes").delete().eq("post_id",Q).eq("user_id",i.id),await Me.rpc("decrement_likes",{post_id_val:Q}))},J=async(Q,ye)=>{if(!i)return;const{error:Se}=await Me.from("posts").insert([{user_id:i.id,username:i.username,avatar:i.avatar,content:Q,image:ye,likes_count:0}]);Se?(console.error("FAILED_TO_CREATE_POST",Se),alert(`Failed to share your brew: ${Se.message}`)):(Ie(),_(!1))},X=async(Q,ye)=>{if(!R||!i)return;const{error:Se}=await Me.from("posts").update({content:Q,image:ye||R.image}).eq("id",R.id);Se?(console.error("FAILED_TO_UPDATE_POST",Se),alert(`Failed to update your brew: ${Se.message}`)):(Ie(),D(null))},Z=async Q=>{if(i&&window.confirm("Are you sure you want to delete this brew? This cannot be undone."))try{const{error:ye}=await Me.from("shares").delete().eq("post_id",Q);ye&&console.warn("App: Error deleting shares (might be empty, ignoring):",ye);const{error:Se}=await Me.from("likes").delete().eq("post_id",Q);Se&&console.warn("App: Error deleting likes (might be empty, ignoring):",Se);const{error:Ee}=await Me.from("comments").delete().eq("post_id",Q);Ee&&console.warn("App: Error deleting comments (might be empty, ignoring):",Ee);const{error:Ze}=await Me.from("posts").delete().eq("id",Q).eq("user_id",i.id);if(Ze)throw Ze;l(ot=>ot.filter(Ri=>Ri.id!==Q)),Ie(),pe()}catch(ye){console.error("FAILED_TO_DELETE_POST",ye),alert(`Failed to delete your brew. Error: ${ye.message}`)}},fe=async()=>{if(!S||!q.trim()||!i)return;const{error:Q}=await Me.from("comments").insert([{post_id:S.id,user_id:i.id,username:i.username,avatar:i.avatar,content:q}]);Q?(console.error("FAILED_TO_ADD_COMMENT",Q),alert(`Failed to post your reply: ${Q.message}`)):(M(""),T(null),Ie(),pe())},pe=async()=>{if(i){G(!0);try{const{data:Q,error:ye}=await Me.from("posts").select("id, content").eq("user_id",i.id);if(ye)throw ye;if(!Q||Q.length===0){Y([]),G(!1);return}const Se=Q.map(_e=>_e.id),Ee=Q.reduce((_e,Nt)=>({..._e,[Nt.id]:Nt.content}),{}),{data:Ze,error:ot}=await Me.from("shares").select("*").eq("receiver_id",i.id),hn=(Ze||[]).map(_e=>_e.post_id).filter(_e=>!Ee[_e]);if(hn.length>0){const{data:_e}=await Me.from("posts").select("id, content").in("id",hn);(_e||[]).forEach(Nt=>{Ee[Nt.id]=Nt.content})}const{data:Rn,error:ve}=await Me.from("likes").select("*").in("post_id",Se),{data:Ge,error:Nn}=await Me.from("comments").select("*").in("post_id",Se),ts=[...new Set([...(Rn||[]).map(_e=>_e.user_id),...(Ge||[]).map(_e=>_e.user_id),...(Ze||[]).map(_e=>_e.sender_id)])];let pr={};if(ts.length>0){const{data:_e}=await Me.from("profiles").select("*").in("id",ts);pr=(_e||[]).reduce((Nt,pn)=>({...Nt,[pn.id]:pn}),{})}const mr=[];let Ct=0;const oo=(_e,Nt,pn,dl)=>{if(pn===i.id)return;const gr=!!_e.created_at,yr=new Date(_e.created_at||0);gr&&yr.getTime()>B.current&&Ct++;const Dt=pr[pn];mr.push({id:`${Nt}-${_e.id}`,type:Nt,actorName:(Dt==null?void 0:Dt.full_name)||(Dt==null?void 0:Dt.username)||"A barista",actorUsername:(Dt==null?void 0:Dt.username)||"unknown",actorAvatar:(Dt==null?void 0:Dt.avatar_url)||`https://api.dicebear.com/7.x/identicon/svg?seed=${pn}`,postContent:Ee[_e.post_id]||"your brew",postId:_e.post_id,timestamp:yr,content:dl})};(Ze||[]).forEach(_e=>oo(_e,"share",_e.sender_id)),(Rn||[]).forEach(_e=>oo(_e,"like",_e.user_id)),(Ge||[]).forEach(_e=>oo(_e,"comment",_e.user_id,_e.content)),Y(mr.sort((_e,Nt)=>Nt.timestamp.getTime()-_e.timestamp.getTime())),g===be.ACTIVITY?Ce(0):Ce(Ct)}catch(Q){console.error("FAILED_TO_FETCH_ACTIVITY",Q)}finally{G(!1)}}},ke=()=>{if(c&&g===be.HOME)return w.jsx("div",{className:"flex-1 flex items-center justify-center",children:w.jsxs("div",{className:"flex flex-col items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 border-4 border-[#c29a67] border-t-transparent rounded-full animate-spin"}),w.jsx("p",{className:"text-[#a09a96] font-medium animate-pulse",children:"Frothing the milk..."})]})});switch(g){case be.HOME:return w.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[w.jsxs("div",{className:"p-6 border-b border-[#2c1a12] flex items-center justify-between sticky top-0 bg-[#0e0d0c]/98 backdrop-blur-xl z-50 w-full max-w-2xl shadow-[0_10px_30px_-10px_rgba(0,0,0,0.5)]",children:[w.jsx("h1",{className:"text-2xl font-black text-[#efebe9] tracking-tighter",children:"Daily Brews"}),w.jsx("div",{className:"px-3 py-1 bg-[#c29a67]/10 text-[#c29a67] rounded-full text-[10px] font-black uppercase tracking-widest border border-[#c29a67]/20",children:"Barista's Choice"})]}),w.jsxs("div",{className:"w-full max-w-2xl px-4 py-8 space-y-8 pb-32",children:[w.jsx(S2,{currentUser:i}),w.jsx("div",{className:"space-y-0",children:a.map(ve=>w.jsx("div",{id:`post-${ve.id}`,className:`transition-all duration-300 ${ie===ve.id?"ring-2 ring-[#c29a67] ring-offset-2 ring-offset-[#0e0d0c] rounded-3xl":""}`,children:w.jsx(Lm,{post:ve,isOwner:ve.userId===i.id,onLike:I,onComment:Ge=>T(Ge),onShare:Ge=>A(Ge),onEdit:Ge=>D(Ge),onDelete:Z})},ve.id))})]})]});case be.PROFILE:const Q=a.filter(ve=>ve.userId===i.id),ye=Q.length,Se=Q.reduce((ve,Ge)=>ve+(Ge.likes||0),0),Ee=Q.reduce((ve,Ge)=>{var Nn;return ve+(((Nn=Ge.comments)==null?void 0:Nn.length)||0)},0),Ze=Q.reduce((ve,Ge)=>ve+(Ge.shares||0),0),hn=mN({totalBrews:ye,totalSips:Se,totalComments:Ee,totalShares:0,sharesReceived:Ze}),Rn=Fa.find(ve=>!hn.some(Ge=>Ge.id===ve.id));return w.jsx("div",{className:"flex-1 flex flex-col items-center",children:w.jsxs("div",{className:"w-full max-w-2xl px-4 py-12",children:[w.jsxs("div",{className:"flex justify-between items-start mb-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold tracking-tight text-[#efebe9]",children:i.name}),w.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[w.jsxs("span",{className:"text-[#a09a96]",children:["@",i.username]}),w.jsx("span",{className:"px-2 py-0.5 bg-[#c29a67]/10 text-[#c29a67] text-[10px] font-bold rounded-full border border-[#c29a67]/20 uppercase tracking-wider",children:"Verified Barista"})]})]}),w.jsx("img",{src:i.avatar,className:"w-20 h-20 rounded-full border-2 border-[#c29a67]/20"})]}),w.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[w.jsxs("div",{onClick:()=>xe("brews"),className:`p-4 rounded-2xl border text-center cursor-pointer transition-all active:scale-95 ${ce==="brews"?"bg-[#c29a67]/20 border-[#c29a67] shadow-[0_0_20px_rgba(194,154,103,0.1)]":"bg-[#1a1817] border-[#2c1a12] hover:border-[#c29a67]/50"}`,children:[w.jsx("div",{className:`text-xl font-bold ${ce==="brews"?"text-[#c29a67]":"text-[#efebe9]"}`,children:ye}),w.jsx("div",{className:"text-[10px] text-[#a09a96] uppercase font-bold tracking-widest mt-1",children:"Brews"})]}),w.jsxs("div",{className:"bg-[#1a1817] p-4 rounded-2xl border border-[#2c1a12] text-center opacity-50 cursor-not-allowed",children:[w.jsx("div",{className:"text-xl font-bold text-[#efebe9]",children:Se}),w.jsx("div",{className:"text-[10px] text-[#a09a96] uppercase font-bold tracking-widest mt-1",children:"Sips"})]}),w.jsxs("div",{onClick:()=>xe("badges"),className:`p-4 rounded-2xl border text-center cursor-pointer transition-all active:scale-95 bg-gradient-to-br from-[#c29a67]/10 to-transparent ${ce==="badges"?"bg-[#c29a67]/20 border-[#c29a67] shadow-[0_0_20px_rgba(194,154,103,0.1)]":"bg-[#1a1817] border-[#2c1a12] hover:border-[#c29a67]/50"}`,children:[w.jsx("div",{className:"text-xl font-bold text-[#c29a67]",children:hn.length}),w.jsx("div",{className:"text-[10px] text-[#a09a96] uppercase font-bold tracking-widest mt-1",children:"Badges"})]})]}),ce==="badges"?w.jsxs("div",{className:"mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("h3",{className:"text-[#efebe9] font-bold mb-4 flex items-center gap-2",children:[w.jsx("span",{children:" Earned Achievements"}),w.jsxs("span",{className:"text-xs font-normal text-[#a09a96] bg-[#2c1a12] px-2 py-1 rounded-full",children:[hn.length," / ",Fa.length]})]}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Fa.map(ve=>{const Ge=hn.some(Nn=>Nn.id===ve.id);return w.jsx("div",{className:"flex justify-center w-full",children:w.jsx("div",{className:"w-full max-w-[280px]",children:w.jsx(T2,{achievement:ve,isUnlocked:Ge})})},ve.id)})}),Rn&&w.jsxs("div",{className:"mt-6 bg-[#1a1817]/40 p-4 rounded-2xl border border-[#2c1a12] flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-[#0e0d0c] border border-[#2c1a12] flex items-center justify-center opacity-50 text-2xl grayscale",children:Rn.emoji}),w.jsxs("div",{children:[w.jsx("p",{className:"text-[#a09a96] text-xs uppercase font-bold tracking-widest mb-0.5",children:"Next Goal"}),w.jsx("p",{className:"text-[#efebe9] font-bold text-sm",children:Rn.name}),w.jsx("p",{className:"text-[#a09a96] text-xs",children:Rn.description})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"border-b border-[#2c1a12] flex mb-6",children:[w.jsx("button",{className:"px-6 py-3 text-sm font-bold text-[#c29a67] border-b-2 border-[#c29a67]",children:"Your Brews"}),w.jsx("button",{className:"px-6 py-3 text-sm font-bold text-[#a09a96]/50 cursor-not-allowed",children:"Sips"})]}),w.jsxs("div",{className:"space-y-6 w-full pb-32",children:[Q.map(ve=>w.jsx(Lm,{post:ve,isOwner:!0,onLike:I,onComment:Ge=>T(Ge),onShare:Ge=>A(Ge),onEdit:Ge=>D(Ge),onDelete:Z},ve.id)),Q.length===0&&w.jsxs("div",{className:"text-center py-12",children:[w.jsx("p",{className:"text-[#a09a96] mb-4",children:"You haven't brewed anything yet."}),w.jsx("button",{onClick:()=>_(!0),className:"px-6 py-2 bg-[#c29a67] text-[#0e0d0c] font-bold rounded-xl hover:bg-[#d4aa7d] transition-colors",children:"Brew your first cup"})]})]})]})]})});case be.ACTIVITY:return w.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[w.jsxs("div",{className:"p-6 border-b border-[#2c1a12] flex items-center justify-between sticky top-0 bg-[#0e0d0c]/98 backdrop-blur-xl z-50 w-full max-w-2xl shadow-[0_10px_30px_-10px_rgba(0,0,0,0.5)]",children:[w.jsx("h1",{className:"text-2xl font-black text-[#efebe9] tracking-tighter",children:"Interactions"}),w.jsx("div",{className:"px-3 py-1 bg-[#c29a67]/10 text-[#c29a67] rounded-full text-[10px] font-black uppercase tracking-widest border border-[#c29a67]/20",children:"Latest Taps"})]}),w.jsx("div",{className:"w-full max-w-2xl px-4 py-8 space-y-4 pb-32",children:z?w.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[w.jsx("div",{className:"w-10 h-10 border-4 border-[#c29a67] border-t-transparent rounded-full animate-spin"}),w.jsx("p",{className:"text-[#a09a96] font-medium",children:"Checking the office buzz..."})]}):H.length===0?w.jsx("div",{className:"text-center py-20 bg-[#1a1817]/30 rounded-3xl border border-[#2c1a12]/50 backdrop-blur-sm",children:w.jsx("p",{className:"text-[#a09a96] font-medium italic",children:"No office buzz yet. Share a brew to get the conversation started! "})}):H.map(ve=>w.jsx("div",{onClick:()=>Pe(ve.postId),className:"bg-[#1a1817]/40 p-5 rounded-3xl border border-[#2c1a12]/50 backdrop-blur-sm hover:border-[#c29a67]/30 transition-all group cursor-pointer active:scale-[0.98]",children:w.jsxs("div",{className:"flex gap-4",children:[w.jsx("img",{src:ve.actorAvatar,className:"w-12 h-12 rounded-2xl border border-[#2c1a12] shrink-0"}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[w.jsxs("p",{className:"text-[#efebe9] font-bold text-sm truncate",children:[ve.actorName,w.jsx("span",{className:"text-[#a09a96] font-medium ml-2",children:ve.type==="like"?"sipped your brew":ve.type==="comment"?"replied to you":"shared a brew with you"})]}),w.jsx("span",{className:"text-[10px] text-[#a09a96] uppercase tracking-wider shrink-0",children:ve.timestamp.toLocaleDateString()})]}),ve.type==="comment"&&w.jsxs("p",{className:"text-[#efebe9]/80 text-sm mb-3 line-clamp-2 bg-[#0e0d0c]/40 p-3 rounded-xl border border-[#2c1a12]/30 italic",children:['"',ve.content,'"']}),w.jsxs("p",{className:"text-[11px] text-[#a09a96] truncate",children:["On: ",w.jsx("span",{className:"text-[#c29a67]/70 italic",children:ve.postContent})]})]}),w.jsx("div",{className:"flex items-center justify-center p-2 bg-[#2c1a12]/30 rounded-xl group-hover:bg-[#c29a67]/10 transition-colors",children:ve.type==="like"?w.jsx("svg",{className:"w-5 h-5 text-[#ff4b4b]",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):ve.type==="comment"?w.jsx("svg",{className:"w-5 h-5 text-[#c29a67]",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}):w.jsx("svg",{className:"w-5 h-5 text-[#efebe9]",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})},ve.id))})]});default:return w.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-neutral-500",children:w.jsx("p",{className:"text-lg",children:"Coming soon..."})})}};if(!t||!i)return w.jsx(E2,{});return w.jsxs(CS,{activeTab:g,setActiveTab:yt,onLogout:ae,unreadCount:qe,children:[ke(),v&&i&&w.jsx(q0,{user:i,onClose:()=>_(!1),onSubmit:J}),R&&i&&w.jsx(q0,{user:i,initialData:{content:R.content,image:R.image},onClose:()=>D(null),onSubmit:X}),S&&w.jsx("div",{className:"fixed inset-0 bg-[#0e0d0c]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in zoom-in-95 duration-200",children:w.jsxs("div",{className:"bg-[#1a1817] w-full max-w-xl rounded-3xl border border-[#2c1a12] flex flex-col max-h-[90vh] shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"p-4 border-b border-[#2c1a12] flex items-center justify-between bg-[#1a1817]",children:[w.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Reply to Brew"}),w.jsx("button",{onClick:()=>T(null),className:"p-2 hover:bg-[#2c1a12] rounded-full transition-colors text-[#a09a96] hover:text-[#efebe9]",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-[#1a1817]",children:[w.jsxs("div",{className:"flex gap-4",children:[w.jsx("img",{src:S.avatar,className:"w-12 h-12 rounded-full border border-[#c29a67]/20"}),w.jsxs("div",{children:[w.jsxs("div",{className:"font-bold text-[#efebe9]",children:["@",S.username]}),w.jsx("div",{className:"mt-2 text-[#efebe9]/80 leading-relaxed",children:S.content})]})]}),w.jsxs("div",{className:"mt-8 flex gap-4",children:[w.jsx("img",{src:i.avatar,className:"w-12 h-12 rounded-full border border-[#c29a67]/20"}),w.jsx("textarea",{autoFocus:!0,value:q,onChange:Q=>M(Q.target.value),placeholder:"Share your thoughts on this brew...",className:"flex-1 bg-transparent border-none focus:ring-0 text-[17px] resize-none min-h-[120px] p-0 placeholder-[#a09a96]/50 text-[#efebe9]"})]})]}),w.jsx("div",{className:"p-5 border-t border-[#2c1a12] flex justify-end bg-[#1a1817]",children:w.jsx("button",{onClick:fe,disabled:!q.trim(),className:"bg-[#efebe9] text-[#0e0d0c] font-black px-8 py-3 rounded-xl disabled:opacity-30 disabled:cursor-not-allowed hover:bg-white transition-all shadow-lg active:scale-95",children:"Sip Together"})})]})}),x&&w.jsx(w2,{post:x,currentUser:i,onClose:()=>A(null)})]});function yt(Q){if(Q===be.ACTIVITY){Ce(0);const ye=H.length>0?Math.max(...H.map(Ze=>Ze.timestamp.getTime())):0,Se=Date.now(),Ee=Math.max(Se,ye);xt(Ee),B.current=Ee,localStorage.setItem("lastViewedInteractions",Ee.toString())}m(Q)}},Wy=document.getElementById("root");if(!Wy)throw new Error("Could not find root element to mount to");const yN=bS.createRoot(Wy);yN.render(w.jsx(We.StrictMode,{children:w.jsx(gN,{})}));
